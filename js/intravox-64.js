"use strict";(self.webpackChunknextcloud_intravox=self.webpackChunknextcloud_intravox||[]).push([[64],{4378:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(1601),l=n.n(a),i=n(6314),o=n.n(i)()(l());o.push([e.id,"\n.navigation-item[data-v-125cf95b] {\n  background: var(--color-main-background);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  padding: 8px;\n}\n.navigation-item.level-2[data-v-125cf95b],\n.navigation-item.level-3[data-v-125cf95b] {\n  margin-left: 24px;\n  margin-top: 6px;\n}\n.item-content[data-v-125cf95b] {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n}\n.drag-handle[data-v-125cf95b] {\n  cursor: grab;\n  color: var(--color-text-maxcontrast);\n  padding: 2px;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n.drag-handle[data-v-125cf95b]:active {\n  cursor: grabbing;\n}\n.item-details[data-v-125cf95b] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.item-title-input[data-v-125cf95b] {\n  width: 100%;\n  padding: 6px 10px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n  font-weight: 500;\n}\n.item-link-options[data-v-125cf95b] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.link-selector[data-v-125cf95b] {\n  flex: 1;\n  min-width: 180px;\n}\n.link-selector.is-disabled[data-v-125cf95b] {\n  opacity: 0.5;\n  pointer-events: none;\n}\n.or-separator[data-v-125cf95b] {\n  color: var(--color-text-maxcontrast);\n  font-size: 11px;\n  text-transform: uppercase;\n}\n.url-section[data-v-125cf95b] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex: 1;\n}\n.url-input[data-v-125cf95b] {\n  flex: 1;\n  padding: 6px 10px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n}\n.url-input.has-value[data-v-125cf95b] {\n  border-color: var(--color-primary-element);\n  background: var(--color-primary-element-light);\n}\n.clear-url-btn[data-v-125cf95b] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  padding: 0;\n  border: none;\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  color: var(--color-text-maxcontrast);\n  flex-shrink: 0;\n}\n.clear-url-btn[data-v-125cf95b]:hover {\n  background: var(--color-error);\n  color: white;\n}\n.target-selector[data-v-125cf95b] {\n  min-width: 120px;\n  flex-shrink: 0;\n}\n.item-actions[data-v-125cf95b] {\n  display: flex;\n  gap: 2px;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n.children-list[data-v-125cf95b] {\n  margin-top: 6px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n",""]);const r=o},8064:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var a=n(641),l=n(33);const i={class:"navigation-editor"},o={class:"modal-actions-top"},r={class:"type-selector-left"},d={class:"action-buttons"},s={class:"editor-section"},c={class:"section-header"},p={key:0,class:"empty-state"};var m=n(3334),u=n(5873),v=n(432),g=n.n(v),h=n(2490),b=n(7054),f=n(3751);const x={class:"item-content"},y={class:"drag-handle"},I={class:"item-details"},k=["placeholder"],N={class:"item-link-options"},C={class:"or-separator"},L={class:"url-section"},A=["placeholder"],P=["aria-label"],U={class:"item-actions"};var _=n(9445),w=n(863),T=n(5754),Q=n(2686),S=n(5602),D=n(7801);const F={name:"NavigationItem",components:{NcButton:u.x1,NcSelect:u.EQ,draggable:g(),DragVertical:_.A,Plus:h.A,Delete:w.A,Close:T.A,ChevronLeft:Q.A,ChevronRight:S.A,PageTreeSelect:D.A},props:{item:{type:Object,required:!0},index:{type:Number,required:!0},level:{type:Number,default:1},parentPath:{type:String,default:""},isFirst:{type:Boolean,default:!1},siblingCount:{type:Number,default:1}},emits:["update","delete","add-child","promote","demote"],data(){return{localItem:JSON.parse(JSON.stringify(this.item)),targetOptions:[{value:"_self",label:(0,m.Tl)("intravox","Same tab")},{value:"_blank",label:(0,m.Tl)("intravox","New tab")}]}},computed:{itemPath(){return this.parentPath?`${this.parentPath}.${this.index}`:`${this.index}`},selectedTarget(){const e=this.localItem.target||"_self";return this.targetOptions.find(t=>t.value===e)},canPromote(){return this.level>1},canDemote(){return!this.isFirst&&this.level<3}},watch:{item:{deep:!0,handler(e){this.localItem=JSON.parse(JSON.stringify(e))}}},methods:{t:(e,t={})=>(0,m.Tl)("intravox",e,t),emitUpdate(){this.$emit("update",this.itemPath,this.localItem)},updatePageLink(e){if(e){this.localItem.uniqueId=e.uniqueId,this.localItem.url=null;const t=this.localItem.title?.trim()||"";(""===t||t===this.t("New Item"))&&(this.localItem.title=e.title)}else this.localItem.uniqueId=null;this.emitUpdate()},updateTarget(e){this.localItem.target=e?e.value:"_self",this.emitUpdate()},onUrlInput(){this.localItem.url&&this.localItem.url.trim()&&(this.localItem.uniqueId=null),this.emitUpdate()},clearUrl(){this.localItem.url=null,this.localItem.target="_self",this.emitUpdate()},onChildrenChange(){this.emitUpdate()}}};var $=n(5072),O=n.n($),V=n(7825),z=n.n(V),q=n(7659),j=n.n(q),B=n(5056),E=n.n(B),R=n(540),W=n.n(R),X=n(1113),J=n.n(X),M=n(4378),H={};H.styleTagTransform=J(),H.setAttributes=E(),H.insert=j().bind(null,"head"),H.domAPI=z(),H.insertStyleElement=W(),O()(M.A,H),M.A&&M.A.locals&&M.A.locals;var G=n(6262);const K=(0,G.A)(F,[["render",function(e,t,n,i,o,r){const d=(0,a.g2)("DragVertical"),s=(0,a.g2)("PageTreeSelect"),c=(0,a.g2)("Close"),p=(0,a.g2)("NcSelect"),m=(0,a.g2)("ChevronLeft"),u=(0,a.g2)("NcButton"),v=(0,a.g2)("ChevronRight"),g=(0,a.g2)("Plus"),h=(0,a.g2)("Delete"),b=(0,a.g2)("NavigationItem",!0),_=(0,a.g2)("draggable");return(0,a.uX)(),(0,a.CE)("div",{class:(0,l.C4)(["navigation-item",`level-${n.level}`])},[(0,a.Lk)("div",x,[(0,a.Q3)(" Drag Handle "),(0,a.Lk)("div",y,[(0,a.bF)(d,{size:20})]),(0,a.Q3)(" Item Details "),(0,a.Lk)("div",I,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.localItem.title=e),type:"text",class:"item-title-input",placeholder:r.t("Item title"),onInput:t[1]||(t[1]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,k),[[f.Jo,o.localItem.title]]),(0,a.Lk)("div",N,[(0,a.Q3)(" Link to Page (disabled when URL is set) "),(0,a.bF)(s,{"model-value":o.localItem.uniqueId,placeholder:r.t("Link to page"),disabled:!!o.localItem.url,onSelect:r.updatePageLink,class:(0,l.C4)(["link-selector",{"is-disabled":!!o.localItem.url}])},null,8,["model-value","placeholder","disabled","onSelect","class"]),(0,a.Q3)(" OR Custom URL "),(0,a.Lk)("span",C,(0,l.v_)(r.t("or")),1),(0,a.Lk)("div",L,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.localItem.url=e),type:"url",class:(0,l.C4)(["url-input",{"has-value":!!o.localItem.url}]),placeholder:r.t("Custom URL"),onInput:t[3]||(t[3]=(...e)=>r.onUrlInput&&r.onUrlInput(...e))},null,42,A),[[f.Jo,o.localItem.url]]),(0,a.Q3)(" Clear URL button "),o.localItem.url?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"clear-url-btn",onClick:t[4]||(t[4]=(...e)=>r.clearUrl&&r.clearUrl(...e)),"aria-label":r.t("Clear URL")},[(0,a.bF)(c,{size:16})],8,P)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Target selector (for URLs) "),o.localItem.url?((0,a.uX)(),(0,a.Wv)(p,{key:1,"model-value":r.selectedTarget,options:o.targetOptions,"onUpdate:modelValue":r.updateTarget,class:"target-selector"},null,8,["model-value","options","onUpdate:modelValue"])):(0,a.Q3)("v-if",!0)])])]),(0,a.Q3)(" Actions "),(0,a.Lk)("div",U,[(0,a.Q3)(" Promote: move item up one level (to parent's level) "),r.canPromote?((0,a.uX)(),(0,a.Wv)(u,{key:0,onClick:t[5]||(t[5]=t=>e.$emit("promote",r.itemPath)),type:"tertiary","aria-label":r.t("Promote (move up one level)")},{icon:(0,a.k6)(()=>[(0,a.bF)(m,{size:20})]),_:1},8,["aria-label"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Demote: make item a child of the item above "),r.canDemote?((0,a.uX)(),(0,a.Wv)(u,{key:1,onClick:t[6]||(t[6]=t=>e.$emit("demote",r.itemPath)),type:"tertiary","aria-label":r.t("Demote (make child of item above)")},{icon:(0,a.k6)(()=>[(0,a.bF)(v,{size:20})]),_:1},8,["aria-label"])):(0,a.Q3)("v-if",!0),n.level<3?((0,a.uX)(),(0,a.Wv)(u,{key:2,onClick:t[7]||(t[7]=t=>e.$emit("add-child",r.itemPath)),type:"tertiary","aria-label":r.t("Add sub-item")},{icon:(0,a.k6)(()=>[(0,a.bF)(g,{size:20})]),_:1},8,["aria-label"])):(0,a.Q3)("v-if",!0),(0,a.bF)(u,{onClick:t[8]||(t[8]=t=>e.$emit("delete",r.itemPath)),type:"error","aria-label":r.t("Delete item")},{icon:(0,a.k6)(()=>[(0,a.bF)(h,{size:20})]),_:1},8,["aria-label"])])]),(0,a.Q3)(" Children (recursive) "),o.localItem.children&&o.localItem.children.length>0?((0,a.uX)(),(0,a.Wv)(_,{key:0,modelValue:o.localItem.children,"onUpdate:modelValue":t[14]||(t[14]=e=>o.localItem.children=e),"item-key":"id",handle:".drag-handle",group:"navigation-items",onChange:r.onChildrenChange,class:"children-list"},{item:(0,a.k6)(({element:l,index:i})=>[(0,a.bF)(b,{item:l,index:i,level:n.level+1,"parent-path":r.itemPath,"is-first":0===i,"sibling-count":o.localItem.children.length,onUpdate:t[9]||(t[9]=(t,n)=>e.$emit("update",t,n)),onDelete:t[10]||(t[10]=t=>e.$emit("delete",t)),onAddChild:t[11]||(t[11]=t=>e.$emit("add-child",t)),onPromote:t[12]||(t[12]=t=>e.$emit("promote",t)),onDemote:t[13]||(t[13]=t=>e.$emit("demote",t))},null,8,["item","index","level","parent-path","is-first","sibling-count"])]),_:1},8,["modelValue","onChange"])):(0,a.Q3)("v-if",!0)],2)}],["__scopeId","data-v-125cf95b"]]),Y={name:"NavigationEditor",components:{NcModal:u.FH,NcButton:u.x1,NcSelect:u.EQ,draggable:g(),Plus:h.A,ContentSave:b.A,NavigationItem:K},props:{navigation:{type:Object,required:!0}},emits:["close","save"],data(){return{localNavigation:JSON.parse(JSON.stringify(this.navigation)),typeOptions:[{value:"dropdown",label:(0,m.Tl)("intravox","Dropdown (Cascading)")},{value:"megamenu",label:(0,m.Tl)("intravox","Mega Menu")}]}},computed:{selectedType(){const e=this.localNavigation.type||"dropdown";return this.typeOptions.find(t=>t.value===e)}},methods:{t:(e,t={})=>(0,m.Tl)("intravox",e,t),updateType(e){e&&(this.localNavigation.type=e.value)},addTopLevelItem(){this.localNavigation.items.push({id:`nav_${Date.now()}`,title:(0,m.Tl)("intravox","New Item"),uniqueId:null,url:null,children:[]})},addChildItem(e){const t=this.getItemByPath(e);t&&t.children.length<10&&t.children.push({id:`nav_${Date.now()}`,title:(0,m.Tl)("intravox","New Item"),uniqueId:null,url:null,children:[]})},updateItem(e,t){const n=this.getItemByPath(e);n&&Object.assign(n,t)},deleteItem(e){const t=e.split(".");if(1===t.length){const e=parseInt(t[0]);this.localNavigation.items.splice(e,1)}else{const e=t.slice(0,-1).join("."),n=this.getItemByPath(e),a=parseInt(t[t.length-1]);n&&n.children&&n.children.splice(a,1)}},getItemByPath(e){const t=e.split(".").map(e=>parseInt(e));let n=this.localNavigation.items[t[0]];for(let e=1;e<t.length;e++){if(!n||!n.children)return null;n=n.children[t[e]]}return n},getParentAndIndex(e){const t=e.split(".").map(e=>parseInt(e));if(1===t.length)return{parent:null,parentList:this.localNavigation.items,index:t[0]};const n=t.slice(0,-1);let a=this.localNavigation.items[n[0]];for(let e=1;e<n.length;e++){if(!a||!a.children)return null;a=a.children[n[e]]}return{parent:a,parentList:a.children,index:t[t.length-1]}},promoteItem(e){const t=e.split(".").map(e=>parseInt(e));if(1===t.length)return;const n=this.getParentAndIndex(e);if(!n)return;const a=n.parentList[n.index];if(n.parentList.splice(n.index,1),2===t.length){const e=t[0];this.localNavigation.items.splice(e+1,0,a)}else{t.slice(0,-2).join(".");const e=this.getParentAndIndex(t.slice(0,-1).join("."));e&&e.parentList.splice(e.index+1,0,a)}},demoteItem(e){const t=this.getParentAndIndex(e);if(!t||0===t.index)return;const n=t.parentList[t.index],a=t.parentList[t.index-1];a&&(a.children||(a.children=[]),t.parentList.splice(t.index,1),a.children.push(n))},save(){this.$emit("save",this.localNavigation)}}};var Z=n(8807),ee={};ee.styleTagTransform=J(),ee.setAttributes=E(),ee.insert=j().bind(null,"head"),ee.domAPI=z(),ee.insertStyleElement=W(),O()(Z.A,ee),Z.A&&Z.A.locals&&Z.A.locals;const te=(0,G.A)(Y,[["render",function(e,t,n,m,u,v){const g=(0,a.g2)("NcSelect"),h=(0,a.g2)("NcButton"),b=(0,a.g2)("ContentSave"),f=(0,a.g2)("Plus"),x=(0,a.g2)("NavigationItem"),y=(0,a.g2)("draggable"),I=(0,a.g2)("NcModal");return(0,a.uX)(),(0,a.Wv)(I,{onClose:t[3]||(t[3]=t=>e.$emit("close")),name:v.t("Edit Navigation"),size:"large",class:"navigation-editor-modal"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",i,[(0,a.Q3)(" Hidden element to capture autofocus "),t[4]||(t[4]=(0,a.Lk)("input",{type:"text",style:{position:"absolute",opacity:"0","pointer-events":"none"},autofocus:""},null,-1)),(0,a.Q3)(" Actions at top with type selector on left "),(0,a.Lk)("div",o,[(0,a.Lk)("div",r,[(0,a.Lk)("label",null,(0,l.v_)(v.t("Navigation Type:")),1),(0,a.bF)(g,{modelValue:v.selectedType,"onUpdate:modelValue":[t[0]||(t[0]=e=>v.selectedType=e),v.updateType],options:u.typeOptions,placeholder:v.t("Select navigation type"),clearable:!1},null,8,["modelValue","options","placeholder","onUpdate:modelValue"])]),(0,a.Lk)("div",d,[(0,a.bF)(h,{onClick:t[1]||(t[1]=t=>e.$emit("close")),type:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,l.v_)(v.t("Cancel")),1)]),_:1}),(0,a.bF)(h,{onClick:v.save,type:"primary"},{icon:(0,a.k6)(()=>[(0,a.bF)(b,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,l.v_)(v.t("Save Navigation")),1)]),_:1},8,["onClick"])])]),(0,a.Q3)(" Navigation Items "),(0,a.Lk)("div",s,[(0,a.Lk)("div",c,[(0,a.Lk)("h3",null,(0,l.v_)(v.t("Navigation Items")),1),(0,a.bF)(h,{onClick:v.addTopLevelItem,type:"primary"},{icon:(0,a.k6)(()=>[(0,a.bF)(f,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,l.v_)(v.t("Add Item")),1)]),_:1},8,["onClick"])]),0===u.localNavigation.items.length?((0,a.uX)(),(0,a.CE)("div",p,(0,l.v_)(v.t('No navigation items yet. Click "Add Item" to create one.')),1)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Drag and drop list "),(0,a.bF)(y,{modelValue:u.localNavigation.items,"onUpdate:modelValue":t[2]||(t[2]=e=>u.localNavigation.items=e),"item-key":"id",handle:".drag-handle",group:"navigation-items",class:"navigation-list"},{item:(0,a.k6)(({element:e,index:t})=>[(0,a.bF)(x,{item:e,index:t,level:1,"is-first":0===t,"sibling-count":u.localNavigation.items.length,onUpdate:v.updateItem,onDelete:v.deleteItem,onAddChild:v.addChildItem,onPromote:v.promoteItem,onDemote:v.demoteItem},null,8,["item","index","is-first","sibling-count","onUpdate","onDelete","onAddChild","onPromote","onDemote"])]),_:1},8,["modelValue"])])])]),_:1},8,["name"])}],["__scopeId","data-v-15df6a30"]])},8807:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(1601),l=n.n(a),i=n(6314),o=n.n(i)()(l());o.push([e.id,"\n.navigation-editor[data-v-15df6a30] {\n  padding: 16px;\n  max-height: 70vh;\n  overflow-y: auto;\n}\n.editor-section[data-v-15df6a30] {\n  margin-bottom: 12px;\n}\n.editor-section label[data-v-15df6a30] {\n  display: block;\n  font-weight: 600;\n  margin-bottom: 6px;\n  color: var(--color-main-text);\n}\n.section-header[data-v-15df6a30] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.section-header h3[data-v-15df6a30] {\n  margin: 0;\n  font-size: 15px;\n  font-weight: 600;\n}\n.empty-state[data-v-15df6a30] {\n  padding: 40px;\n  text-align: center;\n  color: var(--color-text-maxcontrast);\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius);\n  border: 2px dashed var(--color-border);\n}\n.navigation-list[data-v-15df6a30] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.modal-actions-top[data-v-15df6a30] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 16px;\n  border-bottom: 1px solid var(--color-border);\n  margin-bottom: 16px;\n}\n.type-selector-left[data-v-15df6a30] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.type-selector-left label[data-v-15df6a30] {\n  font-weight: 600;\n  color: var(--color-main-text);\n  white-space: nowrap;\n}\n.action-buttons[data-v-15df6a30] {\n  display: flex;\n  gap: 8px;\n}\n",""]);const r=o}}]);