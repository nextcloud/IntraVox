"use strict";(self.webpackChunknextcloud_intravox=self.webpackChunknextcloud_intravox||[]).push([[783],{3783:(e,t,n)=>{n.r(t),n.d(t,{default:()=>De});var a=n(20641),l=n(90033);const i={class:"navigation-editor"},o={class:"modal-actions-top"},r={class:"type-selector-left"},s={class:"action-buttons"},d={class:"editor-section"},c={class:"section-header"},u={key:0,class:"empty-state"};var p=n(53334),h=n(76333),m=n(432),g=n.n(m),v=n(32490),f=n(47054),b=n(53751);const x={class:"item-content"},y={class:"drag-handle"},k={class:"item-details"},I=["placeholder"],C={class:"item-link-options"},w={class:"or-separator"},N={class:"url-section"},P=["placeholder"],A=["aria-label"],T={class:"item-actions"};var L=n(19445),S=n(80863),Q=n(75754),F=n(72686),D=n(45602);const $={class:"page-tree-select",ref:"selectContainer"},_=["disabled"],q={key:0,class:"selected-value"},E={key:0,class:"selected-path"},U={class:"selected-title"},X={key:1,class:"placeholder"},z={key:0,class:"select-dropdown",ref:"dropdown"},O={class:"search-wrapper"},V=["placeholder"],W={class:"tree-wrapper",ref:"treeWrapper"},j={key:0,class:"loading-state"},R={key:1,class:"empty-state"},B={key:2,class:"tree-list"};var J=n(66802),M=n(63814),H=n(97999),K=n(14333),G=n(42896);const Y={class:"tree-select-item"},Z=["aria-label"],ee={key:1,class:"toggle-spacer"},te={class:"item-title"},ne={key:0,class:"children-list"};var ae=n(71187),le=n(66895);const ie={name:"PageTreeSelectItem",components:{ChevronRight:D.A,ChevronDown:H.A,FileDocument:K.A,FolderOutline:ae.A,Check:le.A},props:{item:{type:Object,required:!0},expandedNodes:{type:Set,required:!0},selectedId:{type:String,default:null},focusedId:{type:String,default:null},searchQuery:{type:String,default:""}},emits:["toggle","select","focus"],computed:{hasChildren(){return this.item.children&&this.item.children.length>0},isExpanded(){return this.expandedNodes.has(this.item.uniqueId)},isSelected(){return this.item.uniqueId===this.selectedId},isFocused(){return this.item.uniqueId===this.focusedId}}};var oe=n(85072),re=n.n(oe),se=n(97825),de=n.n(se),ce=n(77659),ue=n.n(ce),pe=n(55056),he=n.n(pe),me=n(10540),ge=n.n(me),ve=n(41113),fe=n.n(ve),be=n(13048),xe={};xe.styleTagTransform=fe(),xe.setAttributes=he(),xe.insert=ue().bind(null,"head"),xe.domAPI=de(),xe.insertStyleElement=ge(),re()(be.A,xe),be.A&&be.A.locals&&be.A.locals;var ye=n(66262);const ke=(0,ye.A)(ie,[["render",function(e,t,n,i,o,r){const s=(0,a.g2)("ChevronRight"),d=(0,a.g2)("ChevronDown"),c=(0,a.g2)("FolderOutline"),u=(0,a.g2)("FileDocument"),p=(0,a.g2)("Check"),h=(0,a.g2)("PageTreeSelectItem",!0);return(0,a.uX)(),(0,a.CE)("li",Y,[(0,a.Lk)("div",{class:(0,l.C4)(["item-row",{"is-selected":r.isSelected,"is-focused":r.isFocused,"matches-search":n.item.matchesSearch}]),onMouseenter:t[2]||(t[2]=t=>e.$emit("focus",n.item.uniqueId))},[(0,a.Q3)(" Expand/collapse toggle "),r.hasChildren?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"expand-toggle",onClick:t[0]||(t[0]=(0,b.D$)(t=>e.$emit("toggle",n.item.uniqueId),["stop"])),"aria-label":r.isExpanded?"Collapse":"Expand"},[r.isExpanded?((0,a.uX)(),(0,a.Wv)(d,{key:1,size:16})):((0,a.uX)(),(0,a.Wv)(s,{key:0,size:16}))],8,Z)):((0,a.uX)(),(0,a.CE)("span",ee)),(0,a.Q3)(" Page item "),(0,a.Lk)("button",{class:"item-content",onClick:t[1]||(t[1]=t=>e.$emit("select",n.item))},[r.hasChildren?((0,a.uX)(),(0,a.Wv)(c,{key:0,size:16,class:"item-icon folder-icon"})):((0,a.uX)(),(0,a.Wv)(u,{key:1,size:16,class:"item-icon"})),(0,a.Lk)("span",te,(0,l.v_)(n.item.title),1),r.isSelected?((0,a.uX)(),(0,a.Wv)(p,{key:2,size:16,class:"check-icon"})):(0,a.Q3)("v-if",!0)])],34),(0,a.Q3)(" Children "),r.hasChildren&&r.isExpanded?((0,a.uX)(),(0,a.CE)("ul",ne,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.item.children,l=>((0,a.uX)(),(0,a.Wv)(h,{key:l.uniqueId,item:l,"expanded-nodes":n.expandedNodes,"selected-id":n.selectedId,"focused-id":n.focusedId,"search-query":n.searchQuery,onToggle:t[3]||(t[3]=t=>e.$emit("toggle",t)),onSelect:t[4]||(t[4]=t=>e.$emit("select",t)),onFocus:t[5]||(t[5]=t=>e.$emit("focus",t))},null,8,["item","expanded-nodes","selected-id","focused-id","search-query"]))),128))])):(0,a.Q3)("v-if",!0)])}],["__scopeId","data-v-31a63743"]]),Ie={name:"PageTreeSelect",components:{NcLoadingIcon:h.ne,ChevronDown:H.A,FileDocument:K.A,Magnify:G.A,Close:Q.A,PageTreeSelectItem:ke},props:{modelValue:{type:String,default:null},placeholder:{type:String,default:"Select a page"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","select"],data:()=>({isOpen:!1,loading:!1,tree:[],expandedNodes:new Set,searchQuery:"",focusedId:null,flatPages:[]}),computed:{selectedPage(){return this.modelValue?this.flatPages.find(e=>e.uniqueId===this.modelValue):null},selectedPath(){return this.selectedPage&&this.selectedPage.path?this.selectedPage.path:null},filteredTree(){if(!this.searchQuery.trim())return this.tree;const e=this.searchQuery.toLowerCase();return this.filterTree(this.tree,e)},focusableItems(){return this.getFlatVisibleItems(this.filteredTree)}},watch:{isOpen(e){e?this.$nextTick(()=>{this.$refs.searchInput?.focus(),this.modelValue&&this.expandPathToItem(this.tree,this.modelValue)}):(this.searchQuery="",this.focusedId=null)}},mounted(){document.addEventListener("click",this.handleClickOutside),this.loadTree()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{t:(e,t={})=>(0,p.Tl)("intravox",e,t),async loadTree(){this.loading=!0;try{const e=await J.Ay.get((0,M.Jv)("/apps/intravox/api/pages/tree"));this.tree=e.data.tree||[],this.flatPages=this.flattenTree(this.tree,""),this.tree.forEach(e=>{e.children&&e.children.length>0&&this.expandedNodes.add(e.uniqueId)})}catch(e){console.error("PageTreeSelect: Error loading tree:",e)}finally{this.loading=!1}},flattenTree(e,t){const n=[];for(const a of e){const e=t;if(n.push({uniqueId:a.uniqueId,title:a.title,path:e,hasChildren:a.children&&a.children.length>0}),a.children&&a.children.length>0){const e=t?`${t} / ${a.title}`:a.title;n.push(...this.flattenTree(a.children,e))}}return n},filterTree(e,t){const n=[];for(const a of e){const e=a.title.toLowerCase().includes(t),l=a.children?this.filterTree(a.children,t):[];(e||l.length>0)&&(n.push({...a,children:l,matchesSearch:e}),l.length>0&&this.expandedNodes.add(a.uniqueId))}return n},getFlatVisibleItems(e){const t=[];for(const n of e)t.push(n),n.children&&n.children.length>0&&this.expandedNodes.has(n.uniqueId)&&t.push(...this.getFlatVisibleItems(n.children));return t},expandPathToItem(e,t){for(const n of e){if(n.uniqueId===t)return!0;if(n.children&&n.children.length>0&&this.expandPathToItem(n.children,t))return this.expandedNodes.add(n.uniqueId),!0}return!1},toggleDropdown(){this.isOpen=!this.isOpen},closeDropdown(){this.isOpen=!1},toggleNode(e){this.expandedNodes.has(e)?this.expandedNodes.delete(e):this.expandedNodes.add(e),this.expandedNodes=new Set(this.expandedNodes)},selectPage(e){this.$emit("update:modelValue",e.uniqueId),this.$emit("select",e),this.closeDropdown()},clearSelection(){this.$emit("update:modelValue",null),this.$emit("select",null),this.closeDropdown()},handleClickOutside(e){this.$refs.selectContainer&&!this.$refs.selectContainer.contains(e.target)&&this.closeDropdown()},focusNext(){const e=this.focusableItems;if(0===e.length)return;const t=e.findIndex(e=>e.uniqueId===this.focusedId),n=t<e.length-1?t+1:0;this.focusedId=e[n].uniqueId,this.scrollToFocused()},focusPrev(){const e=this.focusableItems;if(0===e.length)return;const t=e.findIndex(e=>e.uniqueId===this.focusedId),n=t>0?t-1:e.length-1;this.focusedId=e[n].uniqueId,this.scrollToFocused()},selectFocused(){if(this.focusedId){const e=this.flatPages.find(e=>e.uniqueId===this.focusedId);e&&this.selectPage(e)}},scrollToFocused(){this.$nextTick(()=>{const e=this.$refs.treeWrapper?.querySelector(".is-focused");e&&e.scrollIntoView({block:"nearest"})})}}};var Ce=n(61493),we={};we.styleTagTransform=fe(),we.setAttributes=he(),we.insert=ue().bind(null,"head"),we.domAPI=de(),we.insertStyleElement=ge(),re()(Ce.A,we),Ce.A&&Ce.A.locals&&Ce.A.locals;const Ne=(0,ye.A)(Ie,[["render",function(e,t,n,i,o,r){const s=(0,a.g2)("FileDocument"),d=(0,a.g2)("ChevronDown"),c=(0,a.g2)("Magnify"),u=(0,a.g2)("Close"),p=(0,a.g2)("NcLoadingIcon"),h=(0,a.g2)("PageTreeSelectItem");return(0,a.uX)(),(0,a.CE)("div",$,[(0,a.Q3)(" Selected value / trigger "),(0,a.Lk)("button",{type:"button",class:(0,l.C4)(["select-trigger",{"is-open":o.isOpen,"has-value":r.selectedPage,"is-disabled":n.disabled}]),disabled:n.disabled,onClick:t[0]||(t[0]=(...e)=>r.toggleDropdown&&r.toggleDropdown(...e)),ref:"trigger"},[r.selectedPage?((0,a.uX)(),(0,a.CE)("span",q,[(0,a.bF)(s,{size:16,class:"selected-icon"}),r.selectedPath?((0,a.uX)(),(0,a.CE)("span",E,(0,l.v_)(r.selectedPath)+" /",1)):(0,a.Q3)("v-if",!0),(0,a.Lk)("span",U,(0,l.v_)(r.selectedPage.title),1)])):((0,a.uX)(),(0,a.CE)("span",X,(0,l.v_)(n.placeholder),1)),(0,a.bF)(d,{size:18,class:(0,l.C4)(["trigger-icon",{rotated:o.isOpen}])},null,8,["class"])],10,_),(0,a.Q3)(" Dropdown "),o.isOpen?((0,a.uX)(),(0,a.CE)("div",z,[(0,a.Q3)(" Search input "),(0,a.Lk)("div",O,[(0,a.bF)(c,{size:16,class:"search-icon"}),(0,a.bo)((0,a.Lk)("input",{ref:"searchInput","onUpdate:modelValue":t[1]||(t[1]=e=>o.searchQuery=e),type:"text",class:"search-input",placeholder:r.t("Search pages..."),onKeydown:[t[2]||(t[2]=(0,b.jR)((...e)=>r.closeDropdown&&r.closeDropdown(...e),["escape"])),t[3]||(t[3]=(0,b.jR)((0,b.D$)((...e)=>r.focusNext&&r.focusNext(...e),["prevent"]),["down"])),t[4]||(t[4]=(0,b.jR)((0,b.D$)((...e)=>r.focusPrev&&r.focusPrev(...e),["prevent"]),["up"])),t[5]||(t[5]=(0,b.jR)((0,b.D$)((...e)=>r.selectFocused&&r.selectFocused(...e),["prevent"]),["enter"]))]},null,40,V),[[b.Jo,o.searchQuery]]),o.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"clear-search",onClick:t[6]||(t[6]=e=>o.searchQuery="")},[(0,a.bF)(u,{size:14})])):(0,a.Q3)("v-if",!0)]),(0,a.Q3)(" Tree list "),(0,a.Lk)("div",W,[o.loading?((0,a.uX)(),(0,a.CE)("div",j,[(0,a.bF)(p,{size:24})])):0===r.filteredTree.length?((0,a.uX)(),(0,a.CE)("div",R,(0,l.v_)(o.searchQuery?r.t("No pages found"):r.t("No pages available")),1)):((0,a.uX)(),(0,a.CE)("ul",B,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredTree,e=>((0,a.uX)(),(0,a.Wv)(h,{key:e.uniqueId,item:e,"expanded-nodes":o.expandedNodes,"selected-id":n.modelValue,"focused-id":o.focusedId,"search-query":o.searchQuery,onToggle:r.toggleNode,onSelect:r.selectPage,onFocus:t[7]||(t[7]=e=>o.focusedId=e)},null,8,["item","expanded-nodes","selected-id","focused-id","search-query","onToggle","onSelect"]))),128))]))],512),(0,a.Q3)(" Clear selection "),r.selectedPage&&n.clearable?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"clear-selection",onClick:t[8]||(t[8]=(...e)=>r.clearSelection&&r.clearSelection(...e))},[(0,a.bF)(u,{size:16}),(0,a.eW)(" "+(0,l.v_)(r.t("Clear selection")),1)])):(0,a.Q3)("v-if",!0)],512)):(0,a.Q3)("v-if",!0)],512)}],["__scopeId","data-v-312268b0"]]),Pe={name:"NavigationItem",components:{NcButton:h.x1,NcSelect:h.EQ,draggable:g(),DragVertical:L.A,Plus:v.A,Delete:S.A,Close:Q.A,ChevronLeft:F.A,ChevronRight:D.A,PageTreeSelect:Ne},props:{item:{type:Object,required:!0},index:{type:Number,required:!0},level:{type:Number,default:1},parentPath:{type:String,default:""},isFirst:{type:Boolean,default:!1},siblingCount:{type:Number,default:1}},emits:["update","delete","add-child","promote","demote"],data(){return{localItem:JSON.parse(JSON.stringify(this.item)),targetOptions:[{value:"_self",label:(0,p.Tl)("intravox","Same tab")},{value:"_blank",label:(0,p.Tl)("intravox","New tab")}]}},computed:{itemPath(){return this.parentPath?`${this.parentPath}.${this.index}`:`${this.index}`},selectedTarget(){const e=this.localItem.target||"_self";return this.targetOptions.find(t=>t.value===e)},canPromote(){return this.level>1},canDemote(){return!this.isFirst&&this.level<3}},watch:{item:{deep:!0,handler(e){this.localItem=JSON.parse(JSON.stringify(e))}}},methods:{t:(e,t={})=>(0,p.Tl)("intravox",e,t),emitUpdate(){this.$emit("update",this.itemPath,this.localItem)},updatePageLink(e){if(e){this.localItem.uniqueId=e.uniqueId,this.localItem.url=null;const t=this.localItem.title?.trim()||"";(""===t||t===this.t("New Item"))&&(this.localItem.title=e.title)}else this.localItem.uniqueId=null;this.emitUpdate()},updateTarget(e){this.localItem.target=e?e.value:"_self",this.emitUpdate()},onUrlInput(){this.localItem.url&&this.localItem.url.trim()&&(this.localItem.uniqueId=null),this.emitUpdate()},clearUrl(){this.localItem.url=null,this.localItem.target="_self",this.emitUpdate()},onChildrenChange(){this.emitUpdate()}}};var Ae=n(34378),Te={};Te.styleTagTransform=fe(),Te.setAttributes=he(),Te.insert=ue().bind(null,"head"),Te.domAPI=de(),Te.insertStyleElement=ge(),re()(Ae.A,Te),Ae.A&&Ae.A.locals&&Ae.A.locals;const Le=(0,ye.A)(Pe,[["render",function(e,t,n,i,o,r){const s=(0,a.g2)("DragVertical"),d=(0,a.g2)("PageTreeSelect"),c=(0,a.g2)("Close"),u=(0,a.g2)("NcSelect"),p=(0,a.g2)("ChevronLeft"),h=(0,a.g2)("NcButton"),m=(0,a.g2)("ChevronRight"),g=(0,a.g2)("Plus"),v=(0,a.g2)("Delete"),f=(0,a.g2)("NavigationItem",!0),L=(0,a.g2)("draggable");return(0,a.uX)(),(0,a.CE)("div",{class:(0,l.C4)(["navigation-item",`level-${n.level}`])},[(0,a.Lk)("div",x,[(0,a.Q3)(" Drag Handle "),(0,a.Lk)("div",y,[(0,a.bF)(s,{size:20})]),(0,a.Q3)(" Item Details "),(0,a.Lk)("div",k,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.localItem.title=e),type:"text",class:"item-title-input",placeholder:r.t("Item title"),onInput:t[1]||(t[1]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,I),[[b.Jo,o.localItem.title]]),(0,a.Lk)("div",C,[(0,a.Q3)(" Link to Page (disabled when URL is set) "),(0,a.bF)(d,{"model-value":o.localItem.uniqueId,placeholder:r.t("Link to page"),disabled:!!o.localItem.url,onSelect:r.updatePageLink,class:(0,l.C4)(["link-selector",{"is-disabled":!!o.localItem.url}])},null,8,["model-value","placeholder","disabled","onSelect","class"]),(0,a.Q3)(" OR Custom URL "),(0,a.Lk)("span",w,(0,l.v_)(r.t("or")),1),(0,a.Lk)("div",N,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.localItem.url=e),type:"url",class:(0,l.C4)(["url-input",{"has-value":!!o.localItem.url}]),placeholder:r.t("Custom URL"),onInput:t[3]||(t[3]=(...e)=>r.onUrlInput&&r.onUrlInput(...e))},null,42,P),[[b.Jo,o.localItem.url]]),(0,a.Q3)(" Clear URL button "),o.localItem.url?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"clear-url-btn",onClick:t[4]||(t[4]=(...e)=>r.clearUrl&&r.clearUrl(...e)),"aria-label":r.t("Clear URL")},[(0,a.bF)(c,{size:16})],8,A)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Target selector (for URLs) "),o.localItem.url?((0,a.uX)(),(0,a.Wv)(u,{key:1,"model-value":r.selectedTarget,options:o.targetOptions,"onUpdate:modelValue":r.updateTarget,class:"target-selector"},null,8,["model-value","options","onUpdate:modelValue"])):(0,a.Q3)("v-if",!0)])])]),(0,a.Q3)(" Actions "),(0,a.Lk)("div",T,[(0,a.Q3)(" Promote: move item up one level (to parent's level) "),r.canPromote?((0,a.uX)(),(0,a.Wv)(h,{key:0,onClick:t[5]||(t[5]=t=>e.$emit("promote",r.itemPath)),type:"tertiary","aria-label":r.t("Promote (move up one level)")},{icon:(0,a.k6)(()=>[(0,a.bF)(p,{size:20})]),_:1},8,["aria-label"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Demote: make item a child of the item above "),r.canDemote?((0,a.uX)(),(0,a.Wv)(h,{key:1,onClick:t[6]||(t[6]=t=>e.$emit("demote",r.itemPath)),type:"tertiary","aria-label":r.t("Demote (make child of item above)")},{icon:(0,a.k6)(()=>[(0,a.bF)(m,{size:20})]),_:1},8,["aria-label"])):(0,a.Q3)("v-if",!0),n.level<3?((0,a.uX)(),(0,a.Wv)(h,{key:2,onClick:t[7]||(t[7]=t=>e.$emit("add-child",r.itemPath)),type:"tertiary","aria-label":r.t("Add sub-item")},{icon:(0,a.k6)(()=>[(0,a.bF)(g,{size:20})]),_:1},8,["aria-label"])):(0,a.Q3)("v-if",!0),(0,a.bF)(h,{onClick:t[8]||(t[8]=t=>e.$emit("delete",r.itemPath)),type:"error","aria-label":r.t("Delete item")},{icon:(0,a.k6)(()=>[(0,a.bF)(v,{size:20})]),_:1},8,["aria-label"])])]),(0,a.Q3)(" Children (recursive) "),o.localItem.children&&o.localItem.children.length>0?((0,a.uX)(),(0,a.Wv)(L,{key:0,modelValue:o.localItem.children,"onUpdate:modelValue":t[14]||(t[14]=e=>o.localItem.children=e),"item-key":"id",handle:".drag-handle",group:"navigation-items",onChange:r.onChildrenChange,class:"children-list"},{item:(0,a.k6)(({element:l,index:i})=>[(0,a.bF)(f,{item:l,index:i,level:n.level+1,"parent-path":r.itemPath,"is-first":0===i,"sibling-count":o.localItem.children.length,onUpdate:t[9]||(t[9]=(t,n)=>e.$emit("update",t,n)),onDelete:t[10]||(t[10]=t=>e.$emit("delete",t)),onAddChild:t[11]||(t[11]=t=>e.$emit("add-child",t)),onPromote:t[12]||(t[12]=t=>e.$emit("promote",t)),onDemote:t[13]||(t[13]=t=>e.$emit("demote",t))},null,8,["item","index","level","parent-path","is-first","sibling-count"])]),_:1},8,["modelValue","onChange"])):(0,a.Q3)("v-if",!0)],2)}],["__scopeId","data-v-125cf95b"]]),Se={name:"NavigationEditor",components:{NcModal:h.FH,NcButton:h.x1,NcSelect:h.EQ,draggable:g(),Plus:v.A,ContentSave:f.A,NavigationItem:Le},props:{navigation:{type:Object,required:!0}},emits:["close","save"],data(){return{localNavigation:JSON.parse(JSON.stringify(this.navigation)),typeOptions:[{value:"dropdown",label:(0,p.Tl)("intravox","Dropdown (Cascading)")},{value:"megamenu",label:(0,p.Tl)("intravox","Mega Menu")}]}},computed:{selectedType(){const e=this.localNavigation.type||"dropdown";return this.typeOptions.find(t=>t.value===e)}},methods:{t:(e,t={})=>(0,p.Tl)("intravox",e,t),updateType(e){e&&(this.localNavigation.type=e.value)},addTopLevelItem(){this.localNavigation.items.push({id:`nav_${Date.now()}`,title:(0,p.Tl)("intravox","New Item"),uniqueId:null,url:null,children:[]})},addChildItem(e){const t=this.getItemByPath(e);t&&t.children.length<10&&t.children.push({id:`nav_${Date.now()}`,title:(0,p.Tl)("intravox","New Item"),uniqueId:null,url:null,children:[]})},updateItem(e,t){const n=this.getItemByPath(e);n&&Object.assign(n,t)},deleteItem(e){const t=e.split(".");if(1===t.length){const e=parseInt(t[0]);this.localNavigation.items.splice(e,1)}else{const e=t.slice(0,-1).join("."),n=this.getItemByPath(e),a=parseInt(t[t.length-1]);n&&n.children&&n.children.splice(a,1)}},getItemByPath(e){const t=e.split(".").map(e=>parseInt(e));let n=this.localNavigation.items[t[0]];for(let e=1;e<t.length;e++){if(!n||!n.children)return null;n=n.children[t[e]]}return n},getParentAndIndex(e){const t=e.split(".").map(e=>parseInt(e));if(1===t.length)return{parent:null,parentList:this.localNavigation.items,index:t[0]};const n=t.slice(0,-1);let a=this.localNavigation.items[n[0]];for(let e=1;e<n.length;e++){if(!a||!a.children)return null;a=a.children[n[e]]}return{parent:a,parentList:a.children,index:t[t.length-1]}},promoteItem(e){const t=e.split(".").map(e=>parseInt(e));if(1===t.length)return;const n=this.getParentAndIndex(e);if(!n)return;const a=n.parentList[n.index];if(n.parentList.splice(n.index,1),2===t.length){const e=t[0];this.localNavigation.items.splice(e+1,0,a)}else{t.slice(0,-2).join(".");const e=this.getParentAndIndex(t.slice(0,-1).join("."));e&&e.parentList.splice(e.index+1,0,a)}},demoteItem(e){const t=this.getParentAndIndex(e);if(!t||0===t.index)return;const n=t.parentList[t.index],a=t.parentList[t.index-1];a&&(a.children||(a.children=[]),t.parentList.splice(t.index,1),a.children.push(n))},save(){this.$emit("save",this.localNavigation)}}};var Qe=n(18807),Fe={};Fe.styleTagTransform=fe(),Fe.setAttributes=he(),Fe.insert=ue().bind(null,"head"),Fe.domAPI=de(),Fe.insertStyleElement=ge(),re()(Qe.A,Fe),Qe.A&&Qe.A.locals&&Qe.A.locals;const De=(0,ye.A)(Se,[["render",function(e,t,n,p,h,m){const g=(0,a.g2)("NcSelect"),v=(0,a.g2)("NcButton"),f=(0,a.g2)("ContentSave"),b=(0,a.g2)("Plus"),x=(0,a.g2)("NavigationItem"),y=(0,a.g2)("draggable"),k=(0,a.g2)("NcModal");return(0,a.uX)(),(0,a.Wv)(k,{onClose:t[3]||(t[3]=t=>e.$emit("close")),name:m.t("Edit Navigation"),size:"large",class:"navigation-editor-modal"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",i,[(0,a.Q3)(" Hidden element to capture autofocus "),t[4]||(t[4]=(0,a.Lk)("input",{type:"text",style:{position:"absolute",opacity:"0","pointer-events":"none"},autofocus:""},null,-1)),(0,a.Q3)(" Actions at top with type selector on left "),(0,a.Lk)("div",o,[(0,a.Lk)("div",r,[(0,a.Lk)("label",null,(0,l.v_)(m.t("Navigation Type:")),1),(0,a.bF)(g,{modelValue:m.selectedType,"onUpdate:modelValue":[t[0]||(t[0]=e=>m.selectedType=e),m.updateType],options:h.typeOptions,placeholder:m.t("Select navigation type"),clearable:!1},null,8,["modelValue","options","placeholder","onUpdate:modelValue"])]),(0,a.Lk)("div",s,[(0,a.bF)(v,{onClick:t[1]||(t[1]=t=>e.$emit("close")),type:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,l.v_)(m.t("Cancel")),1)]),_:1}),(0,a.bF)(v,{onClick:m.save,type:"primary"},{icon:(0,a.k6)(()=>[(0,a.bF)(f,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,l.v_)(m.t("Save Navigation")),1)]),_:1},8,["onClick"])])]),(0,a.Q3)(" Navigation Items "),(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[(0,a.Lk)("h3",null,(0,l.v_)(m.t("Navigation Items")),1),(0,a.bF)(v,{onClick:m.addTopLevelItem,type:"primary"},{icon:(0,a.k6)(()=>[(0,a.bF)(b,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,l.v_)(m.t("Add Item")),1)]),_:1},8,["onClick"])]),0===h.localNavigation.items.length?((0,a.uX)(),(0,a.CE)("div",u,(0,l.v_)(m.t('No navigation items yet. Click "Add Item" to create one.')),1)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Drag and drop list "),(0,a.bF)(y,{modelValue:h.localNavigation.items,"onUpdate:modelValue":t[2]||(t[2]=e=>h.localNavigation.items=e),"item-key":"id",handle:".drag-handle",group:"navigation-items",class:"navigation-list"},{item:(0,a.k6)(({element:e,index:t})=>[(0,a.bF)(x,{item:e,index:t,level:1,"is-first":0===t,"sibling-count":h.localNavigation.items.length,onUpdate:m.updateItem,onDelete:m.deleteItem,onAddChild:m.addChildItem,onPromote:m.promoteItem,onDemote:m.demoteItem},null,8,["item","index","is-first","sibling-count","onUpdate","onDelete","onAddChild","onPromote","onDemote"])]),_:1},8,["modelValue"])])])]),_:1},8,["name"])}],["__scopeId","data-v-15df6a30"]])},13048:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(31601),l=n.n(a),i=n(76314),o=n.n(i)()(l());o.push([e.id,"\n.tree-select-item[data-v-31a63743] {\n  list-style: none;\n}\n.item-row[data-v-31a63743] {\n  display: flex;\n  align-items: center;\n  border-radius: 4px;\n  margin: 1px 0;\n}\n.item-row[data-v-31a63743]:hover {\n  background: var(--color-background-hover);\n}\n.item-row.is-focused[data-v-31a63743] {\n  background: var(--color-background-hover);\n  outline: 2px solid var(--color-primary-element);\n  outline-offset: -2px;\n}\n.item-row.is-selected[data-v-31a63743] {\n  background: var(--color-primary-element-light);\n}\n.item-row.matches-search .item-title[data-v-31a63743] {\n  font-weight: 600;\n}\n.expand-toggle[data-v-31a63743] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 22px;\n  height: 22px;\n  padding: 0;\n  margin: 0;\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: var(--color-text-maxcontrast);\n  border-radius: 4px;\n  flex-shrink: 0;\n}\n.expand-toggle[data-v-31a63743]:hover {\n  background: var(--color-background-dark);\n  color: var(--color-main-text);\n}\n.toggle-spacer[data-v-31a63743] {\n  width: 22px;\n  flex-shrink: 0;\n}\n.item-content[data-v-31a63743] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex: 1;\n  padding: 5px 8px 5px 4px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  text-align: left;\n  color: var(--color-main-text);\n  font-size: 13px;\n  min-width: 0;\n}\n.item-icon[data-v-31a63743] {\n  flex-shrink: 0;\n  color: var(--color-text-maxcontrast);\n}\n.item-icon.folder-icon[data-v-31a63743] {\n  color: var(--color-primary-element);\n}\n.item-title[data-v-31a63743] {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.check-icon[data-v-31a63743] {\n  flex-shrink: 0;\n  color: var(--color-primary-element);\n}\n.children-list[data-v-31a63743] {\n  list-style: none;\n  margin: 0;\n  padding: 0 0 0 22px;\n}\n",""]);const r=o},18807:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(31601),l=n.n(a),i=n(76314),o=n.n(i)()(l());o.push([e.id,"\n.navigation-editor[data-v-15df6a30] {\n  padding: 16px;\n  max-height: 70vh;\n  overflow-y: auto;\n}\n.editor-section[data-v-15df6a30] {\n  margin-bottom: 12px;\n}\n.editor-section label[data-v-15df6a30] {\n  display: block;\n  font-weight: 600;\n  margin-bottom: 6px;\n  color: var(--color-main-text);\n}\n.section-header[data-v-15df6a30] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.section-header h3[data-v-15df6a30] {\n  margin: 0;\n  font-size: 15px;\n  font-weight: 600;\n}\n.empty-state[data-v-15df6a30] {\n  padding: 40px;\n  text-align: center;\n  color: var(--color-text-maxcontrast);\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius);\n  border: 2px dashed var(--color-border);\n}\n.navigation-list[data-v-15df6a30] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.modal-actions-top[data-v-15df6a30] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 16px;\n  border-bottom: 1px solid var(--color-border);\n  margin-bottom: 16px;\n}\n.type-selector-left[data-v-15df6a30] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.type-selector-left label[data-v-15df6a30] {\n  font-weight: 600;\n  color: var(--color-main-text);\n  white-space: nowrap;\n}\n.action-buttons[data-v-15df6a30] {\n  display: flex;\n  gap: 8px;\n}\n",""]);const r=o},34378:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(31601),l=n.n(a),i=n(76314),o=n.n(i)()(l());o.push([e.id,"\n.navigation-item[data-v-125cf95b] {\n  background: var(--color-main-background);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  padding: 8px;\n}\n.navigation-item.level-2[data-v-125cf95b],\n.navigation-item.level-3[data-v-125cf95b] {\n  margin-left: 24px;\n  margin-top: 6px;\n}\n.item-content[data-v-125cf95b] {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n}\n.drag-handle[data-v-125cf95b] {\n  cursor: grab;\n  color: var(--color-text-maxcontrast);\n  padding: 2px;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n.drag-handle[data-v-125cf95b]:active {\n  cursor: grabbing;\n}\n.item-details[data-v-125cf95b] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.item-title-input[data-v-125cf95b] {\n  width: 100%;\n  padding: 6px 10px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n  font-weight: 500;\n}\n.item-link-options[data-v-125cf95b] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.link-selector[data-v-125cf95b] {\n  flex: 1;\n  min-width: 180px;\n}\n.link-selector.is-disabled[data-v-125cf95b] {\n  opacity: 0.5;\n  pointer-events: none;\n}\n.or-separator[data-v-125cf95b] {\n  color: var(--color-text-maxcontrast);\n  font-size: 11px;\n  text-transform: uppercase;\n}\n.url-section[data-v-125cf95b] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex: 1;\n}\n.url-input[data-v-125cf95b] {\n  flex: 1;\n  padding: 6px 10px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n}\n.url-input.has-value[data-v-125cf95b] {\n  border-color: var(--color-primary-element);\n  background: var(--color-primary-element-light);\n}\n.clear-url-btn[data-v-125cf95b] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  padding: 0;\n  border: none;\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  color: var(--color-text-maxcontrast);\n  flex-shrink: 0;\n}\n.clear-url-btn[data-v-125cf95b]:hover {\n  background: var(--color-error);\n  color: white;\n}\n.target-selector[data-v-125cf95b] {\n  min-width: 120px;\n  flex-shrink: 0;\n}\n.item-actions[data-v-125cf95b] {\n  display: flex;\n  gap: 2px;\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n.children-list[data-v-125cf95b] {\n  margin-top: 6px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n",""]);const r=o},61493:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(31601),l=n.n(a),i=n(76314),o=n.n(i)()(l());o.push([e.id,"\n.page-tree-select[data-v-312268b0] {\n  position: relative;\n  width: 100%;\n}\n.select-trigger[data-v-312268b0] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 6px 10px;\n  background: var(--color-main-background);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  text-align: left;\n  font-size: 13px;\n  min-height: 34px;\n  gap: 8px;\n}\n.select-trigger[data-v-312268b0]:hover:not(:disabled) {\n  border-color: var(--color-primary-element);\n}\n.select-trigger.is-disabled[data-v-312268b0] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: var(--color-background-dark);\n}\n.select-trigger.is-open[data-v-312268b0] {\n  border-color: var(--color-primary-element);\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.selected-value[data-v-312268b0] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n}\n.selected-icon[data-v-312268b0] {\n  flex-shrink: 0;\n  color: var(--color-primary-element);\n}\n.selected-path[data-v-312268b0] {\n  color: var(--color-text-maxcontrast);\n  font-size: 12px;\n  white-space: nowrap;\n}\n.selected-title[data-v-312268b0] {\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.placeholder[data-v-312268b0] {\n  color: var(--color-text-maxcontrast);\n}\n.trigger-icon[data-v-312268b0] {\n  flex-shrink: 0;\n  color: var(--color-text-maxcontrast);\n  transition: transform 0.2s;\n}\n.trigger-icon.rotated[data-v-312268b0] {\n  transform: rotate(180deg);\n}\n.select-dropdown[data-v-312268b0] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: var(--color-main-background);\n  border: 1px solid var(--color-primary-element);\n  border-top: none;\n  border-radius: 0 0 var(--border-radius) var(--border-radius);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  max-height: 350px;\n  display: flex;\n  flex-direction: column;\n}\n.search-wrapper[data-v-312268b0] {\n  display: flex;\n  align-items: center;\n  padding: 8px;\n  border-bottom: 1px solid var(--color-border);\n  gap: 8px;\n}\n.search-icon[data-v-312268b0] {\n  flex-shrink: 0;\n  color: var(--color-text-maxcontrast);\n}\n.search-input[data-v-312268b0] {\n  flex: 1;\n  border: none;\n  background: none;\n  font-size: 13px;\n  outline: none;\n  padding: 4px 0;\n}\n.search-input[data-v-312268b0]::placeholder {\n  color: var(--color-text-maxcontrast);\n}\n.clear-search[data-v-312268b0] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  border: none;\n  background: var(--color-background-dark);\n  border-radius: 50%;\n  cursor: pointer;\n  color: var(--color-text-maxcontrast);\n}\n.clear-search[data-v-312268b0]:hover {\n  background: var(--color-error);\n  color: white;\n}\n.tree-wrapper[data-v-312268b0] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n  max-height: 250px;\n}\n.loading-state[data-v-312268b0],\n.empty-state[data-v-312268b0] {\n  padding: 20px;\n  text-align: center;\n  color: var(--color-text-maxcontrast);\n}\n.tree-list[data-v-312268b0] {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.clear-selection[data-v-312268b0] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 8px;\n  border: none;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-background-dark);\n  cursor: pointer;\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n}\n.clear-selection[data-v-312268b0]:hover {\n  background: var(--color-error-hover);\n  color: var(--color-error);\n}\n",""]);const r=o}}]);