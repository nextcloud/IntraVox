"use strict";(self.webpackChunknextcloud_intravox=self.webpackChunknextcloud_intravox||[]).push([[904],{2992:(e,t,i)=>{i.d(t,{A:()=>r});var o=i(1601),a=i.n(o),n=i(6314),l=i.n(n)()(a());l.push([e.id,"\n.page-editor-wrapper[data-v-f22ccb22] {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n.page-editor-container[data-v-f22ccb22] {\n  display: flex;\n  gap: 16px;\n  width: 100%;\n}\n.page-editor[data-v-f22ccb22] {\n  flex: 1;\n  min-width: 0;\n  width: 100%;\n}\n\n/* Header Row Editor Styles */\n.header-row-editor[data-v-f22ccb22] {\n  width: 100%;\n  padding: 16px;\n  margin-bottom: 16px;\n  border: 2px dashed var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background-color: var(--color-background-dark);\n  box-sizing: border-box;\n}\n.header-row-header[data-v-f22ccb22] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--color-border);\n}\n.header-row-title[data-v-f22ccb22] {\n  font-weight: 600;\n  font-size: 14px;\n}\n.header-row-actions[data-v-f22ccb22] {\n  display: flex;\n  gap: 4px;\n}\n.header-row-widgets[data-v-f22ccb22] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.header-widget-drop-zone[data-v-f22ccb22] {\n  min-height: 80px;\n}\n.add-header-row-container[data-v-f22ccb22] {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius-large);\n}\n.add-header-row-btn[data-v-f22ccb22] {\n  width: auto;\n}\n\n/* Side Column Editor Styles */\n.side-column-editor[data-v-f22ccb22] {\n  flex-shrink: 0;\n  width: 280px;\n  min-width: 250px;\n  max-width: 320px;\n  padding: 16px;\n  border: 2px dashed var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background-color: var(--color-background-dark);\n  box-sizing: border-box;\n  align-self: flex-start;\n}\n.side-column-header[data-v-f22ccb22] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--color-border);\n}\n.side-column-title[data-v-f22ccb22] {\n  font-weight: 600;\n  font-size: 14px;\n}\n.side-column-actions[data-v-f22ccb22] {\n  display: flex;\n  gap: 4px;\n}\n.side-column-widgets[data-v-f22ccb22] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.side-widget-drop-zone[data-v-f22ccb22] {\n  min-height: 80px;\n}\n.side-column-buttons[data-v-f22ccb22] {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius-large);\n}\n\n/* Mobile responsive */\n@media (max-width: 768px) {\n.page-editor-container[data-v-f22ccb22] {\n    flex-direction: column;\n}\n.side-column-editor[data-v-f22ccb22] {\n    width: 100%;\n    min-width: 100%;\n    max-width: 100%;\n    order: 1;\n}\n.side-column-left[data-v-f22ccb22] {\n    order: -1;\n}\n.page-editor[data-v-f22ccb22] {\n    order: 0;\n}\n.side-column-buttons[data-v-f22ccb22] {\n    flex-direction: column;\n}\n}\n.editor-toolbar[data-v-f22ccb22] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius-large);\n  margin-bottom: 20px;\n}\n.toolbar-group[data-v-f22ccb22] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.toolbar-group label[data-v-f22ccb22] {\n  font-weight: bold;\n  margin-right: 5px;\n}\n.column-button[data-v-f22ccb22] {\n  width: 35px;\n  height: 35px;\n  border: 2px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  cursor: pointer;\n  font-weight: bold;\n}\n.column-button[data-v-f22ccb22]:hover {\n  background: var(--color-background-hover);\n}\n.column-button.active[data-v-f22ccb22] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.column-button.small[data-v-f22ccb22] {\n  width: 28px;\n  height: 28px;\n  font-size: 12px;\n}\n.insert-row-container[data-v-f22ccb22] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 8px 0;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n.insert-row-container[data-v-f22ccb22]:hover {\n  opacity: 1;\n}\n.insert-row-btn[data-v-f22ccb22] {\n  font-size: 13px;\n}\n.page-row[data-v-f22ccb22] {\n  margin-bottom: 12px;\n  position: relative;\n  padding: 16px;\n  border: 2px dashed transparent;\n  border-radius: var(--border-radius-large);\n}\n.page-row.editable[data-v-f22ccb22] {\n  border-color: var(--color-border);\n}\n.row-controls[data-v-f22ccb22] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  padding: 8px;\n  background: transparent;\n  border-radius: var(--border-radius-large);\n  border: 1px solid var(--color-border);\n}\n.page-grid[data-v-f22ccb22] {\n  display: grid;\n  gap: 12px;\n  width: 100%;\n}\n.page-column[data-v-f22ccb22] {\n  min-height: 100px;\n  padding: 10px;\n  border: 2px dashed var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: transparent;\n  position: relative;\n}\n.column-label[data-v-f22ccb22] {\n  position: absolute;\n  top: -10px;\n  left: 10px;\n  background: transparent;\n  padding: 2px 8px;\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n  border-radius: var(--border-radius-large);\n}\n.widget-drop-zone[data-v-f22ccb22] {\n  min-height: 80px;\n  transition: background-color 0.2s;\n}\n.page-column.droppable[data-v-f22ccb22] {\n  transition: all 0.2s;\n}\n.page-column.droppable[data-v-f22ccb22]:hover {\n  border-color: var(--color-primary);\n  background: transparent;\n}\n.widget-wrapper[data-v-f22ccb22] {\n  position: relative;\n  margin-bottom: 15px;\n  padding: 10px;\n  border: 1px solid transparent;\n  border-radius: var(--border-radius-large);\n  background: transparent;\n  transition: border-color 0.2s ease;\n}\n.widget-wrapper[data-v-f22ccb22]:hover {\n  border-color: var(--color-border);\n}\n\n/* Divider widget in edit mode - no padding or border */\n.widget-wrapper[data-v-f22ccb22]:has(.widget-divider) {\n  padding: 0;\n  border: none;\n  background: transparent;\n  margin-bottom: 15px;\n}\n\n/* Floating toolbar - Medium/Notion style */\n.floating-toolbar[data-v-f22ccb22] {\n  position: absolute;\n  top: -36px; /* Float above widget */\n  right: 0;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px;\n  background: var(--color-main-background);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  z-index: 1001;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.2s ease;\n}\n.widget-wrapper:hover .floating-toolbar[data-v-f22ccb22] {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n/* Hide toolbar when editing */\n.widget-wrapper.editing .floating-toolbar[data-v-f22ccb22] {\n  opacity: 0 !important;\n  pointer-events: none !important;\n}\n\n/* Divider widgets - show toolbar below instead of above */\n.widget-wrapper:has(.widget-divider) .floating-toolbar[data-v-f22ccb22] {\n  top: auto;\n  bottom: -36px;\n}\n\n/* Drag handle in floating toolbar */\n.floating-toolbar .drag-handle[data-v-f22ccb22] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 6px 8px;\n  background: transparent;\n  border: none;\n  border-radius: var(--border-radius);\n  cursor: grab;\n  color: var(--color-text-maxcontrast);\n  transition: all 0.15s ease;\n}\n.floating-toolbar .drag-handle[data-v-f22ccb22]:hover {\n  background: var(--color-background-hover);\n  color: var(--color-main-text);\n}\n.floating-toolbar .drag-handle[data-v-f22ccb22]:active {\n  cursor: grabbing;\n  background: var(--color-primary-element-light);\n}\n\n/* Compact buttons in toolbar */\n.floating-toolbar[data-v-f22ccb22] .button-vue {\n  min-height: 28px !important;\n  min-width: 28px !important;\n}\n.floating-toolbar[data-v-f22ccb22] .button-vue__icon {\n  height: 16px !important;\n  width: 16px !important;\n}\n.column-add-widget[data-v-f22ccb22] {\n  margin-top: 10px;\n  text-align: center;\n  padding-top: 10px;\n  border-top: 1px dashed var(--color-border);\n}\n.column-add-widget .add-widget-btn[data-v-f22ccb22] {\n  width: 100%;\n}\n.color-preview[data-v-f22ccb22] {\n  width: 20px;\n  height: 20px;\n  border-radius: var(--border-radius-large);\n  border: 1px solid var(--color-border);\n}\n",""]);const r=l},3904:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ko});var o=i(641),a=i(33);const n={class:"page-editor-wrapper"},l={class:"header-row-header"},r={class:"header-row-title"},d={class:"header-row-actions"},s={class:"header-row-widgets"},c={class:"widget-wrapper"},g={class:"floating-toolbar"},u=["aria-label"],p={key:1,class:"add-header-row-container"},h={class:"page-editor-container"},m={class:"side-column-header"},b={class:"side-column-title"},v={class:"side-column-actions"},k={class:"side-column-widgets"},w={class:"widget-wrapper"},f={class:"floating-toolbar"},y=["aria-label"],x={class:"page-editor"},C={class:"side-column-buttons"},W={class:"row-controls"},L={style:{"margin-right":"8px"}},P=["onClick"],_={class:"column-label"},A={class:"floating-toolbar"},z=["aria-label"],R={class:"column-add-widget"},S={class:"insert-row-container"},E={class:"side-column-header"},U={class:"side-column-title"},T={class:"side-column-actions"},F={class:"side-column-widgets"},I={class:"widget-wrapper"},D={class:"floating-toolbar"},V=["aria-label"];var $=i(432),B=i.n($),H=i(3334),Q=i(5873),X=i(2490),M=i(5748),N=i(2955),O=i(4911),j=i(8464),J=i(7444),K=i(863),G=i(4086),Z=i(1243),q=i(9445),Y=i(6580);const ee={class:"widget-picker-content"},te={class:"widget-types"},ie=["onClick"],oe={class:"widget-info"};var ae=i(7266),ne=i(8613),le=i(9158),re=i(4504),de=i(8429),se=i(5857);const ce={name:"WidgetPicker",components:{NcModal:Q.FH,Text:ae.A,FormatTitle:ne.A,Image:le.A,Minus:re.A,ViewGrid:de.A,Video:se.A},emits:["close","select"],computed:{modalTitle(){return this.$t("Add widget")},widgetTypes(){return[{type:"text",name:this.$t("Text"),icon:"text",description:this.$t("Add text to your page")},{type:"heading",name:this.$t("Heading"),icon:"format-title",description:this.$t("Add a heading")},{type:"image",name:this.$t("Image"),icon:"image",description:this.$t("Add an image")},{type:"divider",name:this.$t("Divider"),icon:"minus",description:this.$t("Add a horizontal line")},{type:"links",name:this.$t("Links"),icon:"view-grid",description:this.$t("Add a grid of links with icons")},{type:"video",name:this.$t("Video"),icon:"video",description:this.$t("Add a PeerTube or local video")}]}},methods:{getIconComponent:e=>({text:"Text","format-title":"FormatTitle",image:"Image",minus:"Minus","view-grid":"ViewGrid",video:"Video"}[e]||"Text")}};var ge=i(5072),ue=i.n(ge),pe=i(7825),he=i.n(pe),me=i(7659),be=i.n(me),ve=i(5056),ke=i.n(ve),we=i(540),fe=i.n(we),ye=i(1113),xe=i.n(ye),Ce=i(8294),We={};We.styleTagTransform=xe(),We.setAttributes=ke(),We.insert=be().bind(null,"head"),We.domAPI=he(),We.insertStyleElement=fe(),ue()(Ce.A,We),Ce.A&&Ce.A.locals&&Ce.A.locals;var Le=i(6262);const Pe=(0,Le.A)(ce,[["render",function(e,t,i,n,l,r){const d=(0,o.g2)("NcModal");return(0,o.uX)(),(0,o.Wv)(d,{onClose:t[0]||(t[0]=t=>e.$emit("close")),name:r.modalTitle,size:"small"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",ee,[(0,o.Lk)("div",te,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.widgetTypes,t=>((0,o.uX)(),(0,o.CE)("div",{key:t.type,class:"widget-type-card",onClick:i=>e.$emit("select",t.type)},[((0,o.uX)(),(0,o.Wv)((0,o.$y)(r.getIconComponent(t.icon)),{size:32,class:"widget-icon"})),(0,o.Lk)("div",oe,[(0,o.Lk)("h3",null,(0,a.v_)(t.name),1)])],8,ie))),128))])])]),_:1},8,["name"])}],["__scopeId","data-v-15ea2c63"]]);var _e=i(3751);const Ae={class:"widget-editor-content"},ze={key:0,class:"form-group full-width-editor"},Re={key:0,class:"rich-text-toolbar"},Se=["title"],Ee=["title"],Ue=["title"],Te=["title"],Fe=["title"],Ie=["title"],De={class:"form-group"},Ve=["placeholder"],$e={class:"form-group"},Be={value:1},He={value:2},Qe={value:3},Xe={value:4},Me={value:5},Ne={value:6},Oe={class:"form-group"},je=["disabled"],Je={key:0,class:"hint uploading"},Ke={key:1,class:"hint"},Ge={key:0,class:"image-preview"},Ze=["src","alt"],qe={class:"form-group"},Ye=["placeholder"],et={class:"form-group"},tt={class:"size-presets"},it={key:1,class:"form-group"},ot=["placeholder"],at={class:"size-hint"},nt={key:2,class:"form-group"},lt={class:"position-presets"},rt={class:"size-hint"},dt={class:"form-group"},st={class:"size-presets"},ct={key:3,class:"form-group"},gt={class:"size-hint"},ut={key:4,class:"form-group"},pt=["placeholder"],ht={class:"link-target-options"},mt={class:"checkbox-label"},bt={class:"size-hint"},vt={class:"form-group"},kt={class:"form-group"},wt={class:"form-group"},ft={class:"form-group"},yt={class:"size-presets"},xt={key:0,class:"form-group"},Ct={class:"hint"},Wt={key:0,class:"detected-platform"},Lt={class:"form-group"},Pt=["disabled"],_t={key:0,class:"hint uploading"},At={key:1,class:"hint"},zt={key:2,class:"current-video"},Rt={class:"form-group"},St={class:"form-group"},Et={class:"checkbox-group"},Ut={class:"checkbox-label"},Tt={class:"hint checkbox-hint"},Ft={class:"checkbox-group"},It={class:"checkbox-label"},Dt={class:"hint checkbox-hint"},Vt={class:"checkbox-group"},$t={class:"checkbox-label"},Bt={class:"hint checkbox-hint"},Ht={key:2,class:"video-preview"},Qt={key:0,class:"video-blocked-preview"},Xt={class:"blocked-title"},Mt={key:0,class:"blocked-url"},Nt={class:"url-value"},Ot={class:"blocked-hint"},jt={class:"preview-container",style:{height:"200px"}},Jt=["src"],Kt={key:3,class:"video-preview"},Gt={class:"preview-container",style:{height:"200px"}},Zt=["src"],qt={class:"video-preview-hint"},Yt={class:"hint"},ei={class:"modal-footer"};var ti=i(6802),ii=i(3814),oi=i(7801),ai=i(5168),ni=i(5442),li=i(1200),ri=i(7594),di=i(8005);const si={name:"WidgetEditor",components:{NcButton:Q.x1,NcModal:Q.FH,EditorContent:ni.$Z,PageTreeSelect:oi.A},props:{widget:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["close","save"],data(){return{localWidget:JSON.parse(JSON.stringify(this.widget)),editor:null,detectedPlatform:null,embedUrl:null,uploadLimitBytes:52428800,uploadLimitMB:50,videoDomainWhitelist:[],videoWhitelistLoaded:!1,convertVideoUrlTimeout:null,isUploading:!1}},async mounted(){try{const[e,t]=await Promise.all([ti.Ay.get((0,ii.Jv)("/apps/intravox/api/settings/upload-limit")),ti.Ay.get((0,ii.Jv)("/apps/intravox/api/settings/video-domains"))]);e.data.limit&&(this.uploadLimitBytes=e.data.limit,this.uploadLimitMB=e.data.limitMB),t.data.domains&&(this.videoDomainWhitelist=t.data.domains),this.videoWhitelistLoaded=!0}catch{this.videoWhitelistLoaded=!0}if("video"===this.localWidget.type&&"local"!==this.localWidget.provider){const e=this.localWidget.originalSrc,t=this.localWidget.src;e?(this.localWidget.src=e,this.convertVideoUrl()):t&&(this.embedUrl=t,this.localWidget.originalSrc=t,this.detectPlatformFromEmbedUrl(t))}if("text"===this.localWidget.type){let e=this.localWidget.content||"";(e.includes("&lt;")||e.includes("&gt;"))&&(e=this.decodeHtml(e)),this.editor=new ni.KE({extensions:[li.A.configure({paragraph:{HTMLAttributes:{class:"tight-paragraph"}}}),ri.A,di.A.configure({placeholder:"Typ hier je tekst..."})],editorProps:{attributes:{class:"intravox-editor-full-width"}},content:e,onUpdate:({editor:e})=>{this.localWidget.content=e.getHTML()}})}},beforeUnmount(){this.editor&&this.editor.destroy(),this.convertVideoUrlTimeout&&clearTimeout(this.convertVideoUrlTimeout)},computed:{isVideoBlocked(){if("video"!==this.localWidget.type||"local"===this.localWidget.provider)return!1;const e=this.embedUrl||this.localWidget.src;if(!e)return!1;if(0===this.videoDomainWhitelist.length)return!0;try{const t=new URL(e).origin.toLowerCase();return!this.videoDomainWhitelist.some(e=>{try{const i=new URL(e);return t===i.origin.toLowerCase()}catch{return!1}})}catch{return!1}},blockedDomain(){if(!this.isVideoBlocked)return null;const e=this.embedUrl||this.localWidget.src;try{return new URL(e).hostname}catch{return e}},canSaveVideo(){return!("video"===this.localWidget.type&&("local"===this.localWidget.provider?!this.localWidget.src:!this.embedUrl||this.isVideoBlocked))}},methods:{t(e,t={}){return this.$t(e,t)},decodeHtml(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value},save(){"video"===this.localWidget.type&&"local"!==this.localWidget.provider&&this.convertVideoUrl(),this.$emit("save",this.localWidget),this.$emit("close")},debouncedConvertVideoUrl(){this.convertVideoUrlTimeout&&clearTimeout(this.convertVideoUrlTimeout),this.convertVideoUrlTimeout=setTimeout(()=>{this.convertVideoUrl()},500)},async handleImageUpload(e){const t=e.target.files[0];if(!t)return;const i=this.uploadLimitBytes||2097152;if(t.size>i)return void(0,ai.Qg)((0,H.Tl)("intravox","Image too large. Maximum size is {limit}MB.",{limit:this.uploadLimitMB||2}));const o=new FormData;o.append("media",t);const a=(0,ii.Jv)(`/apps/intravox/api/pages/${this.pageId}/media`);this.isUploading=!0;try{const e=await ti.Ay.post(a,o);this.localWidget.src=e.data.filename,void 0===this.localWidget.width&&(this.localWidget.width=null)}catch(e){const t=e.response?.data?.error||e.message;(0,ai.Qg)((0,H.Tl)("intravox","Could not upload image")+": "+t)}finally{this.isUploading=!1}},getImageUrl(e){if(!e)return"";const t=e.replace(/^(ðŸ“· images\/|images\/|_media\/)/,"");return(0,ii.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/${t}`)},setImageSize(e){this.localWidget.width=e,void 0!==this.localWidget.height&&delete this.localWidget.height},setObjectPosition(e){this.localWidget.objectPosition=e},setImageLinkType(e){this.localWidget.linkType=e,"none"===e?(this.localWidget.linkPageId=null,this.localWidget.linkUrl=null,this.localWidget.linkNewTab=void 0):"internal"===e?(this.localWidget.linkUrl=null,this.localWidget.linkNewTab=void 0):"external"===e&&(this.localWidget.linkPageId=null,void 0===this.localWidget.linkNewTab&&(this.localWidget.linkNewTab=!0))},convertVideoUrl(){const e=this.localWidget.src||"";if(!e)return this.detectedPlatform=null,this.embedUrl=null,void(this.localWidget.originalSrc=null);e.includes("/embed/")||e.includes("/videos/embed/")||e.includes("player.vimeo.com")||(this.localWidget.originalSrc=e);try{const t=new URL(e),i=t.hostname.toLowerCase(),o=i.replace("www.","").replace("m.","").replace("music.","");if("youtube.com"===o||"youtu.be"===o||"youtube-nocookie.com"===o){this.detectedPlatform="YouTube";let e=null;return e="youtu.be"===o?t.pathname.slice(1).split(/[/?]/)[0]:t.searchParams.get("v")||t.pathname.match(/\/(?:embed|v|shorts|live)\/([^/?]+)/)?.[1]||t.pathname.match(/\/watch\/([^/?]+)/)?.[1],e&&!/^[a-zA-Z0-9_-]{11}$/.test(e)&&(e=null),void(e&&(this.embedUrl=`https://www.youtube-nocookie.com/embed/${e}`,this.localWidget.src=this.embedUrl))}if(i.includes("vimeo.com")){this.detectedPlatform="Vimeo";let e=null,i=null;const o=t.pathname.match(/\/(\d+)\/([a-f0-9]+)$/);if(o)e=o[1],i=o[2];else{const i=t.pathname.match(/\/(\d+)/);i&&(e=i[1])}return void(e&&(this.embedUrl=i?`https://player.vimeo.com/video/${e}?h=${i}`:`https://player.vimeo.com/video/${e}`,this.localWidget.src=this.embedUrl))}if(i.includes("dailymotion.com")||i.includes("dai.ly")){this.detectedPlatform="Dailymotion";let e=null;if(i.includes("dai.ly"))e=t.pathname.slice(1);else{const i=t.pathname.match(/\/video\/([a-zA-Z0-9]+)/);i&&(e=i[1])}return void(e&&(this.embedUrl=`https://www.dailymotion.com/embed/video/${e}`,this.localWidget.src=this.embedUrl))}if(t.pathname.includes("/videos/watch/")||t.pathname.includes("/w/")||t.pathname.includes("/videos/embed/")){this.detectedPlatform="PeerTube";let e=t.pathname;if(e.includes("/videos/watch/"))e=e.replace("/videos/watch/","/videos/embed/");else if(e.match(/^\/w\/[a-zA-Z0-9-]+/)){const t=e.split("/w/")[1].split("/")[0];e=`/videos/embed/${t}`}return t.pathname=e,t.search="",t.searchParams.set("p2p","0"),t.searchParams.set("peertubeLink","0"),this.embedUrl=t.toString(),void(this.localWidget.src=this.embedUrl)}if(i.includes("tiktok.com")){this.detectedPlatform="TikTok";const e=t.pathname.match(/\/video\/(\d+)/);return void(e&&(this.embedUrl=`https://www.tiktok.com/embed/v2/${e[1]}`,this.localWidget.src=this.embedUrl))}if(i.includes("twitch.tv")){this.detectedPlatform="Twitch";const e=t.pathname.match(/^\/([a-zA-Z0-9_]+)$/),i=t.pathname.match(/\/videos\/(\d+)/),o=t.pathname.match(/\/clip\/([a-zA-Z0-9-]+)/);return void(i?(this.embedUrl=`https://player.twitch.tv/?video=${i[1]}&parent=${window.location.hostname}`,this.localWidget.src=this.embedUrl):o?(this.embedUrl=`https://clips.twitch.tv/embed?clip=${o[1]}&parent=${window.location.hostname}`,this.localWidget.src=this.embedUrl):e&&(this.embedUrl=`https://player.twitch.tv/?channel=${e[1]}&parent=${window.location.hostname}`,this.localWidget.src=this.embedUrl))}this.detectedPlatform=null,t.pathname.includes("/embed")||t.pathname.includes("/player"),this.embedUrl=e,this.localWidget.src=e,this.localWidget.originalSrc||(this.localWidget.originalSrc=e)}catch(e){this.detectedPlatform=null,this.embedUrl=null}},detectPlatformFromEmbedUrl(e){if(e)try{const t=new URL(e),i=t.hostname.toLowerCase();i.includes("youtube-nocookie.com")||i.includes("youtube.com")?this.detectedPlatform="YouTube":i.includes("vimeo.com")?this.detectedPlatform="Vimeo":i.includes("dailymotion.com")?this.detectedPlatform="Dailymotion":i.includes("tiktok.com")?this.detectedPlatform="TikTok":i.includes("twitch.tv")?this.detectedPlatform="Twitch":t.pathname.includes("/videos/embed/")?this.detectedPlatform="PeerTube":this.detectedPlatform=null}catch{this.detectedPlatform=null}else this.detectedPlatform=null},async handleVideoUpload(e){const t=e.target.files[0];if(!t)return;if(t.size>this.uploadLimitBytes)return void(0,ai.Qg)((0,H.Tl)("intravox","Video too large. Maximum size is {limit}MB.",{limit:this.uploadLimitMB}));if(!["video/mp4","video/webm","video/ogg"].includes(t.type))return void(0,ai.Qg)((0,H.Tl)("intravox","Invalid video format. Please use MP4, WebM or OGG."));const i=new FormData;i.append("video",t),this.isUploading=!0;try{const e=await ti.Ay.post((0,ii.Jv)(`/apps/intravox/api/pages/${this.pageId}/media`),i);this.localWidget.src=e.data.filename,this.localWidget.provider="local",this.localWidget.originalSrc=null,(0,ai.Te)((0,H.Tl)("intravox","Video uploaded successfully"))}catch(e){let t=(0,H.Tl)("intravox","Could not upload video");"ERR_NETWORK"===e.code?t=(0,H.Tl)("intravox","Network error - please check your connection and try again"):413===e.response?.status?t=(0,H.Tl)("intravox","Video file is too large for the server"):e.response?.data?.error&&(t=e.response.data.error),(0,ai.Qg)(t)}finally{this.isUploading=!1}},getVideoUrl(e){if(!e)return"";const t=e.replace(/^(videos\/|_media\/)/,"");return(0,ii.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/${t}`)}}};var ci=i(9033),gi={};gi.styleTagTransform=xe(),gi.setAttributes=ke(),gi.insert=be().bind(null,"head"),gi.domAPI=he(),gi.insertStyleElement=fe(),ue()(ci.A,gi),ci.A&&ci.A.locals&&ci.A.locals;const ui=(0,Le.A)(si,[["render",function(e,t,i,n,l,r){const d=(0,o.g2)("editor-content"),s=(0,o.g2)("PageTreeSelect"),c=(0,o.g2)("NcButton"),g=(0,o.g2)("NcModal");return(0,o.uX)(),(0,o.Wv)(g,{onClose:t[38]||(t[38]=t=>e.$emit("close")),name:r.t("Edit widget"),size:"large",class:"widget-editor-modal"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Ae,[(0,o.Q3)(" Text Widget "),"text"===l.localWidget.type?((0,o.uX)(),(0,o.CE)("div",ze,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Text:")),1),(0,o.Q3)(" Tiptap Rich Text Editor "),l.editor?((0,o.uX)(),(0,o.CE)("div",Re,[(0,o.Lk)("button",{type:"button",onClick:t[0]||(t[0]=e=>l.editor.chain().focus().toggleBold().run()),class:(0,a.C4)([{"is-active":l.editor.isActive("bold")},"toolbar-btn"]),title:r.t("Bold")},[...t[39]||(t[39]=[(0,o.Lk)("strong",null,"B",-1)])],10,Se),(0,o.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>l.editor.chain().focus().toggleItalic().run()),class:(0,a.C4)([{"is-active":l.editor.isActive("italic")},"toolbar-btn"]),title:r.t("Italic")},[...t[40]||(t[40]=[(0,o.Lk)("em",null,"I",-1)])],10,Ee),(0,o.Lk)("button",{type:"button",onClick:t[2]||(t[2]=e=>l.editor.chain().focus().toggleUnderline().run()),class:(0,a.C4)([{"is-active":l.editor.isActive("underline")},"toolbar-btn"]),title:r.t("Underline")},[...t[41]||(t[41]=[(0,o.Lk)("u",null,"U",-1)])],10,Ue),(0,o.Lk)("button",{type:"button",onClick:t[3]||(t[3]=e=>l.editor.chain().focus().toggleStrike().run()),class:(0,a.C4)([{"is-active":l.editor.isActive("strike")},"toolbar-btn"]),title:r.t("Strikethrough")},[...t[42]||(t[42]=[(0,o.Lk)("s",null,"S",-1)])],10,Te),t[43]||(t[43]=(0,o.Lk)("span",{class:"toolbar-divider"},null,-1)),(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>l.editor.chain().focus().toggleBulletList().run()),class:(0,a.C4)([{"is-active":l.editor.isActive("bulletList")},"toolbar-btn"]),title:r.t("Bullet list")}," â€¢ List ",10,Fe),(0,o.Lk)("button",{type:"button",onClick:t[5]||(t[5]=e=>l.editor.chain().focus().toggleOrderedList().run()),class:(0,a.C4)([{"is-active":l.editor.isActive("orderedList")},"toolbar-btn"]),title:r.t("Numbered list")}," 1. List ",10,Ie)])):(0,o.Q3)("v-if",!0),(0,o.bF)(d,{editor:l.editor,class:"rich-text-editor"},null,8,["editor"])])):"heading"===l.localWidget.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Q3)(" Heading Widget "),(0,o.Lk)("div",null,[(0,o.Lk)("div",De,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Heading:")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.localWidget.content=e),type:"text",placeholder:r.t("Enter your heading..."),class:"heading-text-input"},null,8,Ve),[[_e.Jo,l.localWidget.content]])]),(0,o.Lk)("div",$e,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Level:")),1),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.localWidget.level=e),class:"heading-level-select"},[(0,o.Lk)("option",Be,(0,a.v_)(r.t("H1 - Largest")),1),(0,o.Lk)("option",He,(0,a.v_)(r.t("H2")),1),(0,o.Lk)("option",Qe,(0,a.v_)(r.t("H3")),1),(0,o.Lk)("option",Xe,(0,a.v_)(r.t("H4")),1),(0,o.Lk)("option",Me,(0,a.v_)(r.t("H5")),1),(0,o.Lk)("option",Ne,(0,a.v_)(r.t("H6 - Smallest")),1)],512),[[_e.u1,l.localWidget.level,void 0,{number:!0}]])])])],2112)):"image"===l.localWidget.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.Q3)(" Image Widget "),(0,o.Lk)("div",null,[(0,o.Lk)("div",Oe,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Upload image:")),1),(0,o.Lk)("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:t[8]||(t[8]=(...e)=>r.handleImageUpload&&r.handleImageUpload(...e)),disabled:l.isUploading},null,40,je),l.isUploading?((0,o.uX)(),(0,o.CE)("p",Je,(0,a.v_)(r.t("Uploading image...")),1)):((0,o.uX)(),(0,o.CE)("p",Ke,(0,a.v_)(r.t("Supported formats: JPEG, PNG, GIF, WebP. Maximum size: {limit}MB.",{limit:l.uploadLimitMB})),1))]),l.localWidget.src?((0,o.uX)(),(0,o.CE)("div",Ge,[(0,o.Lk)("img",{src:r.getImageUrl(l.localWidget.src),alt:l.localWidget.alt},null,8,Ze)])):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",qe,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Alt text:")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.localWidget.alt=e),type:"text",placeholder:r.t("Description of the image..."),class:"widget-input"},null,8,Ye),[[_e.Jo,l.localWidget.alt]])]),(0,o.Lk)("div",et,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Size:")),1),(0,o.Lk)("div",tt,[(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:300===l.localWidget.width},"size-preset-btn"]),onClick:t[10]||(t[10]=e=>r.setImageSize(300))},(0,a.v_)(r.t("Small"))+" (300px) ",3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:500===l.localWidget.width},"size-preset-btn"]),onClick:t[11]||(t[11]=e=>r.setImageSize(500))},(0,a.v_)(r.t("Medium"))+" (500px) ",3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:800===l.localWidget.width},"size-preset-btn"]),onClick:t[12]||(t[12]=e=>r.setImageSize(800))},(0,a.v_)(r.t("Large"))+" (800px) ",3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:!l.localWidget.width||null===l.localWidget.width},"size-preset-btn"]),onClick:t[13]||(t[13]=e=>r.setImageSize(null))},(0,a.v_)(r.t("Full width")),3)])]),l.localWidget.width?((0,o.uX)(),(0,o.CE)("div",it,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Custom width (pixels):")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.localWidget.width=e),type:"number",min:"50",max:"2000",class:"widget-input",placeholder:r.t("Width in pixels")},null,8,ot),[[_e.Jo,l.localWidget.width,void 0,{number:!0}]]),(0,o.Lk)("p",at,(0,a.v_)(r.t("Height will automatically adjust to maintain aspect ratio")),1)])):(0,o.Q3)("v-if",!0),l.localWidget.width&&null!==l.localWidget.width?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.CE)("div",nt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Vertical position:")),1),(0,o.Lk)("div",lt,[(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:!l.localWidget.objectPosition||"center"===l.localWidget.objectPosition},"size-preset-btn"]),onClick:t[15]||(t[15]=e=>r.setObjectPosition("center"))},(0,a.v_)(r.t("Center")),3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"top"===l.localWidget.objectPosition},"size-preset-btn"]),onClick:t[16]||(t[16]=e=>r.setObjectPosition("top"))},(0,a.v_)(r.t("Top")),3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"bottom"===l.localWidget.objectPosition},"size-preset-btn"]),onClick:t[17]||(t[17]=e=>r.setObjectPosition("bottom"))},(0,a.v_)(r.t("Bottom")),3)]),(0,o.Lk)("p",rt,(0,a.v_)(r.t("Choose which part of the image is visible when cropped")),1)])),(0,o.Q3)(" Image Link Section "),(0,o.Lk)("div",dt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Link:")),1),(0,o.Lk)("div",st,[(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:!l.localWidget.linkType||"none"===l.localWidget.linkType},"size-preset-btn"]),onClick:t[18]||(t[18]=e=>r.setImageLinkType("none"))},(0,a.v_)(r.t("No link")),3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"internal"===l.localWidget.linkType},"size-preset-btn"]),onClick:t[19]||(t[19]=e=>r.setImageLinkType("internal"))},(0,a.v_)(r.t("Internal page")),3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"external"===l.localWidget.linkType},"size-preset-btn"]),onClick:t[20]||(t[20]=e=>r.setImageLinkType("external"))},(0,a.v_)(r.t("External URL")),3)])]),(0,o.Q3)(" Internal page selector "),"internal"===l.localWidget.linkType?((0,o.uX)(),(0,o.CE)("div",ct,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Select page:")),1),(0,o.bF)(s,{modelValue:l.localWidget.linkPageId,"onUpdate:modelValue":t[21]||(t[21]=e=>l.localWidget.linkPageId=e),placeholder:r.t("Select a page..."),clearable:!0},null,8,["modelValue","placeholder"]),(0,o.Lk)("p",gt,(0,a.v_)(r.t("Click on the image to navigate to this page")),1)])):(0,o.Q3)("v-if",!0),(0,o.Q3)(" External URL input "),"external"===l.localWidget.linkType?((0,o.uX)(),(0,o.CE)("div",ut,[(0,o.Lk)("label",null,(0,a.v_)(r.t("URL:")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>l.localWidget.linkUrl=e),type:"url",placeholder:r.t("https://example.com"),class:"widget-input"},null,8,pt),[[_e.Jo,l.localWidget.linkUrl]]),(0,o.Lk)("div",ht,[(0,o.Lk)("label",mt,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=e=>l.localWidget.linkNewTab=e)},null,512),[[_e.lH,l.localWidget.linkNewTab]]),(0,o.eW)(" "+(0,a.v_)(r.t("Open in new tab")),1)])]),(0,o.Lk)("p",bt,(0,a.v_)(l.localWidget.linkNewTab?r.t("Click on the image to open this URL in a new tab"):r.t("Click on the image to open this URL")),1)])):(0,o.Q3)("v-if",!0)])],2112)):"file"===l.localWidget.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:3},[(0,o.Q3)(" File Widget "),(0,o.Lk)("div",null,[(0,o.Lk)("div",vt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("File name:")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[24]||(t[24]=e=>l.localWidget.name=e),type:"text",placeholder:"Document.pdf",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.name]])]),(0,o.Lk)("div",kt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("File path (in IntraVox folder):")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>l.localWidget.path=e),type:"text",placeholder:"documents/file.pdf",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.path]])])])],2112)):"spacer"===l.localWidget.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:4},[(0,o.Q3)(" Spacer Widget "),(0,o.Lk)("div",null,[(0,o.Lk)("div",wt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Height (pixels):")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>l.localWidget.height=e),type:"number",min:"10",max:"200",placeholder:"20",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.height,void 0,{number:!0}]])])])],2112)):"video"===l.localWidget.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:5},[(0,o.Q3)(" Video Widget "),(0,o.Lk)("div",null,[(0,o.Q3)(" Provider keuze "),(0,o.Lk)("div",ft,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Video source:")),1),(0,o.Lk)("div",yt,[(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"local"!==l.localWidget.provider},"size-preset-btn"]),onClick:t[27]||(t[27]=e=>{l.localWidget.provider="embed",l.localWidget.src=""})},(0,a.v_)(r.t("Video URL")),3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"local"===l.localWidget.provider},"size-preset-btn"]),onClick:t[28]||(t[28]=e=>{l.localWidget.provider="local",l.localWidget.src=""})},(0,a.v_)(r.t("Local file")),3)])]),(0,o.Q3)(" Video URL (YouTube, Vimeo, PeerTube, etc.) "),"local"!==l.localWidget.provider?((0,o.uX)(),(0,o.CE)("div",xt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Video URL:")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>l.localWidget.src=e),type:"url",placeholder:"https://www.youtube.com/watch?v=... or https://vimeo.com/...",class:"widget-input",onBlur:t[30]||(t[30]=(...e)=>r.convertVideoUrl&&r.convertVideoUrl(...e)),onInput:t[31]||(t[31]=(...e)=>r.debouncedConvertVideoUrl&&r.debouncedConvertVideoUrl(...e))},null,544),[[_e.Jo,l.localWidget.src]]),(0,o.Lk)("p",Ct,(0,a.v_)(r.t("Paste a video URL from YouTube, Vimeo, PeerTube or other supported platforms.")),1),l.detectedPlatform?((0,o.uX)(),(0,o.CE)("p",Wt,[(0,o.eW)((0,a.v_)(r.t("Detected:"))+" ",1),(0,o.Lk)("strong",null,(0,a.v_)(l.detectedPlatform),1)])):(0,o.Q3)("v-if",!0)])):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Q3)(" Lokaal bestand upload "),(0,o.Lk)("div",Lt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Upload video:")),1),(0,o.Lk)("input",{type:"file",accept:"video/mp4,video/webm,video/ogg",disabled:l.isUploading,onChange:t[32]||(t[32]=(...e)=>r.handleVideoUpload&&r.handleVideoUpload(...e))},null,40,Pt),l.isUploading?((0,o.uX)(),(0,o.CE)("p",_t,(0,a.v_)(r.t("Uploading video...")),1)):((0,o.uX)(),(0,o.CE)("p",At,(0,a.v_)(r.t("MP4, WebM or OGG. Maximum {limit}MB.",{limit:l.uploadLimitMB})),1)),l.localWidget.src?((0,o.uX)(),(0,o.CE)("div",zt,(0,a.v_)(r.t("Current:"))+" "+(0,a.v_)(l.localWidget.src),1)):(0,o.Q3)("v-if",!0)])],2112)),(0,o.Q3)(" Titel "),(0,o.Lk)("div",Rt,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Title (optional):")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>l.localWidget.title=e),type:"text",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.title]])]),(0,o.Q3)(" Playback Options "),(0,o.Lk)("div",St,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Playback options:")),1),(0,o.Lk)("div",Et,[(0,o.Lk)("label",Ut,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[34]||(t[34]=e=>l.localWidget.autoplay=e)},null,512),[[_e.lH,l.localWidget.autoplay]]),(0,o.eW)(" "+(0,a.v_)(r.t("Autoplay when page loads")),1)]),(0,o.Lk)("p",Tt,(0,a.v_)(r.t("Video will start automatically (muted for browser compatibility)")),1)]),(0,o.Lk)("div",Ft,[(0,o.Lk)("label",It,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[35]||(t[35]=e=>l.localWidget.loop=e)},null,512),[[_e.lH,l.localWidget.loop]]),(0,o.eW)(" "+(0,a.v_)(r.t("Loop video")),1)]),(0,o.Lk)("p",Dt,(0,a.v_)(r.t("Video will restart when finished")),1)]),(0,o.Lk)("div",Vt,[(0,o.Lk)("label",$t,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[36]||(t[36]=e=>l.localWidget.muted=e)},null,512),[[_e.lH,l.localWidget.muted]]),(0,o.eW)(" "+(0,a.v_)(r.t("Muted")),1)]),(0,o.Lk)("p",Bt,(0,a.v_)(r.t("Video plays without sound (required for autoplay in most browsers)")),1)])]),(0,o.Q3)(" Preview "),l.embedUrl&&"local"!==l.localWidget.provider?((0,o.uX)(),(0,o.CE)("div",Ht,[(0,o.Lk)("p",null,(0,a.v_)(r.t("Preview:")),1),(0,o.Q3)(" Blocked video warning - matches Widget.vue styling "),r.isVideoBlocked?((0,o.uX)(),(0,o.CE)("div",Qt,[t[45]||(t[45]=(0,o.Lk)("div",{class:"blocked-icon"},"ðŸš«",-1)),(0,o.Lk)("p",Xt,(0,a.v_)(r.t("Video service not allowed")),1),l.localWidget.src?((0,o.uX)(),(0,o.CE)("p",Mt,[t[44]||(t[44]=(0,o.Lk)("span",{class:"url-label"},"URL:",-1)),(0,o.Lk)("code",Nt,(0,a.v_)(l.localWidget.src),1)])):(0,o.Q3)("v-if",!0),(0,o.Lk)("p",Ot,(0,a.v_)(r.t("Please contact your administrator if you need access to this video service.")),1)])):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Q3)(" Normal preview "),(0,o.Lk)("div",jt,[(0,o.Lk)("iframe",{src:l.embedUrl,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowfullscreen:"",referrerpolicy:"strict-origin-when-cross-origin",style:{width:"100%",height:"100%",border:"none"}},null,8,Jt)])],2112))])):"local"===l.localWidget.provider&&l.localWidget.src?((0,o.uX)(),(0,o.CE)("div",Kt,[(0,o.Lk)("p",null,(0,a.v_)(r.t("Preview:")),1),(0,o.Lk)("div",Gt,[(0,o.Lk)("video",{src:r.getVideoUrl(l.localWidget.src),controls:"",muted:"",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,Zt)])])):"local"===l.localWidget.provider||l.embedUrl?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.CE)(o.FK,{key:4},[(0,o.Q3)(" No URL entered yet hint "),(0,o.Lk)("div",qt,[(0,o.Lk)("p",Yt,(0,a.v_)(r.t("Enter a video URL above to see a preview.")),1)])],2112))])],2112)):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",ei,[(0,o.bF)(c,{onClick:t[37]||(t[37]=t=>e.$emit("close")),type:"secondary"},{default:(0,o.k6)(()=>[(0,o.eW)((0,a.v_)(r.t("Cancel")),1)]),_:1}),(0,o.bF)(c,{onClick:r.save,type:"primary",disabled:l.isUploading||"video"===l.localWidget.type&&!r.canSaveVideo},{default:(0,o.k6)(()=>[(0,o.eW)((0,a.v_)(r.t("Save")),1)]),_:1},8,["onClick","disabled"])])])]),_:1},8,["name"])}],["__scopeId","data-v-1d19c6b6"]]),pi={class:"links-editor-content"},hi={class:"form-section"},mi={class:"form-group"},bi={value:1},vi={value:2},ki={value:3},wi={value:4},fi={class:"form-group"},yi={class:"color-presets"},xi={class:"form-section"},Ci={class:"section-header"},Wi={key:0,class:"links-list"},Li={class:"link-number"},Pi={class:"link-fields"},_i={class:"form-row"},Ai={class:"form-group flex-1"},zi=["onUpdate:modelValue","placeholder"],Ri={class:"form-group flex-1"},Si=["onUpdate:modelValue"],Ei={class:"form-row"},Ui={class:"form-group flex-1"},Ti={class:"icon-option"},Fi={class:"icon-option"},Ii={class:"form-group flex-1"},Di={class:"color-presets"},Vi=["onClick"],$i=["onClick"],Bi=["onClick","title"],Hi={key:1,class:"empty-state"},Qi={class:"modal-footer"};var Xi=i(8990),Mi=i(7021),Ni=i(8932),Oi=i(85),ji=i(3046),Ji=i(4333),Ki=i(8071),Gi=i(2607),Zi=i(5204),qi=i(2212),Yi=i(1290),eo=i(4081),to=i(4049),io=i(1358),oo=i(689),ao=i(790),no=i(2565),lo=i(6441),ro=i(211),so=i(2192),co=i(793);const go={name:"LinksEditor",components:{NcButton:Q.x1,NcModal:Q.FH,NcSelect:Q.EQ,Plus:X.A,Delete:K.A,ViewGrid:de.A,Home:Xi.A,Information:Mi.A,Email:Ni.A,Phone:Oi.A,Web:ji.A,FileDocument:Ji.A,Download:Ki.A,Help:Gi.A,Cog:Zi.A,Account:qi.A,AccountGroup:Yi.A,Calendar:eo.A,ChartLine:to.A,Briefcase:io.A,School:oo.A,Star:ao.A,Heart:no.A,LightbulbOn:lo.A,Rocket:ro.A,Archive:so.A,OpenInNew:co.A},props:{widget:{type:Object,required:!0}},emits:["close","save"],data(){return{localWidget:JSON.parse(JSON.stringify(this.widget))}},computed:{iconOptions(){return[{value:"home",label:this.t("Home")},{value:"information",label:this.t("Information")},{value:"email",label:this.t("Email")},{value:"phone",label:this.t("Phone")},{value:"web",label:this.t("Website")},{value:"file-document",label:this.t("Document")},{value:"download",label:this.t("Download")},{value:"help",label:this.t("Help")},{value:"cog",label:this.t("Settings")},{value:"account",label:this.t("Account")},{value:"account-group",label:this.t("Team")},{value:"calendar",label:this.t("Calendar")},{value:"chart-line",label:this.t("Analytics")},{value:"briefcase",label:this.t("Business")},{value:"school",label:this.t("Education")},{value:"star",label:this.t("Favorite")},{value:"heart",label:this.t("Like")},{value:"lightbulb-on",label:this.t("Idea")},{value:"rocket",label:this.t("Launch")},{value:"archive",label:this.t("Archive")},{value:"open-in-new",label:this.t("External link")}]}},mounted(){this.localWidget.items||(this.localWidget.items=[]),this.localWidget.columns||(this.localWidget.columns=2),this.localWidget.items&&this.localWidget.items.forEach(e=>{e.icon&&!e.iconObject&&(e.iconObject=this.iconOptions.find(t=>t.value===e.icon)),!e.text&&e.title&&(e.text=e.title)})},methods:{t:(e,t={})=>(0,H.Tl)("intravox",e,t),getIconComponent:e=>({home:"Home",information:"Information",email:"Email",phone:"Phone",web:"Web","file-document":"FileDocument",download:"Download",help:"Help",cog:"Cog",account:"Account","account-group":"AccountGroup",calendar:"Calendar","chart-line":"ChartLine",briefcase:"Briefcase",school:"School",star:"Star",heart:"Heart","lightbulb-on":"LightbulbOn",rocket:"Rocket",archive:"Archive","open-in-new":"OpenInNew"}[e]||"OpenInNew"),addLink(){this.localWidget.items||(this.localWidget.items=[]),this.localWidget.items.push({text:"",url:"",icon:"open-in-new",iconObject:this.iconOptions.find(e=>"open-in-new"===e.value),backgroundColor:null})},updateLinkIcon(e,t){this.localWidget.items[e].icon=t?t.value:null,this.localWidget.items[e].iconObject=t},removeLink(e){this.localWidget.items.splice(e,1)},setBackgroundColor(e){this.localWidget.backgroundColor=e},setLinkBackground(e,t){this.localWidget.items[e].backgroundColor=t},save(){const e=JSON.parse(JSON.stringify(this.localWidget));e.items&&e.items.forEach(e=>{delete e.iconObject}),this.$emit("save",e),this.$emit("close")}}};var uo=i(7245),po={};po.styleTagTransform=xe(),po.setAttributes=ke(),po.insert=be().bind(null,"head"),po.domAPI=he(),po.insertStyleElement=fe(),ue()(uo.A,po),uo.A&&uo.A.locals&&uo.A.locals;const ho=(0,Le.A)(go,[["render",function(e,t,i,n,l,r){const d=(0,o.g2)("Plus"),s=(0,o.g2)("NcButton"),c=(0,o.g2)("NcSelect"),g=(0,o.g2)("Delete"),u=(0,o.g2)("ViewGrid"),p=(0,o.g2)("NcModal");return(0,o.uX)(),(0,o.Wv)(p,{onClose:t[5]||(t[5]=t=>e.$emit("close")),name:r.t("Edit links"),size:"large",class:"links-editor-modal"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",pi,[(0,o.Q3)(" Container Settings "),(0,o.Lk)("div",hi,[(0,o.Lk)("h3",null,(0,a.v_)(r.t("Container settings")),1),(0,o.Lk)("div",mi,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Grid columns:")),1),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.localWidget.columns=e),class:"widget-input"},[(0,o.Lk)("option",bi,"1 "+(0,a.v_)(r.t("column")),1),(0,o.Lk)("option",vi,"2 "+(0,a.v_)(r.t("columns")),1),(0,o.Lk)("option",ki,"3 "+(0,a.v_)(r.t("columns")),1),(0,o.Lk)("option",wi,"4 "+(0,a.v_)(r.t("columns")),1)],512),[[_e.u1,l.localWidget.columns,void 0,{number:!0}]])]),(0,o.Lk)("div",fi,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Background color:")),1),(0,o.Lk)("div",yi,[(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:!l.localWidget.backgroundColor},"color-preset-btn"]),onClick:t[1]||(t[1]=e=>r.setBackgroundColor(null))},(0,a.v_)(r.t("None")),3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"var(--color-background-hover)"===l.localWidget.backgroundColor},"color-preset-btn"]),onClick:t[2]||(t[2]=e=>r.setBackgroundColor("var(--color-background-hover)"))},(0,a.v_)(r.t("Light")),3),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"var(--color-primary-element)"===l.localWidget.backgroundColor},"color-preset-btn"]),onClick:t[3]||(t[3]=e=>r.setBackgroundColor("var(--color-primary-element)"))},(0,a.v_)(r.t("Primary")),3)])])]),(0,o.Q3)(" Links List "),(0,o.Lk)("div",xi,[(0,o.Lk)("div",Ci,[(0,o.Lk)("h3",null,(0,a.v_)(r.t("Links")),1),(0,o.bF)(s,{onClick:r.addLink,type:"primary"},{icon:(0,o.k6)(()=>[(0,o.bF)(d,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(r.t("Add link")),1)]),_:1},8,["onClick"])]),l.localWidget.items&&l.localWidget.items.length>0?((0,o.uX)(),(0,o.CE)("div",Wi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.localWidget.items,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"link-editor-item"},[(0,o.Lk)("div",Li,(0,a.v_)(t+1),1),(0,o.Lk)("div",Pi,[(0,o.Lk)("div",_i,[(0,o.Lk)("div",Ai,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Link text:")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.text=t,type:"text",placeholder:r.t("Click here"),class:"widget-input"},null,8,zi),[[_e.Jo,e.text]])]),(0,o.Lk)("div",Ri,[(0,o.Lk)("label",null,(0,a.v_)(r.t("URL:")),1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.url=t,type:"url",placeholder:"https://example.com",class:"widget-input"},null,8,Si),[[_e.Jo,e.url]])])]),(0,o.Lk)("div",Ei,[(0,o.Lk)("div",Ui,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Icon:")),1),(0,o.bF)(c,{modelValue:e.iconObject,"onUpdate:modelValue":[t=>e.iconObject=t,e=>r.updateLinkIcon(t,e)],options:r.iconOptions,placeholder:r.t("Select an icon"),clearable:!0},{"selected-option":(0,o.k6)(e=>[(0,o.Lk)("div",Ti,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(r.getIconComponent(e.value)),{size:20})),(0,o.Lk)("span",null,(0,a.v_)(e.label),1)])]),option:(0,o.k6)(e=>[(0,o.Lk)("div",Fi,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(r.getIconComponent(e.value)),{size:20})),(0,o.Lk)("span",null,(0,a.v_)(e.label),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options","placeholder"])]),(0,o.Lk)("div",Ii,[(0,o.Lk)("label",null,(0,a.v_)(r.t("Link background:")),1),(0,o.Lk)("div",Di,[(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:!e.backgroundColor},"color-preset-btn small"]),onClick:e=>r.setLinkBackground(t,null)},(0,a.v_)(r.t("Default")),11,Vi),(0,o.Lk)("button",{type:"button",class:(0,a.C4)([{active:"var(--color-primary-element-light)"===e.backgroundColor},"color-preset-btn small"]),onClick:e=>r.setLinkBackground(t,"var(--color-primary-element-light)")},(0,a.v_)(r.t("Primary")),11,$i)])])])]),(0,o.Lk)("button",{type:"button",onClick:e=>r.removeLink(t),class:"remove-link-btn",title:r.t("Remove link")},[(0,o.bF)(g,{size:20})],8,Bi)]))),128))])):((0,o.uX)(),(0,o.CE)("div",Hi,[(0,o.bF)(u,{size:48}),(0,o.Lk)("p",null,(0,a.v_)(r.t('No links yet. Click "Add link" to get started.')),1)]))]),(0,o.Lk)("div",Qi,[(0,o.bF)(s,{onClick:t[4]||(t[4]=t=>e.$emit("close")),type:"secondary"},{default:(0,o.k6)(()=>[(0,o.eW)((0,a.v_)(r.t("Cancel")),1)]),_:1}),(0,o.bF)(s,{onClick:r.save,type:"primary"},{default:(0,o.k6)(()=>[(0,o.eW)((0,a.v_)(r.t("Save")),1)]),_:1},8,["onClick"])])])]),_:1},8,["name"])}],["__scopeId","data-v-59890675"]]),mo={name:"PageEditor",components:{draggable:B(),NcButton:Q.x1,NcDialog:Q.i$,NcActions:Q.B6,NcActionButton:Q.Ko,Plus:X.A,TableRowPlusAfter:M.A,TableRowPlusBefore:N.A,TableColumnPlusBefore:O.A,TableColumnPlusAfter:j.A,Pencil:J.A,Delete:K.A,ContentDuplicate:G.A,Palette:Z.A,DragVertical:q.A,Widget:Y.A,WidgetPicker:Pe,WidgetEditor:ui,LinksEditor:ho},props:{page:{type:Object,required:!0}},emits:["update"],data(){return{localPage:structuredClone(this.page),showWidgetPicker:!1,editingWidget:null,editingRowIndex:null,editingSideColumn:null,targetRowIndex:null,targetColumn:null,targetSideColumn:null,nextWidgetId:1,columnArrays:{},sideColumnWidgets:{left:[],right:[]},headerRowWidgets:[],editingHeaderRow:!1,targetHeaderRow:!1,showDeleteDialog:!1,deleteDialogTitle:"",deleteDialogMessage:"",deleteCallback:null,focusedWidgetId:null}},computed:{hasHeaderRow(){return!0===this.localPage.layout.headerRow?.enabled},backgroundColors(){return[{label:this.t("Default (transparent)"),value:"",cssVar:"transparent"},{label:this.t("Primary"),value:"var(--color-primary-element)",cssVar:"var(--color-primary-element)"},{label:this.t("Primary light"),value:"var(--color-primary-element-light)",cssVar:"var(--color-primary-element-light)"},{label:this.t("Light background"),value:"var(--color-background-hover)",cssVar:"var(--color-background-hover)"}]}},mounted(){this.initializeWidgetIds(),this.initializeColumnArrays(),this.initializeSideColumns(),this.initializeHeaderRow()},methods:{t:(e,t={})=>(0,H.Tl)("intravox",e,t),getRowStyle(e){const t={};return e.backgroundColor&&(t.backgroundColor=e.backgroundColor,"var(--color-primary-element)"===e.backgroundColor?t.color="var(--color-primary-element-text)":t.color="var(--color-main-text)"),t},needsEditButton:e=>["image","link","links","file","heading","video"].includes(e),initializeWidgetIds(){const e=[];this.localPage.layout.rows.forEach((t,i)=>{t.widgets.forEach((t,o)=>{e.push({widget:t,zone:"row",rowIndex:i,widgetIndex:o})})}),this.localPage.layout.headerRow?.widgets&&this.localPage.layout.headerRow.widgets.forEach((t,i)=>{e.push({widget:t,zone:"header",widgetIndex:i})}),this.localPage.layout.sideColumns&&["left","right"].forEach(t=>{this.localPage.layout.sideColumns[t]?.widgets&&this.localPage.layout.sideColumns[t].widgets.forEach((i,o)=>{e.push({widget:i,zone:`side-${t}`,widgetIndex:o})})});let t=0;const i=new Set,o=[];e.forEach(e=>{const a=e.widget;if(a.id){const n=a.id.match(/^widget-(\d+)$/);n&&(t=Math.max(t,parseInt(n[1],10))),i.has(a.id)?o.push(e):i.add(a.id)}}),this.nextWidgetId=t+1,e.forEach(e=>{const t=e.widget;t.id&&!o.includes(e)||(t.id="widget-"+this.nextWidgetId++)})},initializeColumnArrays(){const e={};this.localPage.layout.rows.forEach((t,i)=>{const o=(t.columns||this.localPage.layout.columns)??1;for(let a=1;a<=o;a++)e[`${i}-${a}`]=t.widgets.filter(e=>e.column===a)}),this.columnArrays=e},getColumnWidgets(e,t){const i=`${e}-${t}`;return this.columnArrays[i]||(this.columnArrays[i]=[]),this.columnArrays[i]},onDragEnd(e,t){this.$nextTick(()=>{this.syncAllZones()})},syncAllZones(){if(this.localPage.layout.headerRow){const e=this.headerRowWidgets.map((e,t)=>({...e,order:t+1}));this.headerRowWidgets=e,this.localPage.layout.headerRow.widgets=[...e]}["left","right"].forEach(e=>{if(this.localPage.layout.sideColumns?.[e]){const t=this.sideColumnWidgets[e].map((e,t)=>({...e,order:t+1}));this.sideColumnWidgets[e]=t,this.localPage.layout.sideColumns[e].widgets=[...t]}});const e=this.localPage.layout.rows.map((e,t)=>{const i=[],o=(e.columns||this.localPage.layout.columns)??1;for(let e=1;e<=o;e++){const o=`${t}-${e}`;(this.columnArrays[o]||[]).forEach((t,o)=>{const a={...t,column:e,order:o+1};i.push(a)})}return{...e,widgets:i}});this.localPage.layout.rows=e,this.localPage=structuredClone(this.localPage),this.initializeColumnArrays(),this.initializeSideColumns(),this.initializeHeaderRow(),this.$emit("update",this.localPage)},setColumns(e){const t=this.localPage.layout.columns;this.localPage.layout.columns=e,e<t&&this.localPage.layout.rows.forEach(t=>{t.widgets.forEach(t=>{t.column>e&&(t.column=e)})}),this.initializeColumnArrays()},setRowColumns(e,t){const i=this.localPage.layout.rows[e],o=(i.columns||this.localPage.layout.columns)??1;i.columns=t,t<o&&i.widgets.forEach(e=>{e.column>t&&(e.column=t)}),this.initializeColumnArrays(),this.$emit("update",this.localPage)},setRowBackgroundColor(e,t){this.localPage.layout.rows[e].backgroundColor=t,this.localPage.layout.rows=[...this.localPage.layout.rows],this.$emit("update",this.localPage)},addRow(){this.localPage.layout.rows.push({columns:1,widgets:[],backgroundColor:""}),this.initializeColumnArrays(),this.$emit("update",this.localPage)},insertRow(e){this.localPage.layout.rows.splice(e,0,{columns:1,widgets:[],backgroundColor:""}),this.initializeColumnArrays(),this.$emit("update",this.localPage)},deleteRow(e){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete row"),this.deleteDialogMessage=this.t("Are you sure you want to delete this row?"),this.deleteCallback=()=>{this.localPage.layout.rows.splice(e,1),this.initializeColumnArrays(),this.$emit("update",this.localPage)}},showWidgetPickerForColumn(e,t){this.targetRowIndex=e,this.targetColumn=t,this.showWidgetPicker=!0},addWidget(e){const t=this.createWidget(e);if(t.id="widget-"+this.nextWidgetId++,this.targetHeaderRow)return t.order=this.headerRowWidgets.length+1,this.headerRowWidgets.push(t),this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.showWidgetPicker=!1,"image"!==e&&"links"!==e&&"file"!==e&&"heading"!==e&&"video"!==e||this.editHeaderRowWidget(t),void(this.targetHeaderRow=!1);if(this.targetSideColumn){const i=this.targetSideColumn;return t.order=this.sideColumnWidgets[i].length+1,this.sideColumnWidgets[i].push(t),this.localPage.layout.sideColumns[i].widgets=[...this.sideColumnWidgets[i]],this.showWidgetPicker=!1,"image"!==e&&"links"!==e&&"file"!==e&&"heading"!==e&&"video"!==e||this.editSideColumnWidget(t,i),void(this.targetSideColumn=null)}const i=null!==this.targetRowIndex?this.targetRowIndex:0,o=null!==this.targetColumn?this.targetColumn:1;0===this.localPage.layout.rows.length&&this.addRow();const a=this.localPage.layout.rows[i];t.column=o,t.order=a.widgets.filter(e=>e.column===o).length+1,a.widgets.push(t),this.initializeColumnArrays(),this.showWidgetPicker=!1,"image"!==e&&"links"!==e&&"file"!==e&&"heading"!==e&&"video"!==e||this.editWidget(t,i),this.targetRowIndex=null,this.targetColumn=null},createWidget(e){const t={type:e,column:1,order:1};switch(e){case"text":t.content="";break;case"heading":t.content=this.t("New heading"),t.level=2;break;case"image":t.src="",t.alt="";break;case"link":t.url="",t.text=this.t("Link text");break;case"links":t.items=[],t.columns=2,t.backgroundColor=null;break;case"file":t.path="",t.name=this.t("File");break;case"video":t.provider="embed",t.src="",t.title="",t.autoplay=!1,t.loop=!1,t.muted=!1}return t},editWidget(e,t){this.editingWidget=structuredClone(e),this.editingRowIndex=t},saveWidget(e){if(this.editingHeaderRow){const t=this.headerRowWidgets.findIndex(e=>e.id===this.editingWidget.id);return-1!==t&&(e.id=this.editingWidget.id,e.order=this.editingWidget.order,this.headerRowWidgets.splice(t,1,e),this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)),this.editingWidget=null,void(this.editingHeaderRow=!1)}if(this.editingSideColumn){const t=this.editingSideColumn,i=this.sideColumnWidgets[t],o=i.findIndex(e=>e.id===this.editingWidget.id);return-1!==o&&(e.id=this.editingWidget.id,e.order=this.editingWidget.order,i.splice(o,1,e),this.localPage.layout.sideColumns[t].widgets=[...i],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)),this.editingWidget=null,void(this.editingSideColumn=null)}const t=this.localPage.layout.rows[this.editingRowIndex],i=t.widgets.findIndex(e=>e.id===this.editingWidget.id);-1!==i&&(e.id=this.editingWidget.id,e.column=this.editingWidget.column,e.order=this.editingWidget.order,t.widgets.splice(i,1,e),this.initializeColumnArrays(),this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)),this.editingWidget=null,this.editingRowIndex=null},updateWidget(e,t){const i=this.localPage.layout.rows[t],o=i.widgets.findIndex(t=>t.id===e.id);-1!==o&&(i.widgets[o]=e,this.initializeColumnArrays(),this.$emit("update",this.localPage))},duplicateWidgetGeneric(e,t,i){const o=structuredClone(e);o.id="widget-"+this.nextWidgetId++;const a=t.findIndex(t=>t.id===e.id);-1!==a&&(o.order=e.order+1,t.splice(a+1,0,o),t.filter(t=>t.order>e.order&&t.id!==o.id).forEach(e=>e.order++),i&&i())},duplicateWidget(e,t){const i=this.columnArrays[`${e}-${t.column}`];this.duplicateWidgetGeneric(t,i,()=>this.syncAllZones())},duplicateHeaderRowWidget(e){this.duplicateWidgetGeneric(e,this.headerRowWidgets,()=>this.syncAllZones())},duplicateSideColumnWidget(e,t){this.duplicateWidgetGeneric(e,this.sideColumnWidgets[t],()=>this.syncAllZones())},deleteWidget(e,t){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete widget"),this.deleteDialogMessage=this.t("Are you sure you want to delete this widget?"),this.deleteCallback=()=>{const i=this.localPage.layout.rows[e],o=i.widgets.findIndex(e=>e.id===t);-1!==o&&(i.widgets.splice(o,1),this.initializeColumnArrays(),this.$emit("update",this.localPage))}},confirmDelete(){this.deleteCallback&&this.deleteCallback(),this.cancelDelete()},cancelDelete(){this.showDeleteDialog=!1,this.deleteDialogTitle="",this.deleteDialogMessage="",this.deleteCallback=null},initializeSideColumns(){this.localPage.layout.sideColumns||(this.localPage.layout.sideColumns={left:{enabled:!1,backgroundColor:"",widgets:[]},right:{enabled:!1,backgroundColor:"",widgets:[]}}),["left","right"].forEach(e=>{this.localPage.layout.sideColumns[e]||(this.localPage.layout.sideColumns[e]={enabled:!1,backgroundColor:"",widgets:[]}),this.sideColumnWidgets[e]=this.localPage.layout.sideColumns[e].widgets||[],this.sideColumnWidgets[e].forEach(e=>{e.id||(e.id="widget-"+this.nextWidgetId++)})})},hasSideColumn(e){return!0===this.localPage.layout.sideColumns?.[e]?.enabled},addSideColumn(e){this.localPage.layout.sideColumns||(this.localPage.layout.sideColumns={}),this.localPage.layout.sideColumns[e]={enabled:!0,backgroundColor:"",widgets:[]},this.sideColumnWidgets[e]=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)},removeSideColumn(e){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Remove column"),this.deleteDialogMessage=this.t("Are you sure you want to remove this column?"),this.deleteCallback=()=>{this.localPage.layout.sideColumns?.[e]&&(this.localPage.layout.sideColumns[e].enabled=!1,this.localPage.layout.sideColumns[e].widgets=[],this.sideColumnWidgets[e]=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))}},getSideColumnWidgets(e){return this.sideColumnWidgets[e]||[]},getSideColumnBgColor(e){return this.localPage.layout.sideColumns?.[e]?.backgroundColor||""},getSideColumnStyle(e){const t=this.localPage.layout.sideColumns?.[e];if(!t)return{};const i={};return t.backgroundColor&&(i.backgroundColor=t.backgroundColor,"var(--color-primary-element)"===t.backgroundColor?i.color="var(--color-primary-element-text)":i.color="var(--color-main-text)"),i},setSideColumnBackgroundColor(e,t){this.localPage.layout.sideColumns?.[e]&&(this.localPage.layout.sideColumns[e].backgroundColor=t,this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))},showSideColumnWidgetPicker(e){this.targetSideColumn=e,this.targetRowIndex=null,this.targetColumn=null,this.showWidgetPicker=!0},onSideColumnDragEnd(e){this.$nextTick(()=>{this.syncAllZones()})},editSideColumnWidget(e,t){this.editingWidget=structuredClone(e),this.editingSideColumn=t,this.editingRowIndex=null},updateSideColumnWidget(e,t){const i=this.sideColumnWidgets[t],o=i.findIndex(t=>t.id===e.id);-1!==o&&(i[o]=e,this.localPage.layout.sideColumns[t].widgets=[...i],this.$emit("update",this.localPage))},deleteSideColumnWidget(e,t){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete widget"),this.deleteDialogMessage=this.t("Are you sure you want to delete this widget?"),this.deleteCallback=()=>{const i=this.sideColumnWidgets[e].findIndex(e=>e.id===t);-1!==i&&(this.sideColumnWidgets[e].splice(i,1),this.localPage.layout.sideColumns[e].widgets=[...this.sideColumnWidgets[e]],this.$emit("update",this.localPage))}},initializeHeaderRow(){this.localPage.layout.headerRow||(this.localPage.layout.headerRow={enabled:!1,backgroundColor:"",widgets:[]}),this.headerRowWidgets=this.localPage.layout.headerRow.widgets||[],this.headerRowWidgets.forEach(e=>{e.id||(e.id="widget-"+this.nextWidgetId++)})},addHeaderRow(){this.localPage.layout.headerRow||(this.localPage.layout.headerRow={}),this.localPage.layout.headerRow={enabled:!0,backgroundColor:"",widgets:[]},this.headerRowWidgets=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)},removeHeaderRow(){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Remove header row"),this.deleteDialogMessage=this.t("Are you sure you want to remove the header row?"),this.deleteCallback=()=>{this.localPage.layout.headerRow&&(this.localPage.layout.headerRow.enabled=!1,this.localPage.layout.headerRow.widgets=[],this.headerRowWidgets=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))}},getHeaderRowBgColor(){return this.localPage.layout.headerRow?.backgroundColor||""},getHeaderRowStyle(){const e=this.localPage.layout.headerRow;if(!e)return{};const t={};return e.backgroundColor&&(t.backgroundColor=e.backgroundColor,"var(--color-primary-element)"===e.backgroundColor?t.color="var(--color-primary-element-text)":t.color="var(--color-main-text)"),t},setHeaderRowBackgroundColor(e){this.localPage.layout.headerRow&&(this.localPage.layout.headerRow.backgroundColor=e,this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))},showHeaderRowWidgetPicker(){this.targetHeaderRow=!0,this.targetSideColumn=null,this.targetRowIndex=null,this.targetColumn=null,this.showWidgetPicker=!0},onHeaderRowDragEnd(){this.$nextTick(()=>{this.syncAllZones()})},editHeaderRowWidget(e){this.editingWidget=structuredClone(e),this.editingHeaderRow=!0,this.editingSideColumn=null,this.editingRowIndex=null},updateHeaderRowWidget(e){const t=this.headerRowWidgets.findIndex(t=>t.id===e.id);-1!==t&&(this.headerRowWidgets[t]=e,this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.$emit("update",this.localPage))},deleteHeaderRowWidget(e){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete widget"),this.deleteDialogMessage=this.t("Are you sure you want to delete this widget?"),this.deleteCallback=()=>{const t=this.headerRowWidgets.findIndex(t=>t.id===e);-1!==t&&(this.headerRowWidgets.splice(t,1),this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.$emit("update",this.localPage))}}}};var bo=i(2992),vo={};vo.styleTagTransform=xe(),vo.setAttributes=ke(),vo.insert=be().bind(null,"head"),vo.domAPI=he(),vo.insertStyleElement=fe(),ue()(bo.A,vo),bo.A&&bo.A.locals&&bo.A.locals;const ko=(0,Le.A)(mo,[["render",function(e,t,i,$,B,H){const Q=(0,o.g2)("Palette"),X=(0,o.g2)("NcActionButton"),M=(0,o.g2)("NcActions"),N=(0,o.g2)("Delete"),O=(0,o.g2)("NcButton"),j=(0,o.g2)("DragVertical"),J=(0,o.g2)("Pencil"),K=(0,o.g2)("ContentDuplicate"),G=(0,o.g2)("Widget"),Z=(0,o.g2)("draggable"),q=(0,o.g2)("Plus"),Y=(0,o.g2)("TableRowPlusBefore"),ee=(0,o.g2)("TableColumnPlusBefore"),te=(0,o.g2)("TableColumnPlusAfter"),ie=(0,o.g2)("TableRowPlusAfter"),oe=(0,o.g2)("WidgetPicker"),ae=(0,o.g2)("WidgetEditor"),ne=(0,o.g2)("LinksEditor"),le=(0,o.g2)("NcDialog");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Q3)(" Header Row (spans full width above everything) "),H.hasHeaderRow?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"header-row-editor",style:(0,a.Tr)(H.getHeaderRowStyle())},[(0,o.Lk)("div",l,[(0,o.Lk)("span",r,(0,a.v_)(H.t("Header row")),1),(0,o.Lk)("div",d,[(0,o.bF)(M,null,{icon:(0,o.k6)(()=>[(0,o.bF)(Q,{size:20})]),default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(H.backgroundColors,e=>((0,o.uX)(),(0,o.Wv)(X,{key:e.value,onClick:t=>H.setHeaderRowBackgroundColor(e.value)},{icon:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"color-preview",style:(0,a.Tr)({background:e.cssVar})},null,4)]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:1}),(0,o.bF)(O,{type:"error",onClick:t[0]||(t[0]=e=>H.removeHeaderRow()),"aria-label":H.t("Remove header row")},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:20})]),_:1},8,["aria-label"])])]),(0,o.Lk)("div",s,[(0,o.bF)(Z,{list:B.headerRowWidgets,group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:H.onHeaderRowDragEnd,class:"header-widget-drop-zone"},{item:(0,o.k6)(({element:e})=>[(0,o.Lk)("div",c,[(0,o.Lk)("div",g,[(0,o.Lk)("div",{class:"drag-handle","aria-label":H.t("Drag to reorder")},[(0,o.bF)(j,{size:16})],8,u),H.needsEditButton(e.type)?((0,o.uX)(),(0,o.Wv)(O,{key:0,onClick:t=>H.editHeaderRowWidget(e),type:"secondary","aria-label":H.t("Edit widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,o.Q3)("v-if",!0),(0,o.bF)(O,{onClick:t=>H.duplicateHeaderRowWidget(e),type:"secondary","aria-label":H.t("Duplicate widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,o.bF)(O,{onClick:t=>H.deleteHeaderRowWidget(e.id),type:"error","aria-label":H.t("Delete widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,o.bF)(G,{widget:e,"page-id":i.page.uniqueId,editable:!0,"row-background-color":H.getHeaderRowBgColor(),onUpdate:t[1]||(t[1]=e=>H.updateHeaderRowWidget(e))},null,8,["widget","page-id","row-background-color"])])]),_:1},8,["list","onEnd"]),(0,o.bF)(O,{onClick:t[2]||(t[2]=e=>H.showHeaderRowWidgetPicker()),type:"primary",class:"add-widget-btn"},{icon:(0,o.k6)(()=>[(0,o.bF)(q,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Add Widget")),1)]),_:1})])],4)):(0,o.Q3)("v-if",!0),(0,o.Q3)(" Add Header Row Button (when no header row exists) "),H.hasHeaderRow?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.CE)("div",p,[(0,o.bF)(O,{onClick:t[3]||(t[3]=e=>H.addHeaderRow()),type:"secondary",class:"add-header-row-btn"},{icon:(0,o.k6)(()=>[(0,o.bF)(Y,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Header row")),1)]),_:1})])),(0,o.Lk)("div",h,[(0,o.Q3)(" Left Side Column "),H.hasSideColumn("left")?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"side-column-editor side-column-left",style:(0,a.Tr)(H.getSideColumnStyle("left"))},[(0,o.Lk)("div",m,[(0,o.Lk)("span",b,(0,a.v_)(H.t("Left column")),1),(0,o.Lk)("div",v,[(0,o.bF)(M,null,{icon:(0,o.k6)(()=>[(0,o.bF)(Q,{size:20})]),default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(H.backgroundColors,e=>((0,o.uX)(),(0,o.Wv)(X,{key:e.value,onClick:t=>H.setSideColumnBackgroundColor("left",e.value)},{icon:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"color-preview",style:(0,a.Tr)({background:e.cssVar})},null,4)]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:1}),(0,o.bF)(O,{type:"error",onClick:t[4]||(t[4]=e=>H.removeSideColumn("left")),"aria-label":H.t("Remove column")},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:20})]),_:1},8,["aria-label"])])]),(0,o.Lk)("div",k,[(0,o.bF)(Z,{list:H.getSideColumnWidgets("left"),group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:t[6]||(t[6]=e=>H.onSideColumnDragEnd("left")),class:"side-widget-drop-zone"},{item:(0,o.k6)(({element:e})=>[(0,o.Lk)("div",w,[(0,o.Lk)("div",f,[(0,o.Lk)("div",{class:"drag-handle","aria-label":H.t("Drag to reorder")},[(0,o.bF)(j,{size:16})],8,y),H.needsEditButton(e.type)?((0,o.uX)(),(0,o.Wv)(O,{key:0,onClick:t=>H.editSideColumnWidget(e,"left"),type:"secondary","aria-label":H.t("Edit widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,o.Q3)("v-if",!0),(0,o.bF)(O,{onClick:t=>H.duplicateSideColumnWidget(e,"left"),type:"secondary","aria-label":H.t("Duplicate widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,o.bF)(O,{onClick:t=>H.deleteSideColumnWidget("left",e.id),type:"error","aria-label":H.t("Delete widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,o.bF)(G,{widget:e,"page-id":i.page.uniqueId,editable:!0,"row-background-color":H.getSideColumnBgColor("left"),onUpdate:t[5]||(t[5]=e=>H.updateSideColumnWidget(e,"left"))},null,8,["widget","page-id","row-background-color"])])]),_:1},8,["list"]),(0,o.bF)(O,{onClick:t[7]||(t[7]=e=>H.showSideColumnWidgetPicker("left")),type:"primary",class:"add-widget-btn"},{icon:(0,o.k6)(()=>[(0,o.bF)(q,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Add Widget")),1)]),_:1})])],4)):(0,o.Q3)("v-if",!0),(0,o.Q3)(" Main Content Area "),(0,o.Lk)("div",x,[(0,o.Q3)(" Add Side Column Buttons "),(0,o.Lk)("div",C,[H.hasSideColumn("left")?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(O,{key:0,onClick:t[8]||(t[8]=e=>H.addSideColumn("left")),type:"secondary","aria-label":H.t("Add left column")},{icon:(0,o.k6)(()=>[(0,o.bF)(ee,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Left column")),1)]),_:1},8,["aria-label"])),H.hasSideColumn("right")?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(O,{key:1,onClick:t[9]||(t[9]=e=>H.addSideColumn("right")),type:"secondary","aria-label":H.t("Add right column")},{icon:(0,o.k6)(()=>[(0,o.bF)(te,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Right column")),1)]),_:1},8,["aria-label"]))]),(0,o.Q3)(" Page Grid "),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(B.localPage.layout.rows,(e,n)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:n},[(0,o.Lk)("div",{class:"page-row editable",style:(0,a.Tr)(H.getRowStyle(e))},[(0,o.Lk)("div",W,[(0,o.Lk)("label",L,(0,a.v_)(H.t("Row columns:")),1),((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,t=>(0,o.Lk)("button",{key:t,class:(0,a.C4)([{active:(e.columns||B.localPage.layout.columns)===t},"column-button small"]),onClick:e=>H.setRowColumns(n,t),style:{"margin-right":"4px"}},(0,a.v_)(t),11,P)),64)),(0,o.Q3)(" Background Color Picker "),(0,o.bF)(M,{style:{"margin-left":"8px"}},{icon:(0,o.k6)(()=>[(0,o.bF)(Q,{size:20})]),default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(H.backgroundColors,e=>((0,o.uX)(),(0,o.Wv)(X,{key:e.value,onClick:t=>H.setRowBackgroundColor(n,e.value)},{icon:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"color-preview",style:(0,a.Tr)({background:e.cssVar})},null,4)]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024),(0,o.bF)(O,{onClick:e=>H.deleteRow(n),type:"error","aria-label":H.t("Delete row"),style:{"margin-left":"8px"}},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:20})]),_:1},8,["onClick","aria-label"])]),(0,o.Lk)("div",{class:"page-grid",style:(0,a.Tr)({gridTemplateColumns:`repeat(${(e.columns||B.localPage.layout.columns)??1}, 1fr)`})},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((e.columns||B.localPage.layout.columns)??1,l=>((0,o.uX)(),(0,o.CE)("div",{key:`${n}-${l}`,class:"page-column droppable"},[(0,o.Lk)("div",_,(0,a.v_)(H.t("Column {column}",{column:l})),1),(0,o.bF)(Z,{list:H.getColumnWidgets(n,l),group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:e=>H.onDragEnd(n,l),class:"widget-drop-zone"},{item:(0,o.k6)(({element:l})=>[(0,o.Lk)("div",{class:(0,a.C4)(["widget-wrapper",{editing:B.focusedWidgetId===l.id}])},[(0,o.Q3)(" Floating toolbar - appears on hover "),(0,o.Lk)("div",A,[(0,o.Lk)("div",{class:"drag-handle","aria-label":H.t("Drag to reorder")},[(0,o.bF)(j,{size:16})],8,z),H.needsEditButton(l.type)?((0,o.uX)(),(0,o.Wv)(O,{key:0,onClick:e=>H.editWidget(l,n),type:"secondary","aria-label":H.t("Edit widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,o.Q3)("v-if",!0),(0,o.bF)(O,{onClick:e=>H.duplicateWidget(n,l),type:"secondary","aria-label":H.t("Duplicate widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,o.bF)(O,{onClick:e=>H.deleteWidget(n,l.id),type:"error","aria-label":H.t("Delete widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,o.bF)(G,{widget:l,"page-id":i.page.uniqueId,editable:!0,"row-background-color":e.backgroundColor||"",onUpdate:e=>H.updateWidget(e,n),onFocus:e=>B.focusedWidgetId=l.id,onBlur:t[10]||(t[10]=e=>B.focusedWidgetId=null)},null,8,["widget","page-id","row-background-color","onUpdate","onFocus"])],2)]),_:2},1032,["list","onEnd"]),(0,o.Lk)("div",R,[(0,o.bF)(O,{onClick:e=>H.showWidgetPickerForColumn(n,l),type:"primary",class:"add-widget-btn"},{icon:(0,o.k6)(()=>[(0,o.bF)(q,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Add Widget")),1)]),_:1},8,["onClick"])])]))),128))],4)],4),(0,o.Q3)(" Insert Row Button "),(0,o.Lk)("div",S,[(0,o.bF)(O,{onClick:e=>H.insertRow(n+1),type:"secondary",class:"insert-row-btn"},{icon:(0,o.k6)(()=>[(0,o.bF)(ie,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Insert Row")),1)]),_:1},8,["onClick"])])],64))),128)),(0,o.Q3)(" Widget Picker Modal "),B.showWidgetPicker?((0,o.uX)(),(0,o.Wv)(oe,{key:0,onClose:t[11]||(t[11]=e=>B.showWidgetPicker=!1),onSelect:H.addWidget},null,8,["onSelect"])):(0,o.Q3)("v-if",!0),(0,o.Q3)(" Widget Editor Modal "),B.editingWidget&&"links"!==B.editingWidget.type?((0,o.uX)(),(0,o.Wv)(ae,{key:1,widget:B.editingWidget,"page-id":i.page.uniqueId,onClose:t[12]||(t[12]=e=>B.editingWidget=null),onSave:H.saveWidget},null,8,["widget","page-id","onSave"])):(0,o.Q3)("v-if",!0),(0,o.Q3)(" Links Editor Modal "),B.editingWidget&&"links"===B.editingWidget.type?((0,o.uX)(),(0,o.Wv)(ne,{key:2,widget:B.editingWidget,onClose:t[13]||(t[13]=e=>B.editingWidget=null),onSave:H.saveWidget},null,8,["widget","onSave"])):(0,o.Q3)("v-if",!0),(0,o.Q3)(" Delete Confirmation Dialog "),B.showDeleteDialog?((0,o.uX)(),(0,o.Wv)(le,{key:3,name:B.deleteDialogTitle,onClosing:H.cancelDelete},{actions:(0,o.k6)(()=>[(0,o.bF)(O,{onClick:H.cancelDelete,type:"secondary"},{default:(0,o.k6)(()=>[(0,o.eW)((0,a.v_)(H.t("Cancel")),1)]),_:1},8,["onClick"]),(0,o.bF)(O,{onClick:H.confirmDelete,type:"error"},{default:(0,o.k6)(()=>[(0,o.eW)((0,a.v_)(H.t("Delete")),1)]),_:1},8,["onClick"])]),default:(0,o.k6)(()=>[(0,o.Lk)("p",null,(0,a.v_)(B.deleteDialogMessage),1)]),_:1},8,["name","onClosing"])):(0,o.Q3)("v-if",!0)]),(0,o.Q3)(" Right Side Column "),H.hasSideColumn("right")?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"side-column-editor side-column-right",style:(0,a.Tr)(H.getSideColumnStyle("right"))},[(0,o.Lk)("div",E,[(0,o.Lk)("span",U,(0,a.v_)(H.t("Right column")),1),(0,o.Lk)("div",T,[(0,o.bF)(M,null,{icon:(0,o.k6)(()=>[(0,o.bF)(Q,{size:20})]),default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(H.backgroundColors,e=>((0,o.uX)(),(0,o.Wv)(X,{key:e.value,onClick:t=>H.setSideColumnBackgroundColor("right",e.value)},{icon:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"color-preview",style:(0,a.Tr)({background:e.cssVar})},null,4)]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:1}),(0,o.bF)(O,{type:"error",onClick:t[14]||(t[14]=e=>H.removeSideColumn("right")),"aria-label":H.t("Remove column")},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:20})]),_:1},8,["aria-label"])])]),(0,o.Lk)("div",F,[(0,o.bF)(Z,{list:H.getSideColumnWidgets("right"),group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:t[16]||(t[16]=e=>H.onSideColumnDragEnd("right")),class:"side-widget-drop-zone"},{item:(0,o.k6)(({element:e})=>[(0,o.Lk)("div",I,[(0,o.Lk)("div",D,[(0,o.Lk)("div",{class:"drag-handle","aria-label":H.t("Drag to reorder")},[(0,o.bF)(j,{size:16})],8,V),H.needsEditButton(e.type)?((0,o.uX)(),(0,o.Wv)(O,{key:0,onClick:t=>H.editSideColumnWidget(e,"right"),type:"secondary","aria-label":H.t("Edit widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,o.Q3)("v-if",!0),(0,o.bF)(O,{onClick:t=>H.duplicateSideColumnWidget(e,"right"),type:"secondary","aria-label":H.t("Duplicate widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,o.bF)(O,{onClick:t=>H.deleteSideColumnWidget("right",e.id),type:"error","aria-label":H.t("Delete widget")},{icon:(0,o.k6)(()=>[(0,o.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,o.bF)(G,{widget:e,"page-id":i.page.uniqueId,editable:!0,"row-background-color":H.getSideColumnBgColor("right"),onUpdate:t[15]||(t[15]=e=>H.updateSideColumnWidget(e,"right"))},null,8,["widget","page-id","row-background-color"])])]),_:1},8,["list"]),(0,o.bF)(O,{onClick:t[17]||(t[17]=e=>H.showSideColumnWidgetPicker("right")),type:"primary",class:"add-widget-btn"},{icon:(0,o.k6)(()=>[(0,o.bF)(q,{size:20})]),default:(0,o.k6)(()=>[(0,o.eW)(" "+(0,a.v_)(H.t("Add Widget")),1)]),_:1})])],4)):(0,o.Q3)("v-if",!0)])])}],["__scopeId","data-v-f22ccb22"]])},7245:(e,t,i)=>{i.d(t,{A:()=>r});var o=i(1601),a=i.n(o),n=i(6314),l=i.n(n)()(a());l.push([e.id,"\n.links-editor-modal[data-v-59890675] .modal-container {\n  max-width: 900px !important;\n}\n.links-editor-content[data-v-59890675] {\n  padding: 20px;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n.form-section[data-v-59890675] {\n  margin-bottom: 30px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid var(--color-border);\n}\n.form-section[data-v-59890675]:last-of-type {\n  border-bottom: none;\n}\n.form-section h3[data-v-59890675] {\n  margin: 0 0 15px 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--color-main-text);\n}\n.section-header[data-v-59890675] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n.section-header h3[data-v-59890675] {\n  margin: 0;\n}\n.form-group[data-v-59890675] {\n  margin-bottom: 15px;\n}\n.form-group label[data-v-59890675] {\n  display: block;\n  margin-bottom: 6px;\n  font-weight: 500;\n  font-size: 13px;\n  color: var(--color-main-text);\n}\n.widget-input[data-v-59890675] {\n  width: 100%;\n  padding: 8px 12px;\n  border: 2px solid var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  font-size: 14px;\n}\n.widget-input[data-v-59890675]:focus {\n  outline: none;\n  border-color: var(--color-primary-element);\n}\n.color-presets[data-v-59890675] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.color-preset-btn[data-v-59890675] {\n  padding: 8px 16px;\n  border: 2px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n}\n.color-preset-btn.small[data-v-59890675] {\n  padding: 6px 12px;\n  font-size: 12px;\n}\n.color-preset-btn[data-v-59890675]:hover {\n  background: var(--color-background-hover);\n  border-color: var(--color-primary);\n}\n.color-preset-btn.active[data-v-59890675] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.links-list[data-v-59890675] {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n.link-editor-item[data-v-59890675] {\n  display: flex;\n  gap: 15px;\n  align-items: flex-start;\n  padding: 15px;\n  background: var(--color-background-hover);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n}\n.link-number[data-v-59890675] {\n  flex-shrink: 0;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-primary-element);\n  color: white;\n  border-radius: 50%;\n  font-weight: 600;\n  font-size: 13px;\n}\n.link-fields[data-v-59890675] {\n  flex: 1;\n}\n.form-row[data-v-59890675] {\n  display: flex;\n  gap: 15px;\n  margin-bottom: 10px;\n}\n.form-row[data-v-59890675]:last-child {\n  margin-bottom: 0;\n}\n.flex-1[data-v-59890675] {\n  flex: 1;\n}\n.remove-link-btn[data-v-59890675] {\n  flex-shrink: 0;\n  padding: 8px;\n  background: transparent;\n  border: none;\n  color: var(--color-error);\n  cursor: pointer;\n  border-radius: var(--border-radius);\n  transition: all 0.2s;\n}\n.remove-link-btn[data-v-59890675]:hover {\n  background: var(--color-error);\n  color: white;\n}\n.icon-option[data-v-59890675] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.empty-state[data-v-59890675] {\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--color-text-maxcontrast);\n}\n.empty-state svg[data-v-59890675] {\n  margin-bottom: 10px;\n  color: var(--color-text-maxcontrast);\n}\n.empty-state p[data-v-59890675] {\n  margin: 0;\n  font-size: 14px;\n}\n.modal-footer[data-v-59890675] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  padding-top: 20px;\n  border-top: 1px solid var(--color-border);\n  margin-top: 20px;\n}\n\n/* Mobile responsiveness */\n@media (max-width: 768px) {\n.form-row[data-v-59890675] {\n    flex-direction: column;\n    gap: 10px;\n}\n.link-editor-item[data-v-59890675] {\n    flex-direction: column;\n}\n.remove-link-btn[data-v-59890675] {\n    align-self: flex-end;\n}\n}\n",""]);const r=l},8294:(e,t,i)=>{i.d(t,{A:()=>r});var o=i(1601),a=i.n(o),n=i(6314),l=i.n(n)()(a());l.push([e.id,"\n.widget-picker-content[data-v-15ea2c63] {\n  padding: 12px;\n}\n.widget-types[data-v-15ea2c63] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n  max-width: 400px;\n}\n.widget-type-card[data-v-15ea2c63] {\n  padding: 20px 16px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  gap: 8px;\n  background: var(--color-main-background);\n  min-height: 80px;\n  justify-content: center;\n}\n.widget-type-card[data-v-15ea2c63]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-background-hover);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n}\n.widget-icon[data-v-15ea2c63] {\n  color: var(--color-text-maxcontrast);\n}\n.widget-info[data-v-15ea2c63] {\n  width: 100%;\n}\n.widget-info h3[data-v-15ea2c63] {\n  margin: 0;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--color-main-text);\n}\n",""]);const r=l},9033:(e,t,i)=>{i.d(t,{A:()=>r});var o=i(1601),a=i.n(o),n=i(6314),l=i.n(n)()(a());l.push([e.id,'\n/* Make modal wider for better editing experience */\n.widget-editor-modal[data-v-1d19c6b6] .modal-container {\n  max-width: 1200px !important;\n}\n\n/* Remove all padding from modal content wrapper */\n[data-v-1d19c6b6] .modal-wrapper--large .modal-container {\n  padding: 0;\n}\n[data-v-1d19c6b6] .modal-wrapper .modal-container .modal-container__content {\n  padding: 0;\n  margin: 0;\n}\n[data-v-1d19c6b6] .modal-container > * {\n  padding: 0;\n}\n.widget-editor-content[data-v-1d19c6b6] {\n  padding: 0;\n  width: 100%;\n  margin: 0;\n}\n.form-group[data-v-1d19c6b6] {\n  margin-bottom: 20px;\n  padding: 0 20px;\n}\n.full-width-editor[data-v-1d19c6b6] {\n  padding: 0;\n  margin: 0;\n}\n.full-width-editor label[data-v-1d19c6b6] {\n  padding: 20px 20px 0 20px;\n  display: block;\n  margin: 0;\n}\n.form-group label[data-v-1d19c6b6] {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n  color: var(--color-main-text);\n}\n.form-group .hint[data-v-1d19c6b6] {\n  margin-top: 4px;\n  margin-bottom: 0;\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n}\n.form-group .hint.uploading[data-v-1d19c6b6] {\n  color: var(--color-primary);\n  font-weight: 500;\n}\n.heading-text-input[data-v-1d19c6b6],\n.heading-level-select[data-v-1d19c6b6],\n.widget-input[data-v-1d19c6b6] {\n  width: 100%;\n  padding: 8px 12px;\n  border: 2px solid var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  font-size: 14px;\n}\n.heading-text-input[data-v-1d19c6b6],\n.widget-input[data-v-1d19c6b6] {\n  cursor: text;\n}\n.heading-level-select[data-v-1d19c6b6] {\n  cursor: pointer;\n}\n.heading-text-input[data-v-1d19c6b6]:focus,\n.heading-level-select[data-v-1d19c6b6]:focus,\n.widget-input[data-v-1d19c6b6]:focus {\n  outline: none;\n  border-color: var(--color-primary-element);\n}\n.image-preview[data-v-1d19c6b6] {\n  margin: 15px 0;\n  max-width: 100%;\n}\n.image-preview img[data-v-1d19c6b6] {\n  max-width: 100%;\n  height: auto;\n  border-radius: var(--border-radius-large);\n  border: 1px solid var(--color-border);\n}\n\n/* Video preview and upload styles */\n.video-preview[data-v-1d19c6b6] {\n  margin: 15px 0;\n}\n.video-preview .preview-container[data-v-1d19c6b6] {\n  border-radius: var(--border-radius-large);\n  overflow: hidden;\n  border: 1px solid var(--color-border);\n  background: var(--color-background-dark);\n}\n.video-preview-hint[data-v-1d19c6b6] {\n  margin: 15px 0;\n  padding: 20px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius-large);\n  text-align: center;\n}\n\n/* Blocked video preview - matches Widget.vue styling */\n.video-blocked-preview[data-v-1d19c6b6] {\n  padding: 24px;\n  background: var(--color-background-hover);\n  border: 2px dashed var(--color-warning);\n  border-radius: var(--border-radius-large);\n  text-align: center;\n}\n.video-blocked-preview .blocked-icon[data-v-1d19c6b6] {\n  font-size: 48px;\n  line-height: 1;\n  margin-bottom: 12px;\n  filter: grayscale(0);\n}\n.video-blocked-preview .blocked-title[data-v-1d19c6b6] {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--color-warning-text);\n  background-color: var(--color-warning);\n  display: inline-block;\n  padding: 4px 12px;\n  border-radius: var(--border-radius);\n  margin: 0 0 12px 0;\n}\n.video-blocked-preview .blocked-url[data-v-1d19c6b6] {\n  margin: 12px 0;\n  padding: 8px 12px;\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius);\n  max-width: 100%;\n  overflow: hidden;\n}\n.video-blocked-preview .blocked-url .url-label[data-v-1d19c6b6] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--color-text-maxcontrast);\n  margin-right: 8px;\n}\n.video-blocked-preview .blocked-url .url-value[data-v-1d19c6b6] {\n  font-size: 12px;\n  font-family: var(--font-monospace, monospace);\n  color: var(--color-main-text);\n  word-break: break-all;\n  background: none;\n  padding: 0;\n}\n.video-blocked-preview .blocked-hint[data-v-1d19c6b6] {\n  font-size: 13px;\n  color: var(--color-text-maxcontrast);\n  margin: 0;\n  font-style: italic;\n}\n.current-video[data-v-1d19c6b6] {\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n  color: var(--color-text-maxcontrast);\n}\n.detected-platform[data-v-1d19c6b6] {\n  margin-top: 8px;\n  padding: 6px 10px;\n  background: var(--color-primary-element-light);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n  color: var(--color-primary);\n}\n.modal-footer[data-v-1d19c6b6] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  padding: 20px;\n  border-top: 1px solid var(--color-border);\n  margin-top: 0;\n}\n\n/* Rich Text Editor Toolbar */\n.rich-text-toolbar[data-v-1d19c6b6] {\n  display: flex;\n  gap: 4px;\n  padding: 12px 20px;\n  background: var(--color-background-dark);\n  border: 1px solid var(--color-border);\n  border-left: none;\n  border-right: none;\n  border-radius: 0;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.toolbar-btn[data-v-1d19c6b6] {\n  padding: 6px 12px;\n  background: var(--color-main-background);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  color: var(--color-main-text);\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.toolbar-btn[data-v-1d19c6b6]:hover {\n  background: var(--color-background-hover);\n  border-color: var(--color-primary);\n}\n.toolbar-btn.is-active[data-v-1d19c6b6] {\n  background: var(--color-primary-element-light);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.toolbar-divider[data-v-1d19c6b6] {\n  width: 1px;\n  height: 24px;\n  background: var(--color-border);\n  margin: 0 4px;\n}\n\n/* Tiptap Editor Styles */\n.rich-text-editor[data-v-1d19c6b6] {\n  width: 100%;\n  border: 1px solid var(--color-border);\n  border-top: none;\n  border-left: none;\n  border-right: none;\n  border-radius: 0;\n  background: var(--color-main-background);\n}\n.rich-text-editor[data-v-1d19c6b6] .tiptap {\n  width: 100%;\n  max-width: 100%;\n}\n\n/* Force full width using custom class to override Tiptap inline styles */\n.rich-text-editor[data-v-1d19c6b6] .intravox-editor-full-width {\n  width: 100% !important;\n  min-height: 400px;\n  max-height: 600px;\n  padding: 20px;\n  color: var(--color-main-text);\n  font-family: var(--font-face);\n  font-size: 14px;\n  line-height: 1.5;\n  overflow-y: auto;\n  outline: none;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror {\n  width: 100%;\n  min-height: 400px;\n  max-height: 600px;\n  padding: 20px;\n  color: var(--color-main-text);\n  font-family: var(--font-face);\n  font-size: 14px;\n  line-height: 1.5;\n  overflow-y: auto;\n  outline: none;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror:focus {\n  outline: none;\n}\n\n/* Rich text content styling */\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror p {\n  margin: 0;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror p + p {\n  margin-top: 0;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror ul,\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror ol {\n  padding-left: 1.5em;\n  margin: 0.5em 0;\n  list-style-position: outside;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror ul {\n  list-style-type: disc;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror ol {\n  list-style-type: decimal;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror li {\n  margin: 0.25em 0;\n  display: list-item;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror li p {\n  margin: 0;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror strong {\n  font-weight: 700;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror em {\n  font-style: italic;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror u {\n  text-decoration: underline;\n}\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror s {\n  text-decoration: line-through;\n}\n\n/* Placeholder */\n.rich-text-editor[data-v-1d19c6b6] .ProseMirror p.is-editor-empty:first-child::before {\n  content: attr(data-placeholder);\n  float: left;\n  color: var(--color-text-maxcontrast);\n  pointer-events: none;\n  height: 0;\n}\n.size-presets[data-v-1d19c6b6] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.size-preset-btn[data-v-1d19c6b6] {\n  padding: 8px 16px;\n  border: 2px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n}\n.size-preset-btn[data-v-1d19c6b6]:hover {\n  background: var(--color-background-hover);\n  border-color: var(--color-primary);\n}\n.size-preset-btn.active[data-v-1d19c6b6] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.custom-size-inputs[data-v-1d19c6b6] {\n  display: flex;\n  gap: 15px;\n}\n.size-input-group[data-v-1d19c6b6] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.size-label[data-v-1d19c6b6] {\n  font-size: 14px;\n  color: var(--color-text-maxcontrast);\n  min-width: 60px;\n}\n.size-input[data-v-1d19c6b6] {\n  flex: 1;\n  padding: 8px 12px;\n  border: 2px solid var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  font-size: 14px;\n}\n.size-input[data-v-1d19c6b6]:focus {\n  outline: none;\n  border-color: var(--color-primary-element);\n}\n.size-hint[data-v-1d19c6b6] {\n  margin-top: 8px;\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n  font-style: italic;\n}\n\n/* Checkbox group styling */\n.checkbox-group[data-v-1d19c6b6] {\n  margin-bottom: 12px;\n}\n.link-target-options[data-v-1d19c6b6] {\n  margin-top: 8px;\n  margin-bottom: 4px;\n}\n.checkbox-label[data-v-1d19c6b6] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  color: var(--color-main-text);\n}\n.checkbox-label input[type="checkbox"][data-v-1d19c6b6] {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  accent-color: var(--color-primary);\n}\n.checkbox-hint[data-v-1d19c6b6] {\n  margin-top: 4px;\n  margin-left: 26px;\n  margin-bottom: 0;\n}\n',""]);const r=l}}]);