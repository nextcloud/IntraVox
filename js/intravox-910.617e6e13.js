"use strict";(self.webpackChunknextcloud_intravox=self.webpackChunknextcloud_intravox||[]).push([[910],{9165(e,t,i){i.d(t,{Brj:()=>d,DvY:()=>l,EYN:()=>u,IyB:()=>r,K5o:()=>s,NZC:()=>a,VR:()=>m,ZL5:()=>p,bTm:()=>f,dgQ:()=>n,fEr:()=>c,hyP:()=>o});var n="M12,5A3.5,3.5 0 0,0 8.5,8.5A3.5,3.5 0 0,0 12,12A3.5,3.5 0 0,0 15.5,8.5A3.5,3.5 0 0,0 12,5M12,7A1.5,1.5 0 0,1 13.5,8.5A1.5,1.5 0 0,1 12,10A1.5,1.5 0 0,1 10.5,8.5A1.5,1.5 0 0,1 12,7M5.5,8A2.5,2.5 0 0,0 3,10.5C3,11.44 3.53,12.25 4.29,12.68C4.65,12.88 5.06,13 5.5,13C5.94,13 6.35,12.88 6.71,12.68C7.08,12.47 7.39,12.17 7.62,11.81C6.89,10.86 6.5,9.7 6.5,8.5C6.5,8.41 6.5,8.31 6.5,8.22C6.2,8.08 5.86,8 5.5,8M18.5,8C18.14,8 17.8,8.08 17.5,8.22C17.5,8.31 17.5,8.41 17.5,8.5C17.5,9.7 17.11,10.86 16.38,11.81C16.5,12 16.63,12.15 16.78,12.3C16.94,12.45 17.1,12.58 17.29,12.68C17.65,12.88 18.06,13 18.5,13C18.94,13 19.35,12.88 19.71,12.68C20.47,12.25 21,11.44 21,10.5A2.5,2.5 0 0,0 18.5,8M12,14C9.66,14 5,15.17 5,17.5V19H19V17.5C19,15.17 14.34,14 12,14M4.71,14.55C2.78,14.78 0,15.76 0,17.5V19H3V17.07C3,16.06 3.69,15.22 4.71,14.55M19.29,14.55C20.31,15.22 21,16.06 21,17.07V19H24V17.5C24,15.76 21.22,14.78 19.29,14.55M12,16C13.53,16 15.24,16.5 16.23,17H7.77C8.76,16.5 10.47,16 12,16Z",r="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z",s="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z",a="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",o="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",l="M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z",c="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",u="M7 14C5.9 14 5 13.1 5 12S5.9 10 7 10 9 10.9 9 12 8.1 14 7 14M12.6 10C11.8 7.7 9.6 6 7 6C3.7 6 1 8.7 1 12S3.7 18 7 18C9.6 18 11.8 16.3 12.6 14H16V18H20V14H23V10H12.6Z",d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",m="M15,20A1,1 0 0,0 14,19H13V17H17A2,2 0 0,0 19,15V5A2,2 0 0,0 17,3H7A2,2 0 0,0 5,5V15A2,2 0 0,0 7,17H11V19H10A1,1 0 0,0 9,20H2V22H9A1,1 0 0,0 10,23H14A1,1 0 0,0 15,22H22V20H15M7,15V5H17V15H7Z",p="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",f="M21.41 11.58L12.41 2.58A2 2 0 0 0 11 2H4A2 2 0 0 0 2 4V11A2 2 0 0 0 2.59 12.42L11.59 21.42A2 2 0 0 0 13 22A2 2 0 0 0 14.41 21.41L21.41 14.41A2 2 0 0 0 22 13A2 2 0 0 0 21.41 11.58M13 20L4 11V4H11L20 13M6.5 5A1.5 1.5 0 1 1 5 6.5A1.5 1.5 0 0 1 6.5 5Z"},77910(e,t,i){i.r(t),i.d(t,{default:()=>L});var n=i(20641),r=i(50953),s=i(53751),a=i(90033),o=i(9165),l=i(15446),c=i(86296),u=i(94434),d=i(60129),m=i(38040),p=i(10997),f=i(43016),v=i(87651),h=i(50240);const g=["src"],y={key:1},_=["src"],w={key:1},k=(0,n.pM)({__name:"ConflictPickerEntry",props:(0,n.zz)({existing:{},incoming:{}},{existingSelected:{type:Boolean,required:!0},existingSelectedModifiers:{},incomingSelected:{type:Boolean,required:!0},incomingSelectedModifiers:{}}),emits:["update:existingSelected","update:incomingSelected"],setup(e,{expose:t}){const i=(0,n.fn)(e,"existingSelected"),s=(0,n.fn)(e,"incomingSelected"),l=e;t({validate:function(){h.value=s.value||i.value?"":(0,v.t)("You need to choose at least one conflict solution")}});const u=e=>"FileSystemEntry"in window&&e instanceof window.FileSystemEntry,h=(0,r.KR)(""),k=(0,r.KR)(),b=(0,r.KR)(),E=(0,r.KR)(),A=(0,r.KR)(),C=(0,r.KR)(),L=(0,r.KR)(),R=(0,n.EW)(()=>s.value||i.value),S=(0,n.EW)(()=>l.existing.type===m.pt.Folder),x=(0,n.EW)(()=>u(l.incoming)?l.incoming.isDirectory:!(l.incoming instanceof File)&&l.incoming.type===m.pt.Folder);function M(e){return e.size}function F(e){if(!(e instanceof File))return e.mtime;{const t=e.lastModified;if(t>0)return new Date(t)}}async function D(e){return e instanceof File?await async function(e){if(!e.type.startsWith("image/"))return;const{resolve:t,promise:i}=Promise.withResolvers(),n=new FileReader;return n.onload=async i=>{const n=i?.target?.result;if(n instanceof ArrayBuffer){const i=new Blob([n],{type:e.type}),r=URL.createObjectURL(i);return void t(r)}t(void 0)},n.readAsArrayBuffer(e),i}(e):(0,f.g)(e,{size:64})?.toString()}return(0,n.wB)(()=>l.existing,async()=>{A.value=F(l.existing),L.value=M(l.existing),b.value=await D(l.existing)}),(0,n.wB)(()=>l.incoming,async()=>{const e=await async function(e){return"FileSystemFileEntry"in window&&e instanceof window.FileSystemFileEntry?await new Promise((t,i)=>e.file(t,i)):u(e)?null:e}(l.incoming);null!==e&&(E.value=F(e),C.value=M(e),k.value=await D(e))}),(t,l)=>((0,n.uX)(),(0,n.CE)("fieldset",{class:(0,a.C4)(t.$style.pickerEntry)},[(0,n.Lk)("legend",null,(0,a.v_)(e.existing.displayname),1),(0,n.bF)((0,r.R1)(c.A),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),error:!!h.value,helperText:h.value,required:!R.value},{default:(0,n.k6)(()=>[(0,n.Lk)("span",{class:(0,a.C4)(t.$style.pickerEntryItem)},[k.value?((0,n.uX)(),(0,n.CE)("img",{key:1,class:(0,a.C4)(t.$style.pickerEntryPreview),src:k.value,alt:"",loading:"lazy"},null,10,g)):((0,n.uX)(),(0,n.Wv)((0,r.R1)(d.A),{key:0,class:(0,a.C4)([t.$style.pickerEntryIcon,{[t.$style.pickerEntryIcon_folder]:S.value}]),path:x.value?(0,r.R1)(o.fEr):(0,r.R1)(o.DvY),size:48},null,8,["class","path"])),(0,n.Lk)("span",{class:(0,a.C4)(t.$style.pickerEntryDescription)},[(0,n.Lk)("span",null,(0,a.v_)((0,r.R1)(v.t)("New version")),1),E.value?((0,n.uX)(),(0,n.Wv)((0,r.R1)(p.A),{key:0,timestamp:E.value,relativeTime:!1,format:{timeStyle:"short",dateStyle:"medium"}},null,8,["timestamp"])):((0,n.uX)(),(0,n.CE)("span",y,(0,a.v_)((0,r.R1)(v.t)("Last modified date unknown")),1)),(0,n.Lk)("span",null,(0,a.v_)(C.value),1)],2)],2)]),_:1},8,["modelValue","error","helperText","required"]),(0,n.bF)((0,r.R1)(c.A),{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),error:!!h.value,helperText:h.value,required:!R.value},{default:(0,n.k6)(()=>[(0,n.Lk)("span",{class:(0,a.C4)(t.$style.pickerEntryItem)},[b.value?((0,n.uX)(),(0,n.CE)("img",{key:1,class:(0,a.C4)(t.$style.pickerEntryPreview),src:b.value,alt:"",loading:"lazy"},null,10,_)):((0,n.uX)(),(0,n.Wv)((0,r.R1)(d.A),{key:0,class:(0,a.C4)([t.$style.pickerEntryIcon,{[t.$style.pickerEntryIcon_folder]:S.value}]),path:S.value?(0,r.R1)(o.fEr):(0,r.R1)(o.DvY),size:48},null,8,["class","path"])),(0,n.Lk)("span",{class:(0,a.C4)(t.$style.pickerEntryDescription)},[(0,n.Lk)("span",null,(0,a.v_)((0,r.R1)(v.t)("Existing version")),1),A.value?((0,n.uX)(),(0,n.Wv)((0,r.R1)(p.A),{key:0,timestamp:A.value,relativeTime:!1,format:{timeStyle:"short",dateStyle:"medium"}},null,8,["timestamp"])):((0,n.uX)(),(0,n.CE)("span",w,(0,a.v_)((0,r.R1)(v.t)("Last modified date unknown")),1)),(0,n.Lk)("span",null,(0,a.v_)(L.value),1)],2)],2)]),_:1},8,["modelValue","error","helperText","required"])],2))}}),b=(0,h._)(k,[["__cssModules",{$style:{pickerEntry:"_pickerEntry_xk2pl_1",pickerEntryItem:"_pickerEntryItem_xk2pl_5",pickerEntryIcon:"_pickerEntryIcon_xk2pl_11",pickerEntryPreview:"_pickerEntryPreview_xk2pl_12",pickerEntryIcon_folder:"_pickerEntryIcon_folder_xk2pl_24",pickerEntryDescription:"_pickerEntryDescription_xk2pl_34"}}]]),E={class:"hidden-visually"},A={key:0,class:"hidden-visually"},C=(0,n.pM)({__name:"ConflictPicker",props:{container:{},dirname:{},existing:{},incoming:{},recursiveUpload:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const i=e,m=t,p=(0,v.t)("You need to select at least one version of each file to continue."),f=(0,n.rk)("form"),h=(0,n.rk)("conflictEntry"),g=(0,r.IJ)([]),y=(0,r.IJ)([]),_=(0,n.EW)(()=>0===g.value.length),w=(0,n.EW)(()=>g.value.length===i.incoming.length),k=(0,n.EW)(()=>!w.value&&!_.value),C=(0,n.EW)(()=>y.value.length===i.existing.length),L=(0,n.EW)(()=>!C.value&&!_.value),R=(0,n.EW)(()=>{for(const e of i.incoming)if(!y.value.includes(e)&&!g.value.includes(e))return!1;return!0}),S=(0,n.EW)(()=>""!==i.dirname?.trim()?(0,v.n)("%n file conflict in {dirname}","%n file conflicts in {dirname}",i.incoming.length,{dirname:i.dirname}):(0,v.n)("%n file conflict","%n files conflict",i.incoming.length));function x(){m("close",null)}function M(){v.l.debug("Conflict skipped. Ignoring all conflicting files"),m("close",{selected:[],renamed:[],skipped:[...i.incoming]})}function F(e){e?(v.l.debug("Selected all new files"),g.value=[...i.incoming]):(v.l.debug("Cleared new selection"),g.value=[])}function D(e){e?(v.l.debug("Selected all existing files"),y.value=[...i.incoming]):(v.l.debug("Cleared old selection"),y.value=[])}function V(){if(!R.value){for(const e of h.value)e.validate();return f.value.reportValidity(),void(0,v.s)(p)}const e=g.value.filter(e=>!y.value.includes(e)),t=g.value.filter(e=>y.value.includes(e)),i=y.value.filter(e=>!g.value.includes(e));m("close",{renamed:t,selected:e,skipped:i})}return(t,i)=>((0,n.uX)(),(0,n.Wv)((0,r.R1)(u.A),{container:e.container,class:(0,a.C4)(t.$style.picker),name:S.value,size:"large",onClosing:x},{actions:(0,n.k6)(()=>[(0,n.bF)((0,r.R1)(l.A),{title:(0,r.R1)(v.t)("Cancel the entire operation"),"data-cy-conflict-picker-cancel":"",variant:"tertiary",onClick:x},{icon:(0,n.k6)(()=>[(0,n.bF)((0,r.R1)(d.A),{path:(0,r.R1)(o.hyP)},null,8,["path"])]),default:(0,n.k6)(()=>[(0,n.eW)(" "+(0,a.v_)((0,r.R1)(v.t)("Cancel")),1)]),_:1},8,["title"]),(0,n.Lk)("span",{class:(0,a.C4)(t.$style.pickerActionSeparator)},null,2),(0,n.bF)((0,r.R1)(l.A),{onClick:M},{icon:(0,n.k6)(()=>[(0,n.bF)((0,r.R1)(d.A),{path:(0,r.R1)(o.hyP)},null,8,["path"])]),default:(0,n.k6)(()=>[(0,n.eW)(" "+(0,a.v_)(1===e.incoming.length?(0,r.R1)(v.t)("Skip this file"):(0,r.R1)(v.n)("Skip %n file","Skip %n files",e.incoming.length)),1)]),_:1}),(0,n.bF)((0,r.R1)(l.A),{"aria-disabled":!R.value,class:(0,a.C4)([t.$style.pickerActionSubmit,{[t.$style.pickerActionSubmit_disabled]:!R.value}]),title:R.value?"":(0,r.R1)(p),type:"submit",variant:"primary",onClick:(0,s.D$)(V,["stop","prevent"])},{icon:(0,n.k6)(()=>[(0,n.bF)((0,r.R1)(d.A),{directional:"",path:(0,r.R1)(o.K5o)},null,8,["path"])]),default:(0,n.k6)(()=>[(0,n.eW)(" "+(0,a.v_)((0,r.R1)(v.t)("Continue"))+" ",1),R.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",A,(0,a.v_)((0,r.R1)(p)),1))]),_:1},8,["aria-disabled","class","title"])]),default:(0,n.k6)(()=>[(0,n.Lk)("div",{class:(0,a.C4)(t.$style.pickerHeader)},[(0,n.Lk)("p",{id:"conflict-picker-description",class:(0,a.C4)(t.$style.pickerDescription)},[(0,n.eW)((0,a.v_)((0,r.R1)(v.t)("Which files do you want to keep?")),1),i[0]||(i[0]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" "+(0,a.v_)((0,r.R1)(v.t)("If you select both versions, the incoming file will have a number added to its name.")),1),i[1]||(i[1]=(0,n.Lk)("br",null,null,-1)),e.recursiveUpload?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)((0,a.v_)((0,r.R1)(v.t)("When an incoming folder is selected, the content is written into the existing folder and a recursive conflict resolution is performed.")),1)],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,a.v_)((0,r.R1)(v.t)("When an incoming folder is selected, any conflicting files within it will also be overwritten.")),1)],64))],2)],2),(0,n.Lk)("form",{ref:"form","aria-labelledby":"conflict-picker-description",class:(0,a.C4)(t.$style.pickerForm),onSubmit:(0,s.D$)(V,["prevent","stop"])},[(0,n.Lk)("fieldset",{class:(0,a.C4)(t.$style.pickerSelectAll)},[(0,n.Lk)("legend",E,(0,a.v_)((0,r.R1)(v.t)("Select all checkboxes")),1),(0,n.bF)((0,r.R1)(c.A),{modelValue:w.value,indeterminate:k.value,"onUpdate:modelValue":F},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)((0,r.R1)(v.t)("Select all new files")),1)]),_:1},8,["modelValue","indeterminate"]),(0,n.bF)((0,r.R1)(c.A),{modelValue:C.value,indeterminate:L.value,"onUpdate:modelValue":D},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)((0,r.R1)(v.t)("Select all existing files")),1)]),_:1},8,["modelValue","indeterminate"])],2),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.existing,(t,i)=>((0,n.uX)(),(0,n.Wv)(b,{ref_for:!0,ref:"conflictEntry",key:t.fileid,incoming:e.incoming[i],existing:t,incomingSelected:g.value.includes(e.incoming[i]),existingSelected:y.value.includes(e.incoming[i]),"onUpdate:existingSelected":t=>{return n=e.incoming[i],void(y.value.includes(n)?y.value=y.value.filter(e=>e!==n):y.value=[...y.value,n]);var n},"onUpdate:incomingSelected":t=>{return n=e.incoming[i],void(g.value.includes(n)?g.value=g.value.filter(e=>e!==n):g.value=[...g.value,n]);var n}},null,8,["incoming","existing","incomingSelected","existingSelected","onUpdate:existingSelected","onUpdate:incomingSelected"]))),128))],34)]),_:1},8,["container","class","name"]))}}),L=(0,h._)(C,[["__cssModules",{$style:{picker:"_picker_6q4ek_1",pickerHeader:"_pickerHeader_6q4ek_6",pickerForm:"_pickerForm_6q4ek_15",pickerActionSubmit_disabled:"_pickerActionSubmit_disabled_6q4ek_22",pickerSelectAll:"_pickerSelectAll_6q4ek_27","conflict-picker__all":"_conflict-picker__all_6q4ek_40"}}]])},50240(e,t,i){i.d(t,{_:()=>n});const n=(e,t)=>{const i=e.__vccOpts||e;for(const[e,n]of t)i[e]=n;return i}},43016(e,t,i){i.d(t,{g:()=>l,u:()=>c});var n=i(38040),r=i(63814),s=i(50953),a=i(20641);const o=new(i(38343).A)({concurrency:5});function l(e,t={}){t={size:32,cropPreview:!1,mimeFallback:!0,...t};try{const i=e.attributes?.previewUrl||(0,r.Jv)("/core/preview?fileId={fileid}",{fileid:e.fileid});let n;try{n=new URL(i)}catch{n=new URL(i,window.location.origin)}return n.searchParams.set("x",`${t.size}`),n.searchParams.set("y",`${t.size}`),n.searchParams.set("mimeFallback",`${t.mimeFallback}`),n.searchParams.set("a",!0===t.cropPreview?"0":"1"),n.searchParams.set("c",`${e.attributes.etag}`),n}catch{return null}}function c(e,t){const i=(0,s.KR)(null),r=(0,s.KR)(!1);return(0,a.nT)(()=>{r.value=!1,i.value=l((0,s.BA)(e),(0,s.BA)(t||{})),i.value&&(0,s.BA)(e).type===n.pt.File&&function(e){const{resolve:t,promise:i}=Promise.withResolvers();return o.add(()=>{const n=new Image;return n.onerror=()=>t(!1),n.onload=()=>t(!0),n.src=e,i}),i}(i.value.href).then(e=>{r.value=e})}),{previewURL:i,previewLoaded:r}}},72094(e,t,i){i.d(t,{F:()=>a,P:()=>o,a:()=>m,b:()=>p,c:()=>l,s:()=>s});var n=i(35947),r=i(41133);window._nc_files_scope??={},window._nc_files_scope.v4_0??={};const s=window._nc_files_scope.v4_0,a=((0,n.YK)().setApp("@nextcloud/files").detectUser().build(),Object.freeze({Folder:"folder",File:"file"})),o=Object.freeze({NONE:0,READ:1,UPDATE:2,CREATE:4,WRITE:4,DELETE:8,SHARE:16,ALL:31}),l=Object.freeze({NEW:"new",FAILED:"failed",LOADING:"loading",LOCKED:"locked"});function c(e,t){return null!==e.match(t)}function u(e,t){if(e.id&&"number"!=typeof e.id&&"string"!=typeof e.id)throw new Error("Invalid id type of value");if(!e.source)throw new Error("Missing mandatory source");try{new URL(e.source)}catch{throw new Error("Invalid source format, source must be a valid URL")}if(!e.source.startsWith("http"))throw new Error("Invalid source format, only http(s) is supported");if(!e.root)throw new Error("Missing mandatory root");if("string"!=typeof e.root)throw new Error("Invalid root type");if(!e.root.startsWith("/"))throw new Error("Root must start with a leading slash");if(!e.source.includes(e.root))throw new Error("Root must be part of the source");if(c(e.source,t)){const i=e.source.match(t)[0];if(!e.source.includes((0,r.fj)(i,e.root)))throw new Error("The root must be relative to the service. e.g /files/emma")}if(e.displayname&&"string"!=typeof e.displayname)throw new Error("Invalid displayname type");if(e.mtime&&!(e.mtime instanceof Date))throw new Error("Invalid mtime type");if(e.crtime&&!(e.crtime instanceof Date))throw new Error("Invalid crtime type");if(!e.mime||"string"!=typeof e.mime||!e.mime.match(/^[-\w.]+\/[-+\w.]+$/gi))throw new Error("Missing or invalid mandatory mime");if("size"in e&&"number"!=typeof e.size&&void 0!==e.size)throw new Error("Invalid size type");if("permissions"in e&&void 0!==e.permissions&&!("number"==typeof e.permissions&&e.permissions>=o.NONE&&e.permissions<=o.ALL))throw new Error("Invalid permissions");if(e.owner&&null!==e.owner&&"string"!=typeof e.owner)throw new Error("Invalid owner type");if(e.attributes&&"object"!=typeof e.attributes)throw new Error("Invalid attributes type");if(e.status&&!Object.values(l).includes(e.status))throw new Error("Status must be a valid NodeStatus")}class d{_attributes;_data;_knownDavService=/(remote|public)\.php\/(web)?dav/i;readonlyAttributes=Object.entries(Object.getOwnPropertyDescriptors(d.prototype)).filter(e=>"function"==typeof e[1].get&&"__proto__"!==e[0]).map(e=>e[0]);handler={set:(e,t,i)=>!this.readonlyAttributes.includes(t)&&Reflect.set(e,t,i),deleteProperty:(e,t)=>!this.readonlyAttributes.includes(t)&&Reflect.deleteProperty(e,t)};constructor(...[e,t]){e.mime||(e.mime="application/octet-stream"),function(e){e.mtime&&"string"==typeof e.mtime&&(isNaN(Date.parse(e.mtime))||JSON.stringify(new Date(e.mtime))!==JSON.stringify(e.mtime)||(e.mtime=new Date(e.mtime))),e.crtime&&"string"==typeof e.crtime&&(isNaN(Date.parse(e.crtime))||JSON.stringify(new Date(e.crtime))!==JSON.stringify(e.crtime)||(e.crtime=new Date(e.crtime)))}(e),u(e,t=function(e){if(e instanceof RegExp)return e;const t=e.match(/(\/?)(.+)\1([a-z]*)/i);if(!t)throw new Error("Invalid regular expression format.");const i=Array.from(new Set(t[3])).filter(e=>"gimsuy".includes(e)).join("");return new RegExp(t[2],i)}(t||this._knownDavService)),this._data={...e,attributes:{}},this._attributes=new Proxy(this._data.attributes,this.handler),this.update(e.attributes??{}),t&&(this._knownDavService=t)}get source(){return this._data.source.replace(/\/$/i,"")}get encodedSource(){const{origin:e}=new URL(this.source);return e+(0,r.O0)(this.source.slice(e.length))}get basename(){return(0,r.P8)(this.source)}get displayname(){return this._data.displayname||this.basename}set displayname(e){u({...this._data,displayname:e},this._knownDavService),this._data.displayname=e}get extension(){return(0,r.LC)(this.source)}get dirname(){return(0,r.pD)(this.path)}get mime(){return this._data.mime||"application/octet-stream"}set mime(e){e??="application/octet-stream",u({...this._data,mime:e},this._knownDavService),this._data.mime=e}get mtime(){return this._data.mtime}set mtime(e){u({...this._data,mtime:e},this._knownDavService),this._data.mtime=e}get crtime(){return this._data.crtime}get size(){return this._data.size}set size(e){u({...this._data,size:e},this._knownDavService),this.updateMtime(),this._data.size=e}get attributes(){return this._attributes}get permissions(){return null!==this.owner||this.isDavResource?void 0!==this._data.permissions?this._data.permissions:o.NONE:o.READ}set permissions(e){u({...this._data,permissions:e},this._knownDavService),this.updateMtime(),this._data.permissions=e}get owner(){return this.isDavResource?this._data.owner:null}get isDavResource(){return c(this.source,this._knownDavService)}get root(){return this._data.root.replace(/^(.+)\/$/,"$1")}get path(){const e=this.source.indexOf("://"),t=this.source.slice(0,e),i=this.source.slice(e+3),n=i.indexOf("/"),s=i.slice(0,n),a=i.slice(n),o=`${t}://${s}${(0,r.O0)(a)}`,l=new URL(o);let c=decodeURIComponent(l.pathname);this.isDavResource&&(c=c.split(this._knownDavService).pop());const u=c.indexOf(this.root),d=this.root.replace(/\/$/,"");return c.slice(u+d.length)||"/"}get fileid(){return"number"==typeof this._data?.id?this._data.id:void 0}get id(){if(!(void 0===this._data?.id||"number"==typeof this._data.id&&this._data.id<0))return String(this._data.id)}get status(){return this._data?.status}set status(e){u({...this._data,status:e},this._knownDavService),this._data.status=e}move(e){u({...this._data,source:e},this._knownDavService);const t=this.basename;this._data.source=e,this.displayname===t&&this.basename!==t&&(this.displayname=this.basename)}rename(e){if(e.includes("/"))throw new Error("Invalid basename");this.move((0,r.pD)(this.source)+"/"+e)}updateMtime(){this._data.mtime&&(this._data.mtime=new Date)}update(e){for(const[t,i]of Object.entries(e))try{void 0===i?delete this.attributes[t]:this.attributes[t]=i}catch(e){if(e instanceof TypeError)continue;throw e}}clone(){return new this.constructor(structuredClone(this._data),this._knownDavService)}toJSON(){return JSON.stringify([structuredClone(this._data),this._knownDavService.toString()])}}class m extends d{constructor(...[e,t]){super(e,t)}get type(){return a.File}}class p extends d{constructor(...[e,t]){super({...e,mime:"httpd/unix-directory"},t)}get type(){return a.Folder}get extension(){return null}get mime(){return"httpd/unix-directory"}}},38040(e,t,i){i.d(t,{pt:()=>n.F,di:()=>o,nF:()=>a,aX:()=>n.P,v7:()=>d,ur:()=>f,KT:()=>l});var n=i(72094),r=(EventTarget,i(87485)),s=i(53334);Object.freeze({DEFAULT:"default",HIDDEN:"hidden"}),Object.freeze({UploadFromDevice:0,CreateNew:1,Other:2});const a=Object.freeze({ReservedName:"reserved name",Character:"character",Extension:"extension"});class o extends Error{constructor(e){super(`Invalid ${e.reason} '${e.segment}' in filename '${e.filename}'`,{cause:e})}get filename(){return this.cause.filename}get reason(){return this.cause.reason}get segment(){return this.cause.segment}}function l(e){const t=(0,r.F)().files,i=t.forbidden_filename_characters??["/","\\"];for(const t of i)if(e.includes(t))throw new o({segment:t,reason:a.Character,filename:e});if(e=e.toLocaleLowerCase(),(t.forbidden_filenames??[".htaccess"]).includes(e))throw new o({filename:e,segment:e,reason:a.ReservedName});const n=e.indexOf(".",1),s=e.substring(0,-1===n?void 0:n);if((t.forbidden_filename_basenames??[]).includes(s))throw new o({filename:e,segment:s,reason:a.ReservedName});const l=t.forbidden_filename_extensions??[];for(const t of l)if(e.length>t.length&&e.endsWith(t))throw new o({segment:t,reason:a.Extension,filename:e})}const c=["B","KB","MB","GB","TB","PB"],u=["B","KiB","MiB","GiB","TiB","PiB"];function d(e,t=!1,i=!1,n=!1){i=i&&!n,"string"==typeof e&&(e=Number(e));let r=e>0?Math.floor(Math.log(e)/Math.log(n?1e3:1024)):0;r=Math.min((i?u.length:c.length)-1,r);const a=i?u[r]:c[r];let o=(e/Math.pow(n?1e3:1024,r)).toFixed(1);return!0===t&&0===r?("0.0"!==o?"< 1 ":"0 ")+(i?u[1]:c[1]):(o=r<2?parseFloat(o).toFixed(0):parseFloat(o).toLocaleString((0,s.lO)()),o+" "+a)}function m(e){return e instanceof Date?e.toISOString():String(e)}const p=Object.freeze({Name:"basename",Modified:"mtime",Size:"size"});function f(e,t={}){const i={sortingMode:p.Name,sortingOrder:"asc",...t};return function(e,t,i){i=i??[];const n=(t=t??[e=>e]).map((e,t)=>"asc"===(i[t]??"asc")?1:-1),r=Intl.Collator([(0,s.Z0)(),(0,s.lO)()],{numeric:!0,usage:"sort"});return[...e].sort((e,i)=>{for(const[s,a]of t.entries()){const t=r.compare(m(a(e)),m(a(i)));if(0!==t)return t*n[s]}return 0})}(e,[...i.sortFavoritesFirst?[e=>1!==e.attributes?.favorite]:[],...i.sortFoldersFirst?[e=>"folder"!==e.type]:[],...i.sortingMode!==p.Name?[e=>e[i.sortingMode]??e.attributes[i.sortingMode]]:[],e=>function(e){const t=e.displayname||e.attributes?.displayname||e.basename||"";return e.type===n.F.Folder?t:t.lastIndexOf(".")>0?t.slice(0,t.lastIndexOf(".")):t}(e),e=>e.basename],[...i.sortFavoritesFirst?["asc"]:[],...i.sortFoldersFirst?["asc"]:[],...i.sortingMode===p.Modified?["asc"===i.sortingOrder?"desc":"asc"]:[],...i.sortingMode!==p.Modified&&i.sortingMode!==p.Name?[i.sortingOrder]:[],i.sortingOrder,i.sortingOrder])}},41133(e,t,i){function n(e){return e?e.split("/").map(encodeURIComponent).join("/"):e}function r(e,t){return e=e.replace(/\\/g,"/").replace(/\/+$/g,"").replace(/.*\//,""),t&&t!==e&&e.endsWith(t)?e.substring(0,e.length-t.length):e}function s(e){const t=(e=e.replaceAll(/\\/g,"/")).split("/");return t.length<=1?".":(t.pop(),1===t.length&&""===t[0]?"/":t.join("/"))}function a(e){const t=r(e),i=t.lastIndexOf(".");return i>0?t.substring(i):""}function o(...e){if(arguments.length<1)return"";const t=e.filter(e=>e.length>0);if(t.length<1)return"";const i=t[t.length-1],n="/"===t[0].charAt(0),r="/"===i.charAt(i.length-1),s=t.reduce((e,t)=>e.concat(t.split("/")),[]);let a=!n;const o=s.reduce((e,t)=>""===t?e:a?(a=!1,e+t):e+"/"+t,"");return r?o+"/":o}i.d(t,{LC:()=>a,O0:()=>n,P8:()=>r,fj:()=>o,pD:()=>s})},15446(e,t,i){i.d(t,{A:()=>n.N});var n=i(11194)},86296(e,t,i){i.d(t,{A:()=>n.N});var n=i(24322)},10997(e,t,i){i.d(t,{A:()=>n._});var n=i(54980)},60129(e,t,i){i.d(t,{A:()=>n.N});var n=i(68144)}}]);