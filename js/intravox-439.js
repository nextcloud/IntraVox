"use strict";(self.webpackChunknextcloud_intravox=self.webpackChunknextcloud_intravox||[]).push([[439],{3576:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(1601),o=i.n(a),n=i(6314),l=i.n(n)()(o());l.push([e.id,"\n.media-picker-tabs[data-v-280bf705] {\n  display: flex;\n  gap: 8px;\n  border-bottom: 2px solid #e0e0e0;\n  margin-bottom: 20px;\n}\n.tab-button[data-v-280bf705] {\n  padding: 10px 20px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  color: #666;\n  border-bottom: 2px solid transparent;\n  margin-bottom: -2px;\n  transition: all 0.2s;\n}\n.tab-button[data-v-280bf705]:hover {\n  color: #0082c9;\n}\n.tab-button.active[data-v-280bf705] {\n  color: #0082c9;\n  border-bottom-color: #0082c9;\n}\n.media-picker-content[data-v-280bf705] {\n  min-height: 400px;\n  max-height: 500px;\n  overflow-y: auto;\n}\n.tab-panel[data-v-280bf705] {\n  padding: 10px 0;\n}\n\n/* Upload Tab Styles */\n.upload-section[data-v-280bf705] {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n.file-input[data-v-280bf705] {\n  display: none;\n}\n.upload-prompt[data-v-280bf705] {\n  border: 2px dashed #ccc;\n  border-radius: 8px;\n  padding: 60px 20px;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.upload-prompt[data-v-280bf705]:hover {\n  border-color: #0082c9;\n  background: #f0f9ff;\n}\n.upload-icon[data-v-280bf705] {\n  font-size: 64px;\n  margin-bottom: 15px;\n}\n.upload-prompt p[data-v-280bf705] {\n  margin: 5px 0;\n  color: #666;\n}\n.hint[data-v-280bf705] {\n  font-size: 12px;\n  color: #999;\n}\n.file-selected[data-v-280bf705] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 15px;\n  background: #f8f9fa;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n}\n.file-info[data-v-280bf705] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n.file-icon[data-v-280bf705] {\n  font-size: 32px;\n}\n.file-details[data-v-280bf705] {\n  flex: 1;\n}\n.file-name[data-v-280bf705] {\n  font-weight: 600;\n  margin-bottom: 4px;\n  word-break: break-word;\n}\n.file-size[data-v-280bf705] {\n  font-size: 12px;\n  color: #666;\n}\n.btn-remove[data-v-280bf705] {\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 24px;\n  color: #999;\n  padding: 5px 10px;\n  transition: color 0.2s;\n}\n.btn-remove[data-v-280bf705]:hover {\n  color: #e74c3c;\n}\n\n/* Media Grid Styles */\n.media-grid[data-v-280bf705] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 15px;\n}\n.media-item[data-v-280bf705] {\n  border: 2px solid #ddd;\n  border-radius: 8px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.media-item[data-v-280bf705]:hover {\n  border-color: #0082c9;\n  box-shadow: 0 2px 8px rgba(0, 130, 201, 0.2);\n}\n.media-item.selected[data-v-280bf705] {\n  border-color: #0082c9;\n  background: #f0f9ff;\n}\n.media-thumbnail[data-v-280bf705] {\n  width: 100%;\n  height: 120px;\n  background: #f5f5f5;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n}\n.media-thumbnail img[data-v-280bf705] {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.video-placeholder[data-v-280bf705] {\n  font-size: 48px;\n}\n.media-info[data-v-280bf705] {\n  padding: 10px;\n  background: white;\n}\n.media-name[data-v-280bf705] {\n  font-size: 12px;\n  font-weight: 600;\n  margin-bottom: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.media-size[data-v-280bf705] {\n  font-size: 11px;\n  color: #666;\n}\n\n/* Loading State */\n.loading-state[data-v-280bf705] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  color: #666;\n}\n.loading-spinner[data-v-280bf705] {\n  display: inline-block;\n  width: 32px;\n  height: 32px;\n  border: 3px solid #f3f3f3;\n  border-top: 3px solid #0082c9;\n  border-radius: 50%;\n  animation: spin-280bf705 1s linear infinite;\n  margin-bottom: 15px;\n}\n@keyframes spin-280bf705 {\nto { transform: rotate(360deg);\n}\n}\n\n/* Empty State */\n.empty-state[data-v-280bf705] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  color: #666;\n}\n.empty-icon[data-v-280bf705] {\n  font-size: 64px;\n  margin-bottom: 15px;\n}\n\n/* Dialog Actions */\n.btn[data-v-280bf705] {\n  padding: 10px 20px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n}\n.btn[data-v-280bf705]:hover:not(:disabled) {\n  background: #f0f0f0;\n}\n.btn[data-v-280bf705]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.btn-primary[data-v-280bf705] {\n  background: #0082c9;\n  color: white;\n  border-color: #0082c9;\n}\n.btn-primary[data-v-280bf705]:hover:not(:disabled) {\n  background: #006ba6;\n}\n.btn-secondary[data-v-280bf705] {\n  background: white;\n  color: #333;\n}\n.btn-danger[data-v-280bf705] {\n  background: #e74c3c;\n  color: white;\n  border-color: #e74c3c;\n}\n.btn-danger[data-v-280bf705]:hover:not(:disabled) {\n  background: #c0392b;\n}\n.spinner[data-v-280bf705] {\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  border-top-color: currentColor;\n  border-radius: 50%;\n  animation: spin-280bf705 0.6s linear infinite;\n  margin-right: 8px;\n  vertical-align: middle;\n}\n\n/* Breadcrumb Navigation */\n.breadcrumb-nav[data-v-280bf705] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 12px 20px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius);\n  margin-bottom: 16px;\n  overflow-x: auto;\n}\n.breadcrumb-item[data-v-280bf705] {\n  background: none;\n  border: none;\n  color: var(--color-primary);\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: var(--border-radius);\n  font-size: 14px;\n  white-space: nowrap;\n  transition: background 0.2s;\n}\n.breadcrumb-item[data-v-280bf705]:hover {\n  background: var(--color-primary-element-light);\n}\n.breadcrumb-separator[data-v-280bf705] {\n  color: var(--color-text-maxcontrast);\n  margin: 0 4px;\n}\n\n/* Folder Styling */\n.media-item.is-folder[data-v-280bf705] {\n  cursor: pointer;\n}\n.media-item.is-folder[data-v-280bf705]:hover {\n  background: var(--color-primary-element-light);\n}\n.folder-icon[data-v-280bf705] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100px;\n  font-size: 48px;\n}\n.media-type[data-v-280bf705] {\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n}\n",""]);const r=l},5520:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(1601),o=i.n(a),n=i(6314),l=i.n(n)()(o());l.push([e.id,'\n/* Make modal wider for better editing experience */\n.widget-editor-modal[data-v-3d4e419c] .modal-container {\n  max-width: 1200px !important;\n}\n\n/* Remove all padding from modal content wrapper */\n[data-v-3d4e419c] .modal-wrapper--large .modal-container {\n  padding: 0;\n}\n[data-v-3d4e419c] .modal-wrapper .modal-container .modal-container__content {\n  padding: 0;\n  margin: 0;\n}\n[data-v-3d4e419c] .modal-container > * {\n  padding: 0;\n}\n.widget-editor-content[data-v-3d4e419c] {\n  padding: 0;\n  width: 100%;\n  margin: 0;\n}\n.form-group[data-v-3d4e419c] {\n  margin-bottom: 20px;\n  padding: 0 20px;\n}\n.full-width-editor[data-v-3d4e419c] {\n  padding: 0;\n  margin: 0;\n}\n.full-width-editor label[data-v-3d4e419c] {\n  padding: 20px 20px 0 20px;\n  display: block;\n  margin: 0;\n}\n.form-group label[data-v-3d4e419c] {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n  color: var(--color-main-text);\n}\n.form-group .hint[data-v-3d4e419c] {\n  margin-top: 4px;\n  margin-bottom: 0;\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n}\n.form-group .hint.uploading[data-v-3d4e419c] {\n  color: var(--color-primary);\n  font-weight: 500;\n}\n.heading-text-input[data-v-3d4e419c],\n.heading-level-select[data-v-3d4e419c],\n.widget-input[data-v-3d4e419c] {\n  width: 100%;\n  padding: 8px 12px;\n  border: 2px solid var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  font-size: 14px;\n}\n.heading-text-input[data-v-3d4e419c],\n.widget-input[data-v-3d4e419c] {\n  cursor: text;\n}\n.heading-level-select[data-v-3d4e419c] {\n  cursor: pointer;\n}\n.heading-text-input[data-v-3d4e419c]:focus,\n.heading-level-select[data-v-3d4e419c]:focus,\n.widget-input[data-v-3d4e419c]:focus {\n  outline: none;\n  border-color: var(--color-primary-element);\n}\n.image-preview[data-v-3d4e419c] {\n  margin: 15px 0;\n  max-width: 100%;\n}\n.image-preview img[data-v-3d4e419c] {\n  max-width: 100%;\n  height: auto;\n  border-radius: var(--border-radius-large);\n  border: 1px solid var(--color-border);\n}\n\n/* Video preview and upload styles */\n.video-preview[data-v-3d4e419c] {\n  margin: 15px 0;\n}\n.video-preview .preview-container[data-v-3d4e419c] {\n  border-radius: var(--border-radius-large);\n  overflow: hidden;\n  border: 1px solid var(--color-border);\n  background: var(--color-background-dark);\n}\n.video-preview-hint[data-v-3d4e419c] {\n  margin: 15px 0;\n  padding: 20px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius-large);\n  text-align: center;\n}\n\n/* Blocked video preview - matches Widget.vue styling */\n.video-blocked-preview[data-v-3d4e419c] {\n  padding: 24px;\n  background: var(--color-background-hover);\n  border: 2px dashed var(--color-warning);\n  border-radius: var(--border-radius-large);\n  text-align: center;\n}\n.video-blocked-preview .blocked-icon[data-v-3d4e419c] {\n  font-size: 48px;\n  line-height: 1;\n  margin-bottom: 12px;\n  filter: grayscale(0);\n}\n.video-blocked-preview .blocked-title[data-v-3d4e419c] {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--color-warning-text);\n  background-color: var(--color-warning);\n  display: inline-block;\n  padding: 4px 12px;\n  border-radius: var(--border-radius);\n  margin: 0 0 12px 0;\n}\n.video-blocked-preview .blocked-url[data-v-3d4e419c] {\n  margin: 12px 0;\n  padding: 8px 12px;\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius);\n  max-width: 100%;\n  overflow: hidden;\n}\n.video-blocked-preview .blocked-url .url-label[data-v-3d4e419c] {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--color-text-maxcontrast);\n  margin-right: 8px;\n}\n.video-blocked-preview .blocked-url .url-value[data-v-3d4e419c] {\n  font-size: 12px;\n  font-family: var(--font-monospace, monospace);\n  color: var(--color-main-text);\n  word-break: break-all;\n  background: none;\n  padding: 0;\n}\n.video-blocked-preview .blocked-hint[data-v-3d4e419c] {\n  font-size: 13px;\n  color: var(--color-text-maxcontrast);\n  margin: 0;\n  font-style: italic;\n}\n.current-video[data-v-3d4e419c] {\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n  color: var(--color-text-maxcontrast);\n}\n.detected-platform[data-v-3d4e419c] {\n  margin-top: 8px;\n  padding: 6px 10px;\n  background: var(--color-primary-element-light);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n  color: var(--color-primary);\n}\n.modal-footer[data-v-3d4e419c] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  padding: 20px;\n  border-top: 1px solid var(--color-border);\n  margin-top: 0;\n}\n\n/* Rich Text Editor Toolbar */\n.rich-text-toolbar[data-v-3d4e419c] {\n  display: flex;\n  gap: 4px;\n  padding: 12px 20px;\n  background: var(--color-background-dark);\n  border: 1px solid var(--color-border);\n  border-left: none;\n  border-right: none;\n  border-radius: 0;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.toolbar-btn[data-v-3d4e419c] {\n  padding: 6px 12px;\n  background: var(--color-main-background);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  color: var(--color-main-text);\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.toolbar-btn[data-v-3d4e419c]:hover {\n  background: var(--color-background-hover);\n  border-color: var(--color-primary);\n}\n.toolbar-btn.is-active[data-v-3d4e419c] {\n  background: var(--color-primary-element-light);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.toolbar-divider[data-v-3d4e419c] {\n  width: 1px;\n  height: 24px;\n  background: var(--color-border);\n  margin: 0 4px;\n}\n\n/* Tiptap Editor Styles */\n.rich-text-editor[data-v-3d4e419c] {\n  width: 100%;\n  border: 1px solid var(--color-border);\n  border-top: none;\n  border-left: none;\n  border-right: none;\n  border-radius: 0;\n  background: var(--color-main-background);\n}\n.rich-text-editor[data-v-3d4e419c] .tiptap {\n  width: 100%;\n  max-width: 100%;\n}\n\n/* Force full width using custom class to override Tiptap inline styles */\n.rich-text-editor[data-v-3d4e419c] .intravox-editor-full-width {\n  width: 100% !important;\n  min-height: 400px;\n  max-height: 600px;\n  padding: 20px;\n  color: var(--color-main-text);\n  font-family: var(--font-face);\n  font-size: 14px;\n  line-height: 1.5;\n  overflow-y: auto;\n  outline: none;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror {\n  width: 100%;\n  min-height: 400px;\n  max-height: 600px;\n  padding: 20px;\n  color: var(--color-main-text);\n  font-family: var(--font-face);\n  font-size: 14px;\n  line-height: 1.5;\n  overflow-y: auto;\n  outline: none;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror:focus {\n  outline: none;\n}\n\n/* Rich text content styling */\n.rich-text-editor[data-v-3d4e419c] .ProseMirror p {\n  margin: 0;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror p + p {\n  margin-top: 0;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror ul,\n.rich-text-editor[data-v-3d4e419c] .ProseMirror ol {\n  padding-left: 1.5em;\n  margin: 0.5em 0;\n  list-style-position: outside;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror ul {\n  list-style-type: disc;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror ol {\n  list-style-type: decimal;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror li {\n  margin: 0.25em 0;\n  display: list-item;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror li p {\n  margin: 0;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror strong {\n  font-weight: 700;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror em {\n  font-style: italic;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror u {\n  text-decoration: underline;\n}\n.rich-text-editor[data-v-3d4e419c] .ProseMirror s {\n  text-decoration: line-through;\n}\n\n/* Placeholder */\n.rich-text-editor[data-v-3d4e419c] .ProseMirror p.is-editor-empty:first-child::before {\n  content: attr(data-placeholder);\n  float: left;\n  color: var(--color-text-maxcontrast);\n  pointer-events: none;\n  height: 0;\n}\n.size-presets[data-v-3d4e419c] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.size-preset-btn[data-v-3d4e419c] {\n  padding: 8px 16px;\n  border: 2px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n}\n.size-preset-btn[data-v-3d4e419c]:hover {\n  background: var(--color-background-hover);\n  border-color: var(--color-primary);\n}\n.size-preset-btn.active[data-v-3d4e419c] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.custom-size-inputs[data-v-3d4e419c] {\n  display: flex;\n  gap: 15px;\n}\n.size-input-group[data-v-3d4e419c] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.size-label[data-v-3d4e419c] {\n  font-size: 14px;\n  color: var(--color-text-maxcontrast);\n  min-width: 60px;\n}\n.size-input[data-v-3d4e419c] {\n  flex: 1;\n  padding: 8px 12px;\n  border: 2px solid var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  font-size: 14px;\n}\n.size-input[data-v-3d4e419c]:focus {\n  outline: none;\n  border-color: var(--color-primary-element);\n}\n.size-hint[data-v-3d4e419c] {\n  margin-top: 8px;\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n  font-style: italic;\n}\n\n/* Checkbox group styling */\n.checkbox-group[data-v-3d4e419c] {\n  margin-bottom: 12px;\n}\n.link-target-options[data-v-3d4e419c] {\n  margin-top: 8px;\n  margin-bottom: 4px;\n}\n.checkbox-label[data-v-3d4e419c] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  color: var(--color-main-text);\n}\n.checkbox-label input[type="checkbox"][data-v-3d4e419c] {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  accent-color: var(--color-primary);\n}\n.checkbox-hint[data-v-3d4e419c] {\n  margin-top: 4px;\n  margin-left: 26px;\n  margin-bottom: 0;\n}\n\n/* Media Picker Integration */\n',""]);const r=l},7245:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(1601),o=i.n(a),n=i(6314),l=i.n(n)()(o());l.push([e.id,"\n.links-editor-modal[data-v-59890675] .modal-container {\n  max-width: 900px !important;\n}\n.links-editor-content[data-v-59890675] {\n  padding: 20px;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n.form-section[data-v-59890675] {\n  margin-bottom: 30px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid var(--color-border);\n}\n.form-section[data-v-59890675]:last-of-type {\n  border-bottom: none;\n}\n.form-section h3[data-v-59890675] {\n  margin: 0 0 15px 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--color-main-text);\n}\n.section-header[data-v-59890675] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n.section-header h3[data-v-59890675] {\n  margin: 0;\n}\n.form-group[data-v-59890675] {\n  margin-bottom: 15px;\n}\n.form-group label[data-v-59890675] {\n  display: block;\n  margin-bottom: 6px;\n  font-weight: 500;\n  font-size: 13px;\n  color: var(--color-main-text);\n}\n.widget-input[data-v-59890675] {\n  width: 100%;\n  padding: 8px 12px;\n  border: 2px solid var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  font-size: 14px;\n}\n.widget-input[data-v-59890675]:focus {\n  outline: none;\n  border-color: var(--color-primary-element);\n}\n.color-presets[data-v-59890675] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.color-preset-btn[data-v-59890675] {\n  padding: 8px 16px;\n  border: 2px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  color: var(--color-main-text);\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n}\n.color-preset-btn.small[data-v-59890675] {\n  padding: 6px 12px;\n  font-size: 12px;\n}\n.color-preset-btn[data-v-59890675]:hover {\n  background: var(--color-background-hover);\n  border-color: var(--color-primary);\n}\n.color-preset-btn.active[data-v-59890675] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.links-list[data-v-59890675] {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n.link-editor-item[data-v-59890675] {\n  display: flex;\n  gap: 15px;\n  align-items: flex-start;\n  padding: 15px;\n  background: var(--color-background-hover);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n}\n.link-number[data-v-59890675] {\n  flex-shrink: 0;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-primary-element);\n  color: white;\n  border-radius: 50%;\n  font-weight: 600;\n  font-size: 13px;\n}\n.link-fields[data-v-59890675] {\n  flex: 1;\n}\n.form-row[data-v-59890675] {\n  display: flex;\n  gap: 15px;\n  margin-bottom: 10px;\n}\n.form-row[data-v-59890675]:last-child {\n  margin-bottom: 0;\n}\n.flex-1[data-v-59890675] {\n  flex: 1;\n}\n.remove-link-btn[data-v-59890675] {\n  flex-shrink: 0;\n  padding: 8px;\n  background: transparent;\n  border: none;\n  color: var(--color-error);\n  cursor: pointer;\n  border-radius: var(--border-radius);\n  transition: all 0.2s;\n}\n.remove-link-btn[data-v-59890675]:hover {\n  background: var(--color-error);\n  color: white;\n}\n.icon-option[data-v-59890675] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.empty-state[data-v-59890675] {\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--color-text-maxcontrast);\n}\n.empty-state svg[data-v-59890675] {\n  margin-bottom: 10px;\n  color: var(--color-text-maxcontrast);\n}\n.empty-state p[data-v-59890675] {\n  margin: 0;\n  font-size: 14px;\n}\n.modal-footer[data-v-59890675] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  padding-top: 20px;\n  border-top: 1px solid var(--color-border);\n  margin-top: 20px;\n}\n\n/* Mobile responsiveness */\n@media (max-width: 768px) {\n.form-row[data-v-59890675] {\n    flex-direction: column;\n    gap: 10px;\n}\n.link-editor-item[data-v-59890675] {\n    flex-direction: column;\n}\n.remove-link-btn[data-v-59890675] {\n    align-self: flex-end;\n}\n}\n",""]);const r=l},8294:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(1601),o=i.n(a),n=i(6314),l=i.n(n)()(o());l.push([e.id,"\n.widget-picker-content[data-v-15ea2c63] {\n  padding: 12px;\n}\n.widget-types[data-v-15ea2c63] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n  max-width: 400px;\n}\n.widget-type-card[data-v-15ea2c63] {\n  padding: 20px 16px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  gap: 8px;\n  background: var(--color-main-background);\n  min-height: 80px;\n  justify-content: center;\n}\n.widget-type-card[data-v-15ea2c63]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-background-hover);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n}\n.widget-icon[data-v-15ea2c63] {\n  color: var(--color-text-maxcontrast);\n}\n.widget-info[data-v-15ea2c63] {\n  width: 100%;\n}\n.widget-info h3[data-v-15ea2c63] {\n  margin: 0;\n  font-size: 13px;\n  font-weight: 600;\n  color: var(--color-main-text);\n}\n",""]);const r=l},8439:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ya});var a=i(641),o=i(33);const n={class:"page-editor-wrapper"},l={class:"header-row-header"},r={class:"header-row-title"},d={class:"header-row-actions"},s={class:"header-row-widgets"},c={class:"widget-wrapper"},u={class:"floating-toolbar"},g=["aria-label"],p={key:1,class:"add-header-row-container"},h={class:"page-editor-container"},m={class:"side-column-header"},b={class:"side-column-title"},v={class:"side-column-actions"},k={class:"side-column-widgets"},f={class:"widget-wrapper"},w={class:"floating-toolbar"},y=["aria-label"],x={class:"page-editor"},C={class:"side-column-buttons"},W={class:"row-controls"},L={style:{"margin-right":"8px"}},P=["onClick"],_={class:"column-label"},A={class:"floating-toolbar"},z=["aria-label"],F={class:"column-add-widget"},T={class:"insert-row-container"},R={class:"side-column-header"},S={class:"side-column-title"},E={class:"side-column-actions"},I={class:"side-column-widgets"},U={class:"widget-wrapper"},D={class:"floating-toolbar"},M=["aria-label"];var $=i(432),X=i.n($),V=i(3334),B=i(5873),H=i(2490),Q=i(5748),N=i(2955),j=i(4911),O=i(8464),J=i(7444),K=i(863),G=i(4086),q=i(1243),Z=i(9445),Y=i(7545);const ee={class:"widget-picker-content"},te={class:"widget-types"},ie=["onClick"],ae={class:"widget-info"};var oe=i(7266),ne=i(8613),le=i(9158),re=i(4504),de=i(8429),se=i(5857);const ce={name:"WidgetPicker",components:{NcModal:B.FH,Text:oe.A,FormatTitle:ne.A,Image:le.A,Minus:re.A,ViewGrid:de.A,Video:se.A},emits:["close","select"],computed:{modalTitle(){return this.$t("Add widget")},widgetTypes(){return[{type:"text",name:this.$t("Text"),icon:"text",description:this.$t("Add text to your page")},{type:"heading",name:this.$t("Heading"),icon:"format-title",description:this.$t("Add a heading")},{type:"image",name:this.$t("Image"),icon:"image",description:this.$t("Add an image")},{type:"divider",name:this.$t("Divider"),icon:"minus",description:this.$t("Add a horizontal line")},{type:"links",name:this.$t("Links"),icon:"view-grid",description:this.$t("Add a grid of links with icons")},{type:"video",name:this.$t("Video"),icon:"video",description:this.$t("Add a PeerTube or local video")}]}},methods:{getIconComponent:e=>({text:"Text","format-title":"FormatTitle",image:"Image",minus:"Minus","view-grid":"ViewGrid",video:"Video"}[e]||"Text")}};var ue=i(5072),ge=i.n(ue),pe=i(7825),he=i.n(pe),me=i(7659),be=i.n(me),ve=i(5056),ke=i.n(ve),fe=i(540),we=i.n(fe),ye=i(1113),xe=i.n(ye),Ce=i(8294),We={};We.styleTagTransform=xe(),We.setAttributes=ke(),We.insert=be().bind(null,"head"),We.domAPI=he(),We.insertStyleElement=we(),ge()(Ce.A,We),Ce.A&&Ce.A.locals&&Ce.A.locals;var Le=i(6262);const Pe=(0,Le.A)(ce,[["render",function(e,t,i,n,l,r){const d=(0,a.g2)("NcModal");return(0,a.uX)(),(0,a.Wv)(d,{onClose:t[0]||(t[0]=t=>e.$emit("close")),name:r.modalTitle,size:"small"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",ee,[(0,a.Lk)("div",te,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.widgetTypes,t=>((0,a.uX)(),(0,a.CE)("div",{key:t.type,class:"widget-type-card",onClick:i=>e.$emit("select",t.type)},[((0,a.uX)(),(0,a.Wv)((0,a.$y)(r.getIconComponent(t.icon)),{size:32,class:"widget-icon"})),(0,a.Lk)("div",ae,[(0,a.Lk)("h3",null,(0,o.v_)(t.name),1)])],8,ie))),128))])])]),_:1},8,["name"])}],["__scopeId","data-v-15ea2c63"]]);var _e=i(3751);const Ae={class:"widget-editor-content"},ze={key:0,class:"form-group full-width-editor"},Fe={key:0,class:"rich-text-toolbar"},Te=["title"],Re=["title"],Se=["title"],Ee=["title"],Ie=["title"],Ue=["title"],De={class:"form-group"},Me=["placeholder"],$e={class:"form-group"},Xe={value:1},Ve={value:2},Be={value:3},He={value:4},Qe={value:5},Ne={value:6},je={class:"form-group"},Oe={key:0,class:"image-preview"},Je=["src","alt"],Ke={class:"form-group"},Ge=["placeholder"],qe={class:"form-group"},Ze={class:"size-presets"},Ye={key:1,class:"form-group"},et=["placeholder"],tt={class:"size-hint"},it={key:2,class:"form-group"},at={class:"position-presets"},ot={class:"size-hint"},nt={class:"form-group"},lt={class:"size-presets"},rt={key:3,class:"form-group"},dt={class:"size-hint"},st={key:4,class:"form-group"},ct=["placeholder"],ut={class:"link-target-options"},gt={class:"checkbox-label"},pt={class:"size-hint"},ht={class:"form-group"},mt={class:"form-group"},bt={class:"form-group"},vt={class:"form-group"},kt={class:"size-presets"},ft={key:0,class:"form-group"},wt={class:"hint"},yt={key:0,class:"detected-platform"},xt={class:"form-group"},Ct={key:0,class:"current-video"},Wt={class:"form-group"},Lt={class:"form-group"},Pt={class:"checkbox-group"},_t={class:"checkbox-label"},At={class:"hint checkbox-hint"},zt={class:"checkbox-group"},Ft={class:"checkbox-label"},Tt={class:"hint checkbox-hint"},Rt={class:"checkbox-group"},St={class:"checkbox-label"},Et={class:"hint checkbox-hint"},It={key:2,class:"video-preview"},Ut={key:0,class:"video-blocked-preview"},Dt={class:"blocked-title"},Mt={key:0,class:"blocked-url"},$t={class:"url-value"},Xt={class:"blocked-hint"},Vt={class:"preview-container",style:{height:"200px"}},Bt=["src"],Ht={key:3,class:"video-preview"},Qt={class:"preview-container",style:{height:"200px"}},Nt=["src"],jt={class:"video-preview-hint"},Ot={class:"hint"},Jt={class:"modal-footer"};var Kt=i(6802),Gt=i(3814),qt=i(6391);const Zt={class:"media-picker-tabs"},Yt={class:"media-picker-content"},ei={key:0,class:"tab-panel"},ti={class:"upload-section"},ii=["accept"],ai={key:1,class:"file-selected"},oi={class:"file-info"},ni={class:"file-icon"},li={class:"file-details"},ri={class:"file-name"},di={class:"file-size"},si={key:1,class:"tab-panel"},ci={key:0,class:"loading-state"},ui={key:1,class:"empty-state"},gi={key:2,class:"media-grid"},pi=["onClick"],hi={class:"media-thumbnail"},mi=["src","alt"],bi={key:1,class:"video-placeholder"},vi={class:"media-info"},ki=["title"],fi={class:"media-size"},wi={key:2,class:"tab-panel"},yi={key:0,class:"breadcrumb-nav"},xi=["onClick"],Ci={key:1,class:"loading-state"},Wi={key:2,class:"empty-state"},Li={key:3,class:"media-grid"},Pi=["onClick"],_i={class:"media-thumbnail"},Ai={key:0,class:"folder-icon"},zi=["src","alt"],Fi={key:2,class:"video-placeholder"},Ti={class:"media-info"},Ri=["title"],Si={key:0,class:"media-size"},Ei={key:1,class:"media-type"},Ii={key:0,class:"icon-loading-small"};var Ui=i(5168);const Di={name:"MediaPicker",components:{NcDialog:B.i$,NcButton:B.x1},props:{open:{type:Boolean,required:!0},pageId:{type:String,required:!0},mediaType:{type:String,required:!0,validator:e=>["image","video"].includes(e)},title:{type:String,default:"Select Media"}},emits:["close","select"],data:()=>({activeTab:"upload",selectedFile:null,uploadTarget:"page",selectedMedia:null,pageMediaList:[],resourcesMediaList:[],isLoadingMedia:!1,isUploading:!1,showDuplicateDialog:!1,duplicateFilename:"",pendingUpload:null,currentResourcesPath:"",folderHistory:[]}),computed:{acceptTypes(){return"image"===this.mediaType?"image/jpeg,image/png,image/gif,image/webp,image/svg+xml":"video/mp4,video/webm,video/ogg"},confirmButtonLabel(){return this.isUploading?"Uploading...":"upload"===this.activeTab&&this.selectedFile?"Upload":"Select"},filteredPageMedia(){return this.filterMediaByType(this.pageMediaList)},filteredResourcesMedia(){return this.filterMediaByType(this.resourcesMediaList)},breadcrumbSegments(){return this.currentResourcesPath?this.currentResourcesPath.split("/").filter(e=>e):[]}},watch:{open(e){e&&this.resetState()}},methods:{handleClose(){this.$emit("close")},resetState(){this.activeTab="upload",this.selectedFile=null,this.uploadTarget="page",this.selectedMedia=null,this.pageMediaList=[],this.resourcesMediaList=[],this.isLoadingMedia=!1},handleFileSelect(e){const t=e.target.files[0];t&&(this.selectedFile=t,this.selectedMedia=null)},clearFile(){this.selectedFile=null,this.$refs.fileInput&&(this.$refs.fileInput.value="")},filterMediaByType(e){if(!e||0===e.length)return[];const t=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],i=["video/mp4","video/webm","video/ogg"];return e.filter(e=>"folder"===e.type||("image"===this.mediaType?t.includes(e.mimeType):"video"!==this.mediaType||i.includes(e.mimeType)))},async switchToTab(e){this.activeTab=e,"page"===e&&0===this.pageMediaList.length?await this.loadPageMedia():"resources"===e&&0===this.resourcesMediaList.length&&await this.loadResourcesMedia()},async loadPageMedia(){this.isLoadingMedia=!0;try{const e=await Kt.Ay.get((0,Gt.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/list`),{params:{folder:"page"}});this.pageMediaList=e.data.media||[]}catch(e){console.error("Failed to load page media:",e)}finally{this.isLoadingMedia=!1}},async loadResourcesMedia(e=""){this.isLoadingMedia=!0;try{const t=await Kt.Ay.get((0,Gt.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/list`),{params:{folder:"resources",path:e}});this.currentResourcesPath=e,this.resourcesMediaList=t.data.media||[]}catch(e){console.error("Failed to load resources media:",e)}finally{this.isLoadingMedia=!1}},selectMedia(e,t){this.selectedMedia={...e,folder:t,path:e.path||e.name},this.selectedFile=null},navigateToFolder(e){this.loadResourcesMedia(e)},getPathUpTo(e){return this.breadcrumbSegments.slice(0,e+1).join("/")},handleFolderClick(e){"folder"===e.type&&this.loadResourcesMedia(e.path)},async handleConfirm(){this.selectedFile?await this.performUpload():this.selectedMedia&&this.$emit("select",{filename:this.selectedMedia.path||this.selectedMedia.name,folder:this.selectedMedia.folder})},async performUpload(e=!1){if(this.selectedFile){this.isUploading=!0;try{if(!e){const e=new FormData;if(e.append("filename",this.selectedFile.name),e.append("target",this.uploadTarget),(await Kt.Ay.post((0,Gt.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/check`),e)).data.exists)return this.duplicateFilename=this.selectedFile.name,this.showDuplicateDialog=!0,void(this.isUploading=!1)}const t=new FormData;t.append("media",this.selectedFile),t.append("target",this.uploadTarget),e&&t.append("overwrite","1");const i=await Kt.Ay.post((0,Gt.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/upload`),t,{headers:{"Content-Type":"multipart/form-data"}});this.$emit("select",{filename:i.data.filename,folder:this.uploadTarget})}catch(e){console.error("Upload failed:",e),(0,Ui.Qg)("Upload failed: "+(e.response?.data?.error||e.message))}finally{this.isUploading=!1}}},handleDuplicateCancel(){this.showDuplicateDialog=!1,this.duplicateFilename=""},handleDuplicateRename(){this.showDuplicateDialog=!1,this.duplicateFilename="",alert("Please rename the file and try again")},async handleDuplicateOverwrite(){this.showDuplicateDialog=!1,await this.performUpload(!0)},formatFileSize(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["B","KB","MB","GB"][t]},isImage:e=>e?.startsWith("image/"),getMediaThumbnail(e,t){if("resources"===t){const t=e.path||e.name,i=t.lastIndexOf("/");if(i>0){const e=t.substring(0,i),a=t.substring(i+1);return(0,Gt.Jv)(`/apps/intravox/api/resources/media/${e}/${a}`)}return(0,Gt.Jv)(`/apps/intravox/api/resources/media/${t}`)}return(0,Gt.Jv)("/apps/intravox/api/pages/{pageId}/media/{filename}",{pageId:this.pageId,filename:e.name})}}};var Mi=i(3576),$i={};$i.styleTagTransform=xe(),$i.setAttributes=ke(),$i.insert=be().bind(null,"head"),$i.domAPI=he(),$i.insertStyleElement=we(),ge()(Mi.A,$i),Mi.A&&Mi.A.locals&&Mi.A.locals;const Xi=(0,Le.A)(Di,[["render",function(e,t,i,n,l,r){const d=(0,a.g2)("NcButton"),s=(0,a.g2)("NcDialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Q3)(" MediaPicker v0.7.2 - Fixed URL generation "),(0,a.bF)(s,{open:i.open,name:i.title,size:"large","onUpdate:open":r.handleClose},{actions:(0,a.k6)(()=>[(0,a.bF)(d,{onClick:r.handleClose},{default:(0,a.k6)(()=>[...t[17]||(t[17]=[(0,a.eW)(" Cancel ",-1)])]),_:1},8,["onClick"]),(0,a.bF)(d,{type:"primary",disabled:l.isUploading||!l.selectedFile&&!l.selectedMedia,onClick:r.handleConfirm},{icon:(0,a.k6)(()=>[l.isUploading?((0,a.uX)(),(0,a.CE)("span",Ii)):(0,a.Q3)("v-if",!0)]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(r.confirmButtonLabel),1)]),_:1},8,["disabled","onClick"])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Zt,[(0,a.Lk)("button",{class:(0,o.C4)(["tab-button",{active:"upload"===l.activeTab}]),onClick:t[0]||(t[0]=e=>l.activeTab="upload")}," Upload ",2),(0,a.Lk)("button",{class:(0,o.C4)(["tab-button",{active:"page"===l.activeTab}]),onClick:t[1]||(t[1]=e=>r.switchToTab("page"))}," Page Media ",2),(0,a.Lk)("button",{class:(0,o.C4)(["tab-button",{active:"resources"===l.activeTab}]),onClick:t[2]||(t[2]=e=>r.switchToTab("resources"))}," Shared Library ",2)]),(0,a.Lk)("div",Yt,[(0,a.Q3)(" Upload Tab "),"upload"===l.activeTab?((0,a.uX)(),(0,a.CE)("div",ei,[(0,a.Lk)("div",ti,[(0,a.Lk)("input",{ref:"fileInput",type:"file",accept:r.acceptTypes,class:"file-input",onChange:t[3]||(t[3]=(...e)=>r.handleFileSelect&&r.handleFileSelect(...e))},null,40,ii),l.selectedFile?((0,a.uX)(),(0,a.CE)("div",ai,[(0,a.Lk)("div",oi,[(0,a.Lk)("span",ni,(0,o.v_)("image"===i.mediaType?"ðŸ–¼ï¸":"ðŸŽ¬"),1),(0,a.Lk)("div",li,[(0,a.Lk)("div",ri,(0,o.v_)(l.selectedFile.name),1),(0,a.Lk)("div",di,(0,o.v_)(r.formatFileSize(l.selectedFile.size)),1)])]),(0,a.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>r.clearFile&&r.clearFile(...e)),class:"btn-remove"},"âœ•")])):((0,a.uX)(),(0,a.CE)("div",{key:0,class:"upload-prompt",onClick:t[4]||(t[4]=t=>e.$refs.fileInput.click())},[t[8]||(t[8]=(0,a.Lk)("div",{class:"upload-icon"},"ðŸ“",-1)),(0,a.Lk)("p",null,"Click to select "+(0,o.v_)("image"===i.mediaType?"an image":"a video"),1),t[9]||(t[9]=(0,a.Lk)("p",{class:"hint"},"or drag and drop",-1))]))])])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Page Media Tab "),"page"===l.activeTab?((0,a.uX)(),(0,a.CE)("div",si,[l.isLoadingMedia?((0,a.uX)(),(0,a.CE)("div",ci,[...t[10]||(t[10]=[(0,a.Lk)("span",{class:"loading-spinner"},null,-1),(0,a.Lk)("p",null,"Loading media...",-1)])])):0===r.filteredPageMedia.length?((0,a.uX)(),(0,a.CE)("div",ui,[...t[11]||(t[11]=[(0,a.Lk)("div",{class:"empty-icon"},"ðŸ“­",-1),(0,a.Lk)("p",null,"No media files in this page yet",-1),(0,a.Lk)("p",{class:"hint"},"Upload files to see them here",-1)])])):((0,a.uX)(),(0,a.CE)("div",gi,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredPageMedia,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:(0,o.C4)(["media-item",{selected:l.selectedMedia?.name===e.name&&"page"===l.selectedMedia?.folder}]),onClick:t=>r.selectMedia(e,"page")},[(0,a.Lk)("div",hi,[r.isImage(e.mimeType)?((0,a.uX)(),(0,a.CE)("img",{key:0,src:r.getMediaThumbnail(e,"page"),alt:e.name},null,8,mi)):((0,a.uX)(),(0,a.CE)("div",bi,[...t[12]||(t[12]=[(0,a.Lk)("span",null,"ðŸŽ¬",-1)])]))]),(0,a.Lk)("div",vi,[(0,a.Lk)("div",{class:"media-name",title:e.name},(0,o.v_)(e.name),9,ki),(0,a.Lk)("div",fi,(0,o.v_)(r.formatFileSize(e.size)),1)])],10,pi))),128))]))])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Resources Tab "),"resources"===l.activeTab?((0,a.uX)(),(0,a.CE)("div",wi,[(0,a.Q3)(" Breadcrumb Navigation "),l.currentResourcesPath?((0,a.uX)(),(0,a.CE)("div",yi,[(0,a.Lk)("button",{class:"breadcrumb-item",onClick:t[6]||(t[6]=e=>r.navigateToFolder(""))}," ðŸ“š Shared Library "),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.breadcrumbSegments,(e,i)=>((0,a.uX)(),(0,a.CE)("span",{key:i},[t[13]||(t[13]=(0,a.Lk)("span",{class:"breadcrumb-separator"},"/",-1)),(0,a.Lk)("button",{class:"breadcrumb-item",onClick:e=>r.navigateToFolder(r.getPathUpTo(i))},(0,o.v_)(e),9,xi)]))),128))])):(0,a.Q3)("v-if",!0),l.isLoadingMedia?((0,a.uX)(),(0,a.CE)("div",Ci,[...t[14]||(t[14]=[(0,a.Lk)("span",{class:"loading-spinner"},null,-1),(0,a.Lk)("p",null,"Loading shared media...",-1)])])):0===r.filteredResourcesMedia.length?((0,a.uX)(),(0,a.CE)("div",Wi,[...t[15]||(t[15]=[(0,a.Lk)("div",{class:"empty-icon"},"ðŸ“š",-1),(0,a.Lk)("p",null,"No media in shared library yet",-1),(0,a.Lk)("p",{class:"hint"},"Upload to shared library to see files here",-1)])])):((0,a.uX)(),(0,a.CE)("div",Li,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredResourcesMedia,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,class:(0,o.C4)(["media-item",{selected:"file"===e.type&&l.selectedMedia?.path===e.path&&"resources"===l.selectedMedia?.folder,"is-folder":"folder"===e.type}]),onClick:t=>"folder"===e.type?r.handleFolderClick(e):r.selectMedia(e,"resources")},[(0,a.Lk)("div",_i,["folder"===e.type?((0,a.uX)(),(0,a.CE)("div",Ai," ðŸ“ ")):r.isImage(e.mimeType)?((0,a.uX)(),(0,a.CE)("img",{key:1,src:r.getMediaThumbnail(e,"resources"),alt:e.name},null,8,zi)):((0,a.uX)(),(0,a.CE)("div",Fi,[...t[16]||(t[16]=[(0,a.Lk)("span",null,"ðŸŽ¬",-1)])]))]),(0,a.Lk)("div",Ti,[(0,a.Lk)("div",{class:"media-name",title:e.name},(0,o.v_)(e.name),9,Ri),"file"===e.type?((0,a.uX)(),(0,a.CE)("div",Si,(0,o.v_)(r.formatFileSize(e.size)),1)):((0,a.uX)(),(0,a.CE)("div",Ei,"Folder"))])],10,Pi))),128))]))])):(0,a.Q3)("v-if",!0)]),l.showDuplicateDialog?((0,a.uX)(),(0,a.Wv)(s,{key:0,open:l.showDuplicateDialog,name:"File Already Exists",size:"small","onUpdate:open":t[7]||(t[7]=e=>l.showDuplicateDialog=!1)},{actions:(0,a.k6)(()=>[(0,a.bF)(d,{onClick:r.handleDuplicateCancel},{default:(0,a.k6)(()=>[...t[18]||(t[18]=[(0,a.eW)(" Cancel ",-1)])]),_:1},8,["onClick"]),(0,a.bF)(d,{onClick:r.handleDuplicateRename},{default:(0,a.k6)(()=>[...t[19]||(t[19]=[(0,a.eW)(" Use different name ",-1)])]),_:1},8,["onClick"]),(0,a.bF)(d,{type:"error",onClick:r.handleDuplicateOverwrite},{default:(0,a.k6)(()=>[...t[20]||(t[20]=[(0,a.eW)(" Overwrite ",-1)])]),_:1},8,["onClick"])]),default:(0,a.k6)(()=>[(0,a.Lk)("p",null,'A file with the name "'+(0,o.v_)(l.duplicateFilename)+'" already exists.',1),t[21]||(t[21]=(0,a.Lk)("p",null,"What would you like to do?",-1))]),_:1},8,["open"])):(0,a.Q3)("v-if",!0)]),_:1},8,["open","name","onUpdate:open"])],2112)}],["__scopeId","data-v-280bf705"]]);var Vi=i(5442),Bi=i(1200),Hi=i(7594),Qi=i(8005);const Ni={name:"WidgetEditor",components:{NcButton:B.x1,NcModal:B.FH,EditorContent:Vi.$Z,PageTreeSelect:qt.A,MediaPicker:Xi,ImageIcon:le.A,VideoIcon:se.A},props:{widget:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["close","save"],data(){return{localWidget:JSON.parse(JSON.stringify(this.widget)),editor:null,detectedPlatform:null,embedUrl:null,uploadLimitBytes:52428800,uploadLimitMB:50,videoDomainWhitelist:[],videoWhitelistLoaded:!1,convertVideoUrlTimeout:null,isUploading:!1,showMediaPicker:!1,mediaPickerType:"image"}},async mounted(){try{const[e,t]=await Promise.all([Kt.Ay.get((0,Gt.Jv)("/apps/intravox/api/settings/upload-limit")),Kt.Ay.get((0,Gt.Jv)("/apps/intravox/api/settings/video-domains"))]);e.data.limit&&(this.uploadLimitBytes=e.data.limit,this.uploadLimitMB=e.data.limitMB),t.data.domains&&(this.videoDomainWhitelist=t.data.domains),this.videoWhitelistLoaded=!0}catch{this.videoWhitelistLoaded=!0}if("video"===this.localWidget.type&&"local"!==this.localWidget.provider){const e=this.localWidget.originalSrc,t=this.localWidget.src;e?(this.localWidget.src=e,this.convertVideoUrl()):t&&(this.embedUrl=t,this.localWidget.originalSrc=t,this.detectPlatformFromEmbedUrl(t))}if("text"===this.localWidget.type){let e=this.localWidget.content||"";(e.includes("&lt;")||e.includes("&gt;"))&&(e=this.decodeHtml(e)),this.editor=new Vi.KE({extensions:[Bi.A.configure({paragraph:{HTMLAttributes:{class:"tight-paragraph"}}}),Hi.A,Qi.A.configure({placeholder:"Typ hier je tekst..."})],editorProps:{attributes:{class:"intravox-editor-full-width"}},content:e,onUpdate:({editor:e})=>{this.localWidget.content=e.getHTML()}})}},beforeUnmount(){this.editor&&this.editor.destroy(),this.convertVideoUrlTimeout&&clearTimeout(this.convertVideoUrlTimeout)},computed:{isVideoBlocked(){if("video"!==this.localWidget.type||"local"===this.localWidget.provider)return!1;const e=this.embedUrl||this.localWidget.src;if(!e)return!1;if(0===this.videoDomainWhitelist.length)return!0;try{const t=new URL(e).origin.toLowerCase();return!this.videoDomainWhitelist.some(e=>{try{const i=new URL(e);return t===i.origin.toLowerCase()}catch{return!1}})}catch{return!1}},blockedDomain(){if(!this.isVideoBlocked)return null;const e=this.embedUrl||this.localWidget.src;try{return new URL(e).hostname}catch{return e}},canSaveVideo(){return!("video"===this.localWidget.type&&("local"===this.localWidget.provider?!this.localWidget.src:!this.embedUrl||this.isVideoBlocked))}},methods:{t(e,t={}){return this.$t(e,t)},decodeHtml(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value},save(){"video"===this.localWidget.type&&"local"!==this.localWidget.provider&&this.convertVideoUrl(),this.$emit("save",this.localWidget),this.$emit("close")},openMediaPicker(e){this.mediaPickerType=e,this.showMediaPicker=!0},handleMediaSelect(e){this.localWidget.src=e.filename,this.localWidget.mediaFolder=e.folder,"video"===this.mediaPickerType&&(this.localWidget.provider="local"),this.showMediaPicker=!1},debouncedConvertVideoUrl(){this.convertVideoUrlTimeout&&clearTimeout(this.convertVideoUrlTimeout),this.convertVideoUrlTimeout=setTimeout(()=>{this.convertVideoUrl()},500)},getImageUrl(e){if(!e)return"";if("resources"===this.localWidget.mediaFolder)return(0,Gt.Jv)(`/apps/intravox/api/resources/media/${e}`);const t=e.replace(/^(ðŸ“· images\/|images\/|_media\/)/,"");return(0,Gt.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/${t}`)},setImageSize(e){this.localWidget.width=e,void 0!==this.localWidget.height&&delete this.localWidget.height},setObjectPosition(e){this.localWidget.objectPosition=e},setImageLinkType(e){this.localWidget.linkType=e,"none"===e?(this.localWidget.linkPageId=null,this.localWidget.linkUrl=null,this.localWidget.linkNewTab=void 0):"internal"===e?(this.localWidget.linkUrl=null,this.localWidget.linkNewTab=void 0):"external"===e&&(this.localWidget.linkPageId=null,void 0===this.localWidget.linkNewTab&&(this.localWidget.linkNewTab=!0))},convertVideoUrl(){const e=this.localWidget.src||"";if(!e)return this.detectedPlatform=null,this.embedUrl=null,void(this.localWidget.originalSrc=null);e.includes("/embed/")||e.includes("/videos/embed/")||e.includes("player.vimeo.com")||(this.localWidget.originalSrc=e);try{const t=new URL(e),i=t.hostname.toLowerCase(),a=i.replace("www.","").replace("m.","").replace("music.","");if("youtube.com"===a||"youtu.be"===a||"youtube-nocookie.com"===a){this.detectedPlatform="YouTube";let e=null;return e="youtu.be"===a?t.pathname.slice(1).split(/[/?]/)[0]:t.searchParams.get("v")||t.pathname.match(/\/(?:embed|v|shorts|live)\/([^/?]+)/)?.[1]||t.pathname.match(/\/watch\/([^/?]+)/)?.[1],e&&!/^[a-zA-Z0-9_-]{11}$/.test(e)&&(e=null),void(e&&(this.embedUrl=`https://www.youtube-nocookie.com/embed/${e}`,this.localWidget.src=this.embedUrl))}if(i.includes("vimeo.com")){this.detectedPlatform="Vimeo";let e=null,i=null;const a=t.pathname.match(/\/(\d+)\/([a-f0-9]+)$/);if(a)e=a[1],i=a[2];else{const i=t.pathname.match(/\/(\d+)/);i&&(e=i[1])}return void(e&&(this.embedUrl=i?`https://player.vimeo.com/video/${e}?h=${i}`:`https://player.vimeo.com/video/${e}`,this.localWidget.src=this.embedUrl))}if(i.includes("dailymotion.com")||i.includes("dai.ly")){this.detectedPlatform="Dailymotion";let e=null;if(i.includes("dai.ly"))e=t.pathname.slice(1);else{const i=t.pathname.match(/\/video\/([a-zA-Z0-9]+)/);i&&(e=i[1])}return void(e&&(this.embedUrl=`https://www.dailymotion.com/embed/video/${e}`,this.localWidget.src=this.embedUrl))}if(t.pathname.includes("/videos/watch/")||t.pathname.includes("/w/")||t.pathname.includes("/videos/embed/")){this.detectedPlatform="PeerTube";let e=t.pathname;if(e.includes("/videos/watch/"))e=e.replace("/videos/watch/","/videos/embed/");else if(e.match(/^\/w\/[a-zA-Z0-9-]+/)){const t=e.split("/w/")[1].split("/")[0];e=`/videos/embed/${t}`}return t.pathname=e,t.search="",t.searchParams.set("p2p","0"),t.searchParams.set("peertubeLink","0"),this.embedUrl=t.toString(),void(this.localWidget.src=this.embedUrl)}if(i.includes("tiktok.com")){this.detectedPlatform="TikTok";const e=t.pathname.match(/\/video\/(\d+)/);return void(e&&(this.embedUrl=`https://www.tiktok.com/embed/v2/${e[1]}`,this.localWidget.src=this.embedUrl))}if(i.includes("twitch.tv")){this.detectedPlatform="Twitch";const e=t.pathname.match(/^\/([a-zA-Z0-9_]+)$/),i=t.pathname.match(/\/videos\/(\d+)/),a=t.pathname.match(/\/clip\/([a-zA-Z0-9-]+)/);return void(i?(this.embedUrl=`https://player.twitch.tv/?video=${i[1]}&parent=${window.location.hostname}`,this.localWidget.src=this.embedUrl):a?(this.embedUrl=`https://clips.twitch.tv/embed?clip=${a[1]}&parent=${window.location.hostname}`,this.localWidget.src=this.embedUrl):e&&(this.embedUrl=`https://player.twitch.tv/?channel=${e[1]}&parent=${window.location.hostname}`,this.localWidget.src=this.embedUrl))}this.detectedPlatform=null,t.pathname.includes("/embed")||t.pathname.includes("/player"),this.embedUrl=e,this.localWidget.src=e,this.localWidget.originalSrc||(this.localWidget.originalSrc=e)}catch(e){this.detectedPlatform=null,this.embedUrl=null}},detectPlatformFromEmbedUrl(e){if(e)try{const t=new URL(e),i=t.hostname.toLowerCase();i.includes("youtube-nocookie.com")||i.includes("youtube.com")?this.detectedPlatform="YouTube":i.includes("vimeo.com")?this.detectedPlatform="Vimeo":i.includes("dailymotion.com")?this.detectedPlatform="Dailymotion":i.includes("tiktok.com")?this.detectedPlatform="TikTok":i.includes("twitch.tv")?this.detectedPlatform="Twitch":t.pathname.includes("/videos/embed/")?this.detectedPlatform="PeerTube":this.detectedPlatform=null}catch{this.detectedPlatform=null}else this.detectedPlatform=null},getVideoUrl(e){if(!e)return"";if("resources"===this.localWidget.mediaFolder)return(0,Gt.Jv)(`/apps/intravox/api/resources/media/${e}`);const t=e.replace(/^(videos\/|_media\/)/,"");return(0,Gt.Jv)(`/apps/intravox/api/pages/${this.pageId}/media/${t}`)}}};var ji=i(5520),Oi={};Oi.styleTagTransform=xe(),Oi.setAttributes=ke(),Oi.insert=be().bind(null,"head"),Oi.domAPI=he(),Oi.insertStyleElement=we(),ge()(ji.A,Oi),ji.A&&ji.A.locals&&ji.A.locals;const Ji=(0,Le.A)(Ni,[["render",function(e,t,i,n,l,r){const d=(0,a.g2)("editor-content"),s=(0,a.g2)("ImageIcon"),c=(0,a.g2)("NcButton"),u=(0,a.g2)("PageTreeSelect"),g=(0,a.g2)("VideoIcon"),p=(0,a.g2)("MediaPicker"),h=(0,a.g2)("NcModal");return(0,a.uX)(),(0,a.Wv)(h,{onClose:t[39]||(t[39]=t=>e.$emit("close")),name:r.t("Edit widget"),size:"large",class:"widget-editor-modal"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Ae,[(0,a.Q3)(" Text Widget "),"text"===l.localWidget.type?((0,a.uX)(),(0,a.CE)("div",ze,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Text:")),1),(0,a.Q3)(" Tiptap Rich Text Editor "),l.editor?((0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("button",{type:"button",onClick:t[0]||(t[0]=e=>l.editor.chain().focus().toggleBold().run()),class:(0,o.C4)([{"is-active":l.editor.isActive("bold")},"toolbar-btn"]),title:r.t("Bold")},[...t[40]||(t[40]=[(0,a.Lk)("strong",null,"B",-1)])],10,Te),(0,a.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>l.editor.chain().focus().toggleItalic().run()),class:(0,o.C4)([{"is-active":l.editor.isActive("italic")},"toolbar-btn"]),title:r.t("Italic")},[...t[41]||(t[41]=[(0,a.Lk)("em",null,"I",-1)])],10,Re),(0,a.Lk)("button",{type:"button",onClick:t[2]||(t[2]=e=>l.editor.chain().focus().toggleUnderline().run()),class:(0,o.C4)([{"is-active":l.editor.isActive("underline")},"toolbar-btn"]),title:r.t("Underline")},[...t[42]||(t[42]=[(0,a.Lk)("u",null,"U",-1)])],10,Se),(0,a.Lk)("button",{type:"button",onClick:t[3]||(t[3]=e=>l.editor.chain().focus().toggleStrike().run()),class:(0,o.C4)([{"is-active":l.editor.isActive("strike")},"toolbar-btn"]),title:r.t("Strikethrough")},[...t[43]||(t[43]=[(0,a.Lk)("s",null,"S",-1)])],10,Ee),t[44]||(t[44]=(0,a.Lk)("span",{class:"toolbar-divider"},null,-1)),(0,a.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>l.editor.chain().focus().toggleBulletList().run()),class:(0,o.C4)([{"is-active":l.editor.isActive("bulletList")},"toolbar-btn"]),title:r.t("Bullet list")}," â€¢ List ",10,Ie),(0,a.Lk)("button",{type:"button",onClick:t[5]||(t[5]=e=>l.editor.chain().focus().toggleOrderedList().run()),class:(0,o.C4)([{"is-active":l.editor.isActive("orderedList")},"toolbar-btn"]),title:r.t("Numbered list")}," 1. List ",10,Ue)])):(0,a.Q3)("v-if",!0),(0,a.bF)(d,{editor:l.editor,class:"rich-text-editor"},null,8,["editor"])])):"heading"===l.localWidget.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Q3)(" Heading Widget "),(0,a.Lk)("div",null,[(0,a.Lk)("div",De,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Heading:")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.localWidget.content=e),type:"text",placeholder:r.t("Enter your heading..."),class:"heading-text-input"},null,8,Me),[[_e.Jo,l.localWidget.content]])]),(0,a.Lk)("div",$e,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Level:")),1),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.localWidget.level=e),class:"heading-level-select"},[(0,a.Lk)("option",Xe,(0,o.v_)(r.t("H1 - Largest")),1),(0,a.Lk)("option",Ve,(0,o.v_)(r.t("H2")),1),(0,a.Lk)("option",Be,(0,o.v_)(r.t("H3")),1),(0,a.Lk)("option",He,(0,o.v_)(r.t("H4")),1),(0,a.Lk)("option",Qe,(0,o.v_)(r.t("H5")),1),(0,a.Lk)("option",Ne,(0,o.v_)(r.t("H6 - Smallest")),1)],512),[[_e.u1,l.localWidget.level,void 0,{number:!0}]])])])],2112)):"image"===l.localWidget.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.Q3)(" Image Widget "),(0,a.Lk)("div",null,[(0,a.Lk)("div",je,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Image:")),1),(0,a.bF)(c,{type:"primary",onClick:t[8]||(t[8]=e=>r.openMediaPicker("image"))},{icon:(0,a.k6)(()=>[(0,a.bF)(s,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(r.t("Browse media...")),1)]),_:1})]),l.localWidget.src?((0,a.uX)(),(0,a.CE)("div",Oe,[(0,a.Lk)("img",{src:r.getImageUrl(l.localWidget.src),alt:l.localWidget.alt},null,8,Je)])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",Ke,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Alt text:")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.localWidget.alt=e),type:"text",placeholder:r.t("Description of the image..."),class:"widget-input"},null,8,Ge),[[_e.Jo,l.localWidget.alt]])]),(0,a.Lk)("div",qe,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Size:")),1),(0,a.Lk)("div",Ze,[(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:300===l.localWidget.width},"size-preset-btn"]),onClick:t[10]||(t[10]=e=>r.setImageSize(300))},(0,o.v_)(r.t("Small"))+" (300px) ",3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:500===l.localWidget.width},"size-preset-btn"]),onClick:t[11]||(t[11]=e=>r.setImageSize(500))},(0,o.v_)(r.t("Medium"))+" (500px) ",3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:800===l.localWidget.width},"size-preset-btn"]),onClick:t[12]||(t[12]=e=>r.setImageSize(800))},(0,o.v_)(r.t("Large"))+" (800px) ",3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:!l.localWidget.width||null===l.localWidget.width},"size-preset-btn"]),onClick:t[13]||(t[13]=e=>r.setImageSize(null))},(0,o.v_)(r.t("Full width")),3)])]),l.localWidget.width?((0,a.uX)(),(0,a.CE)("div",Ye,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Custom width (pixels):")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.localWidget.width=e),type:"number",min:"50",max:"2000",class:"widget-input",placeholder:r.t("Width in pixels")},null,8,et),[[_e.Jo,l.localWidget.width,void 0,{number:!0}]]),(0,a.Lk)("p",tt,(0,o.v_)(r.t("Height will automatically adjust to maintain aspect ratio")),1)])):(0,a.Q3)("v-if",!0),l.localWidget.width&&null!==l.localWidget.width?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("div",it,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Vertical position:")),1),(0,a.Lk)("div",at,[(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:!l.localWidget.objectPosition||"center"===l.localWidget.objectPosition},"size-preset-btn"]),onClick:t[15]||(t[15]=e=>r.setObjectPosition("center"))},(0,o.v_)(r.t("Center")),3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"top"===l.localWidget.objectPosition},"size-preset-btn"]),onClick:t[16]||(t[16]=e=>r.setObjectPosition("top"))},(0,o.v_)(r.t("Top")),3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"bottom"===l.localWidget.objectPosition},"size-preset-btn"]),onClick:t[17]||(t[17]=e=>r.setObjectPosition("bottom"))},(0,o.v_)(r.t("Bottom")),3)]),(0,a.Lk)("p",ot,(0,o.v_)(r.t("Choose which part of the image is visible when cropped")),1)])),(0,a.Q3)(" Image Link Section "),(0,a.Lk)("div",nt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Link:")),1),(0,a.Lk)("div",lt,[(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:!l.localWidget.linkType||"none"===l.localWidget.linkType},"size-preset-btn"]),onClick:t[18]||(t[18]=e=>r.setImageLinkType("none"))},(0,o.v_)(r.t("No link")),3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"internal"===l.localWidget.linkType},"size-preset-btn"]),onClick:t[19]||(t[19]=e=>r.setImageLinkType("internal"))},(0,o.v_)(r.t("Internal page")),3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"external"===l.localWidget.linkType},"size-preset-btn"]),onClick:t[20]||(t[20]=e=>r.setImageLinkType("external"))},(0,o.v_)(r.t("External URL")),3)])]),(0,a.Q3)(" Internal page selector "),"internal"===l.localWidget.linkType?((0,a.uX)(),(0,a.CE)("div",rt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Select page:")),1),(0,a.bF)(u,{modelValue:l.localWidget.linkPageId,"onUpdate:modelValue":t[21]||(t[21]=e=>l.localWidget.linkPageId=e),placeholder:r.t("Select a page..."),clearable:!0},null,8,["modelValue","placeholder"]),(0,a.Lk)("p",dt,(0,o.v_)(r.t("Click on the image to navigate to this page")),1)])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" External URL input "),"external"===l.localWidget.linkType?((0,a.uX)(),(0,a.CE)("div",st,[(0,a.Lk)("label",null,(0,o.v_)(r.t("URL:")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>l.localWidget.linkUrl=e),type:"url",placeholder:r.t("https://example.com"),class:"widget-input"},null,8,ct),[[_e.Jo,l.localWidget.linkUrl]]),(0,a.Lk)("div",ut,[(0,a.Lk)("label",gt,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=e=>l.localWidget.linkNewTab=e)},null,512),[[_e.lH,l.localWidget.linkNewTab]]),(0,a.eW)(" "+(0,o.v_)(r.t("Open in new tab")),1)])]),(0,a.Lk)("p",pt,(0,o.v_)(l.localWidget.linkNewTab?r.t("Click on the image to open this URL in a new tab"):r.t("Click on the image to open this URL")),1)])):(0,a.Q3)("v-if",!0)])],2112)):"file"===l.localWidget.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:3},[(0,a.Q3)(" File Widget "),(0,a.Lk)("div",null,[(0,a.Lk)("div",ht,[(0,a.Lk)("label",null,(0,o.v_)(r.t("File name:")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[24]||(t[24]=e=>l.localWidget.name=e),type:"text",placeholder:"Document.pdf",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.name]])]),(0,a.Lk)("div",mt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("File path (in IntraVox folder):")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>l.localWidget.path=e),type:"text",placeholder:"documents/file.pdf",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.path]])])])],2112)):"spacer"===l.localWidget.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Q3)(" Spacer Widget "),(0,a.Lk)("div",null,[(0,a.Lk)("div",bt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Height (pixels):")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>l.localWidget.height=e),type:"number",min:"10",max:"200",placeholder:"20",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.height,void 0,{number:!0}]])])])],2112)):"video"===l.localWidget.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:5},[(0,a.Q3)(" Video Widget "),(0,a.Lk)("div",null,[(0,a.Q3)(" Provider keuze "),(0,a.Lk)("div",vt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Video source:")),1),(0,a.Lk)("div",kt,[(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"local"!==l.localWidget.provider},"size-preset-btn"]),onClick:t[27]||(t[27]=e=>{l.localWidget.provider="embed",l.localWidget.src=""})},(0,o.v_)(r.t("Video URL")),3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"local"===l.localWidget.provider},"size-preset-btn"]),onClick:t[28]||(t[28]=e=>{l.localWidget.provider="local",l.localWidget.src=""})},(0,o.v_)(r.t("Local file")),3)])]),(0,a.Q3)(" Video URL (YouTube, Vimeo, PeerTube, etc.) "),"local"!==l.localWidget.provider?((0,a.uX)(),(0,a.CE)("div",ft,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Video URL:")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>l.localWidget.src=e),type:"url",placeholder:"https://www.youtube.com/watch?v=... or https://vimeo.com/...",class:"widget-input",onBlur:t[30]||(t[30]=(...e)=>r.convertVideoUrl&&r.convertVideoUrl(...e)),onInput:t[31]||(t[31]=(...e)=>r.debouncedConvertVideoUrl&&r.debouncedConvertVideoUrl(...e))},null,544),[[_e.Jo,l.localWidget.src]]),(0,a.Lk)("p",wt,(0,o.v_)(r.t("Paste a video URL from YouTube, Vimeo, PeerTube or other supported platforms.")),1),l.detectedPlatform?((0,a.uX)(),(0,a.CE)("p",yt,[(0,a.eW)((0,o.v_)(r.t("Detected:"))+" ",1),(0,a.Lk)("strong",null,(0,o.v_)(l.detectedPlatform),1)])):(0,a.Q3)("v-if",!0)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Q3)(" Lokaal bestand upload "),(0,a.Lk)("div",xt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Video:")),1),(0,a.bF)(c,{type:"primary",onClick:t[32]||(t[32]=e=>r.openMediaPicker("video"))},{icon:(0,a.k6)(()=>[(0,a.bF)(g,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(r.t("Browse media...")),1)]),_:1}),l.localWidget.src?((0,a.uX)(),(0,a.CE)("div",Ct,(0,o.v_)(r.t("Current:"))+" "+(0,o.v_)(l.localWidget.src),1)):(0,a.Q3)("v-if",!0)])],2112)),(0,a.Q3)(" Titel "),(0,a.Lk)("div",Wt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Title (optional):")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>l.localWidget.title=e),type:"text",class:"widget-input"},null,512),[[_e.Jo,l.localWidget.title]])]),(0,a.Q3)(" Playback Options "),(0,a.Lk)("div",Lt,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Playback options:")),1),(0,a.Lk)("div",Pt,[(0,a.Lk)("label",_t,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[34]||(t[34]=e=>l.localWidget.autoplay=e)},null,512),[[_e.lH,l.localWidget.autoplay]]),(0,a.eW)(" "+(0,o.v_)(r.t("Autoplay when page loads")),1)]),(0,a.Lk)("p",At,(0,o.v_)(r.t("Video will start automatically (muted for browser compatibility)")),1)]),(0,a.Lk)("div",zt,[(0,a.Lk)("label",Ft,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[35]||(t[35]=e=>l.localWidget.loop=e)},null,512),[[_e.lH,l.localWidget.loop]]),(0,a.eW)(" "+(0,o.v_)(r.t("Loop video")),1)]),(0,a.Lk)("p",Tt,(0,o.v_)(r.t("Video will restart when finished")),1)]),(0,a.Lk)("div",Rt,[(0,a.Lk)("label",St,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[36]||(t[36]=e=>l.localWidget.muted=e)},null,512),[[_e.lH,l.localWidget.muted]]),(0,a.eW)(" "+(0,o.v_)(r.t("Muted")),1)]),(0,a.Lk)("p",Et,(0,o.v_)(r.t("Video plays without sound (required for autoplay in most browsers)")),1)])]),(0,a.Q3)(" Preview "),l.embedUrl&&"local"!==l.localWidget.provider?((0,a.uX)(),(0,a.CE)("div",It,[(0,a.Lk)("p",null,(0,o.v_)(r.t("Preview:")),1),(0,a.Q3)(" Blocked video warning - matches Widget.vue styling "),r.isVideoBlocked?((0,a.uX)(),(0,a.CE)("div",Ut,[t[46]||(t[46]=(0,a.Lk)("div",{class:"blocked-icon"},"ðŸš«",-1)),(0,a.Lk)("p",Dt,(0,o.v_)(r.t("Video service not allowed")),1),l.localWidget.src?((0,a.uX)(),(0,a.CE)("p",Mt,[t[45]||(t[45]=(0,a.Lk)("span",{class:"url-label"},"URL:",-1)),(0,a.Lk)("code",$t,(0,o.v_)(l.localWidget.src),1)])):(0,a.Q3)("v-if",!0),(0,a.Lk)("p",Xt,(0,o.v_)(r.t("Please contact your administrator if you need access to this video service.")),1)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Q3)(" Normal preview "),(0,a.Lk)("div",Vt,[(0,a.Lk)("iframe",{src:l.embedUrl,allow:"autoplay; encrypted-media; picture-in-picture; fullscreen",sandbox:"allow-scripts allow-same-origin allow-presentation allow-popups",allowfullscreen:"",referrerpolicy:"strict-origin-when-cross-origin",style:{width:"100%",height:"100%",border:"none"}},null,8,Bt)])],2112))])):"local"===l.localWidget.provider&&l.localWidget.src?((0,a.uX)(),(0,a.CE)("div",Ht,[(0,a.Lk)("p",null,(0,o.v_)(r.t("Preview:")),1),(0,a.Lk)("div",Qt,[(0,a.Lk)("video",{src:r.getVideoUrl(l.localWidget.src),controls:"",muted:"",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,Nt)])])):"local"===l.localWidget.provider||l.embedUrl?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Q3)(" No URL entered yet hint "),(0,a.Lk)("div",jt,[(0,a.Lk)("p",Ot,(0,o.v_)(r.t("Enter a video URL above to see a preview.")),1)])],2112))])],2112)):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",Jt,[(0,a.bF)(c,{onClick:t[37]||(t[37]=t=>e.$emit("close")),type:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(r.t("Cancel")),1)]),_:1}),(0,a.bF)(c,{onClick:r.save,type:"primary",disabled:l.isUploading||"video"===l.localWidget.type&&!r.canSaveVideo},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(r.t("Save")),1)]),_:1},8,["onClick","disabled"])])]),(0,a.Q3)(" Media Picker Dialog "),l.showMediaPicker?((0,a.uX)(),(0,a.Wv)(p,{key:0,open:l.showMediaPicker,"page-id":i.pageId,"media-type":l.mediaPickerType,title:"image"===l.mediaPickerType?r.t("Select Image"):r.t("Select Video"),onClose:t[38]||(t[38]=e=>l.showMediaPicker=!1),onSelect:r.handleMediaSelect},null,8,["open","page-id","media-type","title","onSelect"])):(0,a.Q3)("v-if",!0)]),_:1},8,["name"])}],["__scopeId","data-v-3d4e419c"]]),Ki={class:"links-editor-content"},Gi={class:"form-section"},qi={class:"form-group"},Zi={value:1},Yi={value:2},ea={value:3},ta={value:4},ia={class:"form-group"},aa={class:"color-presets"},oa={class:"form-section"},na={class:"section-header"},la={key:0,class:"links-list"},ra={class:"link-number"},da={class:"link-fields"},sa={class:"form-row"},ca={class:"form-group flex-1"},ua=["onUpdate:modelValue","placeholder"],ga={class:"form-group flex-1"},pa=["onUpdate:modelValue"],ha={class:"form-row"},ma={class:"form-group flex-1"},ba={class:"icon-option"},va={class:"icon-option"},ka={class:"form-group flex-1"},fa={class:"color-presets"},wa=["onClick"],ya=["onClick"],xa=["onClick","title"],Ca={key:1,class:"empty-state"},Wa={class:"modal-footer"};var La=i(8990),Pa=i(7021),_a=i(8932),Aa=i(85),za=i(3046),Fa=i(2693),Ta=i(4372),Ra=i(2607),Sa=i(5204),Ea=i(2212),Ia=i(1290),Ua=i(4081),Da=i(4049),Ma=i(1358),$a=i(689),Xa=i(790),Va=i(2565),Ba=i(6441),Ha=i(211),Qa=i(2192),Na=i(793);const ja={name:"LinksEditor",components:{NcButton:B.x1,NcModal:B.FH,NcSelect:B.EQ,Plus:H.A,Delete:K.A,ViewGrid:de.A,Home:La.A,Information:Pa.A,Email:_a.A,Phone:Aa.A,Web:za.A,FileDocument:Fa.A,Download:Ta.A,Help:Ra.A,Cog:Sa.A,Account:Ea.A,AccountGroup:Ia.A,Calendar:Ua.A,ChartLine:Da.A,Briefcase:Ma.A,School:$a.A,Star:Xa.A,Heart:Va.A,LightbulbOn:Ba.A,Rocket:Ha.A,Archive:Qa.A,OpenInNew:Na.A},props:{widget:{type:Object,required:!0}},emits:["close","save"],data(){return{localWidget:JSON.parse(JSON.stringify(this.widget))}},computed:{iconOptions(){return[{value:"home",label:this.t("Home")},{value:"information",label:this.t("Information")},{value:"email",label:this.t("Email")},{value:"phone",label:this.t("Phone")},{value:"web",label:this.t("Website")},{value:"file-document",label:this.t("Document")},{value:"download",label:this.t("Download")},{value:"help",label:this.t("Help")},{value:"cog",label:this.t("Settings")},{value:"account",label:this.t("Account")},{value:"account-group",label:this.t("Team")},{value:"calendar",label:this.t("Calendar")},{value:"chart-line",label:this.t("Analytics")},{value:"briefcase",label:this.t("Business")},{value:"school",label:this.t("Education")},{value:"star",label:this.t("Favorite")},{value:"heart",label:this.t("Like")},{value:"lightbulb-on",label:this.t("Idea")},{value:"rocket",label:this.t("Launch")},{value:"archive",label:this.t("Archive")},{value:"open-in-new",label:this.t("External link")}]}},mounted(){this.localWidget.items||(this.localWidget.items=[]),this.localWidget.columns||(this.localWidget.columns=2),this.localWidget.items&&this.localWidget.items.forEach(e=>{e.icon&&!e.iconObject&&(e.iconObject=this.iconOptions.find(t=>t.value===e.icon)),!e.text&&e.title&&(e.text=e.title)})},methods:{t:(e,t={})=>(0,V.Tl)("intravox",e,t),getIconComponent:e=>({home:"Home",information:"Information",email:"Email",phone:"Phone",web:"Web","file-document":"FileDocument",download:"Download",help:"Help",cog:"Cog",account:"Account","account-group":"AccountGroup",calendar:"Calendar","chart-line":"ChartLine",briefcase:"Briefcase",school:"School",star:"Star",heart:"Heart","lightbulb-on":"LightbulbOn",rocket:"Rocket",archive:"Archive","open-in-new":"OpenInNew"}[e]||"OpenInNew"),addLink(){this.localWidget.items||(this.localWidget.items=[]),this.localWidget.items.push({text:"",url:"",icon:"open-in-new",iconObject:this.iconOptions.find(e=>"open-in-new"===e.value),backgroundColor:null})},updateLinkIcon(e,t){this.localWidget.items[e].icon=t?t.value:null,this.localWidget.items[e].iconObject=t},removeLink(e){this.localWidget.items.splice(e,1)},setBackgroundColor(e){this.localWidget.backgroundColor=e},setLinkBackground(e,t){this.localWidget.items[e].backgroundColor=t},save(){const e=JSON.parse(JSON.stringify(this.localWidget));e.items&&e.items.forEach(e=>{delete e.iconObject}),this.$emit("save",e),this.$emit("close")}}};var Oa=i(7245),Ja={};Ja.styleTagTransform=xe(),Ja.setAttributes=ke(),Ja.insert=be().bind(null,"head"),Ja.domAPI=he(),Ja.insertStyleElement=we(),ge()(Oa.A,Ja),Oa.A&&Oa.A.locals&&Oa.A.locals;const Ka=(0,Le.A)(ja,[["render",function(e,t,i,n,l,r){const d=(0,a.g2)("Plus"),s=(0,a.g2)("NcButton"),c=(0,a.g2)("NcSelect"),u=(0,a.g2)("Delete"),g=(0,a.g2)("ViewGrid"),p=(0,a.g2)("NcModal");return(0,a.uX)(),(0,a.Wv)(p,{onClose:t[5]||(t[5]=t=>e.$emit("close")),name:r.t("Edit links"),size:"large",class:"links-editor-modal"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Ki,[(0,a.Q3)(" Container Settings "),(0,a.Lk)("div",Gi,[(0,a.Lk)("h3",null,(0,o.v_)(r.t("Container settings")),1),(0,a.Lk)("div",qi,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Grid columns:")),1),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.localWidget.columns=e),class:"widget-input"},[(0,a.Lk)("option",Zi,"1 "+(0,o.v_)(r.t("column")),1),(0,a.Lk)("option",Yi,"2 "+(0,o.v_)(r.t("columns")),1),(0,a.Lk)("option",ea,"3 "+(0,o.v_)(r.t("columns")),1),(0,a.Lk)("option",ta,"4 "+(0,o.v_)(r.t("columns")),1)],512),[[_e.u1,l.localWidget.columns,void 0,{number:!0}]])]),(0,a.Lk)("div",ia,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Background color:")),1),(0,a.Lk)("div",aa,[(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:!l.localWidget.backgroundColor},"color-preset-btn"]),onClick:t[1]||(t[1]=e=>r.setBackgroundColor(null))},(0,o.v_)(r.t("None")),3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"var(--color-background-hover)"===l.localWidget.backgroundColor},"color-preset-btn"]),onClick:t[2]||(t[2]=e=>r.setBackgroundColor("var(--color-background-hover)"))},(0,o.v_)(r.t("Light")),3),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"var(--color-primary-element)"===l.localWidget.backgroundColor},"color-preset-btn"]),onClick:t[3]||(t[3]=e=>r.setBackgroundColor("var(--color-primary-element)"))},(0,o.v_)(r.t("Primary")),3)])])]),(0,a.Q3)(" Links List "),(0,a.Lk)("div",oa,[(0,a.Lk)("div",na,[(0,a.Lk)("h3",null,(0,o.v_)(r.t("Links")),1),(0,a.bF)(s,{onClick:r.addLink,type:"primary"},{icon:(0,a.k6)(()=>[(0,a.bF)(d,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(r.t("Add link")),1)]),_:1},8,["onClick"])]),l.localWidget.items&&l.localWidget.items.length>0?((0,a.uX)(),(0,a.CE)("div",la,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.localWidget.items,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"link-editor-item"},[(0,a.Lk)("div",ra,(0,o.v_)(t+1),1),(0,a.Lk)("div",da,[(0,a.Lk)("div",sa,[(0,a.Lk)("div",ca,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Link text:")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.text=t,type:"text",placeholder:r.t("Click here"),class:"widget-input"},null,8,ua),[[_e.Jo,e.text]])]),(0,a.Lk)("div",ga,[(0,a.Lk)("label",null,(0,o.v_)(r.t("URL:")),1),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.url=t,type:"url",placeholder:"https://example.com",class:"widget-input"},null,8,pa),[[_e.Jo,e.url]])])]),(0,a.Lk)("div",ha,[(0,a.Lk)("div",ma,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Icon:")),1),(0,a.bF)(c,{modelValue:e.iconObject,"onUpdate:modelValue":[t=>e.iconObject=t,e=>r.updateLinkIcon(t,e)],options:r.iconOptions,placeholder:r.t("Select an icon"),clearable:!0},{"selected-option":(0,a.k6)(e=>[(0,a.Lk)("div",ba,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(r.getIconComponent(e.value)),{size:20})),(0,a.Lk)("span",null,(0,o.v_)(e.label),1)])]),option:(0,a.k6)(e=>[(0,a.Lk)("div",va,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(r.getIconComponent(e.value)),{size:20})),(0,a.Lk)("span",null,(0,o.v_)(e.label),1)])]),_:1},8,["modelValue","onUpdate:modelValue","options","placeholder"])]),(0,a.Lk)("div",ka,[(0,a.Lk)("label",null,(0,o.v_)(r.t("Link background:")),1),(0,a.Lk)("div",fa,[(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:!e.backgroundColor},"color-preset-btn small"]),onClick:e=>r.setLinkBackground(t,null)},(0,o.v_)(r.t("Default")),11,wa),(0,a.Lk)("button",{type:"button",class:(0,o.C4)([{active:"var(--color-primary-element-light)"===e.backgroundColor},"color-preset-btn small"]),onClick:e=>r.setLinkBackground(t,"var(--color-primary-element-light)")},(0,o.v_)(r.t("Primary")),11,ya)])])])]),(0,a.Lk)("button",{type:"button",onClick:e=>r.removeLink(t),class:"remove-link-btn",title:r.t("Remove link")},[(0,a.bF)(u,{size:20})],8,xa)]))),128))])):((0,a.uX)(),(0,a.CE)("div",Ca,[(0,a.bF)(g,{size:48}),(0,a.Lk)("p",null,(0,o.v_)(r.t('No links yet. Click "Add link" to get started.')),1)]))]),(0,a.Lk)("div",Wa,[(0,a.bF)(s,{onClick:t[4]||(t[4]=t=>e.$emit("close")),type:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(r.t("Cancel")),1)]),_:1}),(0,a.bF)(s,{onClick:r.save,type:"primary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(r.t("Save")),1)]),_:1},8,["onClick"])])])]),_:1},8,["name"])}],["__scopeId","data-v-59890675"]]),Ga={name:"PageEditor",components:{draggable:X(),NcButton:B.x1,NcDialog:B.i$,NcActions:B.B6,NcActionButton:B.Ko,Plus:H.A,TableRowPlusAfter:Q.A,TableRowPlusBefore:N.A,TableColumnPlusBefore:j.A,TableColumnPlusAfter:O.A,Pencil:J.A,Delete:K.A,ContentDuplicate:G.A,Palette:q.A,DragVertical:Z.A,Widget:Y.A,WidgetPicker:Pe,WidgetEditor:Ji,LinksEditor:Ka},props:{page:{type:Object,required:!0}},emits:["update"],data(){return{localPage:structuredClone(this.page),showWidgetPicker:!1,editingWidget:null,editingRowIndex:null,editingSideColumn:null,targetRowIndex:null,targetColumn:null,targetSideColumn:null,nextWidgetId:1,columnArrays:{},sideColumnWidgets:{left:[],right:[]},headerRowWidgets:[],editingHeaderRow:!1,targetHeaderRow:!1,showDeleteDialog:!1,deleteDialogTitle:"",deleteDialogMessage:"",deleteCallback:null,focusedWidgetId:null}},computed:{hasHeaderRow(){return!0===this.localPage.layout.headerRow?.enabled},backgroundColors(){return[{label:this.t("Default (transparent)"),value:"",cssVar:"transparent"},{label:this.t("Primary"),value:"var(--color-primary-element)",cssVar:"var(--color-primary-element)"},{label:this.t("Primary light"),value:"var(--color-primary-element-light)",cssVar:"var(--color-primary-element-light)"},{label:this.t("Light background"),value:"var(--color-background-hover)",cssVar:"var(--color-background-hover)"}]}},mounted(){this.initializeWidgetIds(),this.initializeColumnArrays(),this.initializeSideColumns(),this.initializeHeaderRow()},methods:{t:(e,t={})=>(0,V.Tl)("intravox",e,t),getRowStyle(e){const t={};return e.backgroundColor&&(t.backgroundColor=e.backgroundColor,"var(--color-primary-element)"===e.backgroundColor?t.color="var(--color-primary-element-text)":t.color="var(--color-main-text)"),t},needsEditButton:e=>["image","link","links","file","heading","video"].includes(e),initializeWidgetIds(){const e=[];this.localPage.layout.rows.forEach((t,i)=>{t.widgets.forEach((t,a)=>{e.push({widget:t,zone:"row",rowIndex:i,widgetIndex:a})})}),this.localPage.layout.headerRow?.widgets&&this.localPage.layout.headerRow.widgets.forEach((t,i)=>{e.push({widget:t,zone:"header",widgetIndex:i})}),this.localPage.layout.sideColumns&&["left","right"].forEach(t=>{this.localPage.layout.sideColumns[t]?.widgets&&this.localPage.layout.sideColumns[t].widgets.forEach((i,a)=>{e.push({widget:i,zone:`side-${t}`,widgetIndex:a})})});let t=0;const i=new Set,a=[];e.forEach(e=>{const o=e.widget;if(o.id){const n=o.id.match(/^widget-(\d+)$/);n&&(t=Math.max(t,parseInt(n[1],10))),i.has(o.id)?a.push(e):i.add(o.id)}}),this.nextWidgetId=t+1,e.forEach(e=>{const t=e.widget;t.id&&!a.includes(e)||(t.id="widget-"+this.nextWidgetId++)})},initializeColumnArrays(){const e={};this.localPage.layout.rows.forEach((t,i)=>{const a=(t.columns||this.localPage.layout.columns)??1;for(let o=1;o<=a;o++)e[`${i}-${o}`]=t.widgets.filter(e=>e.column===o)}),this.columnArrays=e},getColumnWidgets(e,t){const i=`${e}-${t}`;return this.columnArrays[i]||(this.columnArrays[i]=[]),this.columnArrays[i]},onDragEnd(e,t){this.$nextTick(()=>{this.syncAllZones()})},syncAllZones(){if(this.localPage.layout.headerRow){const e=this.headerRowWidgets.map((e,t)=>({...e,order:t+1}));this.headerRowWidgets=e,this.localPage.layout.headerRow.widgets=[...e]}["left","right"].forEach(e=>{if(this.localPage.layout.sideColumns?.[e]){const t=this.sideColumnWidgets[e].map((e,t)=>({...e,order:t+1}));this.sideColumnWidgets[e]=t,this.localPage.layout.sideColumns[e].widgets=[...t]}});const e=this.localPage.layout.rows.map((e,t)=>{const i=[],a=(e.columns||this.localPage.layout.columns)??1;for(let e=1;e<=a;e++){const a=`${t}-${e}`;(this.columnArrays[a]||[]).forEach((t,a)=>{const o={...t,column:e,order:a+1};i.push(o)})}return{...e,widgets:i}});this.localPage.layout.rows=e,this.localPage=structuredClone(this.localPage),this.initializeColumnArrays(),this.initializeSideColumns(),this.initializeHeaderRow(),this.$emit("update",this.localPage)},setColumns(e){const t=this.localPage.layout.columns;this.localPage.layout.columns=e,e<t&&this.localPage.layout.rows.forEach(t=>{t.widgets.forEach(t=>{t.column>e&&(t.column=e)})}),this.initializeColumnArrays()},setRowColumns(e,t){const i=this.localPage.layout.rows[e],a=(i.columns||this.localPage.layout.columns)??1;i.columns=t,t<a&&i.widgets.forEach(e=>{e.column>t&&(e.column=t)}),this.initializeColumnArrays(),this.$emit("update",this.localPage)},setRowBackgroundColor(e,t){this.localPage.layout.rows[e].backgroundColor=t,this.localPage.layout.rows=[...this.localPage.layout.rows],this.$emit("update",this.localPage)},addRow(){this.localPage.layout.rows.push({columns:1,widgets:[],backgroundColor:""}),this.initializeColumnArrays(),this.$emit("update",this.localPage)},insertRow(e){this.localPage.layout.rows.splice(e,0,{columns:1,widgets:[],backgroundColor:""}),this.initializeColumnArrays(),this.$emit("update",this.localPage)},deleteRow(e){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete row"),this.deleteDialogMessage=this.t("Are you sure you want to delete this row?"),this.deleteCallback=()=>{this.localPage.layout.rows.splice(e,1),this.initializeColumnArrays(),this.$emit("update",this.localPage)}},showWidgetPickerForColumn(e,t){this.targetRowIndex=e,this.targetColumn=t,this.showWidgetPicker=!0},addWidget(e){const t=this.createWidget(e);if(t.id="widget-"+this.nextWidgetId++,this.targetHeaderRow)return t.order=this.headerRowWidgets.length+1,this.headerRowWidgets.push(t),this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.showWidgetPicker=!1,"image"!==e&&"links"!==e&&"file"!==e&&"heading"!==e&&"video"!==e||this.editHeaderRowWidget(t),void(this.targetHeaderRow=!1);if(this.targetSideColumn){const i=this.targetSideColumn;return t.order=this.sideColumnWidgets[i].length+1,this.sideColumnWidgets[i].push(t),this.localPage.layout.sideColumns[i].widgets=[...this.sideColumnWidgets[i]],this.showWidgetPicker=!1,"image"!==e&&"links"!==e&&"file"!==e&&"heading"!==e&&"video"!==e||this.editSideColumnWidget(t,i),void(this.targetSideColumn=null)}const i=null!==this.targetRowIndex?this.targetRowIndex:0,a=null!==this.targetColumn?this.targetColumn:1;0===this.localPage.layout.rows.length&&this.addRow();const o=this.localPage.layout.rows[i];t.column=a,t.order=o.widgets.filter(e=>e.column===a).length+1,o.widgets.push(t),this.initializeColumnArrays(),this.showWidgetPicker=!1,"image"!==e&&"links"!==e&&"file"!==e&&"heading"!==e&&"video"!==e||this.editWidget(t,i),this.targetRowIndex=null,this.targetColumn=null},createWidget(e){const t={type:e,column:1,order:1};switch(e){case"text":t.content="";break;case"heading":t.content=this.t("New heading"),t.level=2;break;case"image":t.src="",t.alt="";break;case"link":t.url="",t.text=this.t("Link text");break;case"links":t.items=[],t.columns=2,t.backgroundColor=null;break;case"file":t.path="",t.name=this.t("File");break;case"video":t.provider="embed",t.src="",t.title="",t.autoplay=!1,t.loop=!1,t.muted=!1}return t},editWidget(e,t){this.editingWidget=structuredClone(e),this.editingRowIndex=t},saveWidget(e){if(this.editingHeaderRow){const t=this.headerRowWidgets.findIndex(e=>e.id===this.editingWidget.id);return-1!==t&&(e.id=this.editingWidget.id,e.order=this.editingWidget.order,this.headerRowWidgets.splice(t,1,e),this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)),this.editingWidget=null,void(this.editingHeaderRow=!1)}if(this.editingSideColumn){const t=this.editingSideColumn,i=this.sideColumnWidgets[t],a=i.findIndex(e=>e.id===this.editingWidget.id);return-1!==a&&(e.id=this.editingWidget.id,e.order=this.editingWidget.order,i.splice(a,1,e),this.localPage.layout.sideColumns[t].widgets=[...i],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)),this.editingWidget=null,void(this.editingSideColumn=null)}const t=this.localPage.layout.rows[this.editingRowIndex],i=t.widgets.findIndex(e=>e.id===this.editingWidget.id);-1!==i&&(e.id=this.editingWidget.id,e.column=this.editingWidget.column,e.order=this.editingWidget.order,t.widgets.splice(i,1,e),this.initializeColumnArrays(),this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)),this.editingWidget=null,this.editingRowIndex=null},updateWidget(e,t){const i=this.localPage.layout.rows[t],a=i.widgets.findIndex(t=>t.id===e.id);-1!==a&&(i.widgets[a]=e,this.initializeColumnArrays(),this.$emit("update",this.localPage))},duplicateWidgetGeneric(e,t,i){const a=structuredClone(e);a.id="widget-"+this.nextWidgetId++;const o=t.findIndex(t=>t.id===e.id);-1!==o&&(a.order=e.order+1,t.splice(o+1,0,a),t.filter(t=>t.order>e.order&&t.id!==a.id).forEach(e=>e.order++),i&&i())},duplicateWidget(e,t){const i=this.columnArrays[`${e}-${t.column}`];this.duplicateWidgetGeneric(t,i,()=>this.syncAllZones())},duplicateHeaderRowWidget(e){this.duplicateWidgetGeneric(e,this.headerRowWidgets,()=>this.syncAllZones())},duplicateSideColumnWidget(e,t){this.duplicateWidgetGeneric(e,this.sideColumnWidgets[t],()=>this.syncAllZones())},deleteWidget(e,t){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete widget"),this.deleteDialogMessage=this.t("Are you sure you want to delete this widget?"),this.deleteCallback=()=>{const i=this.localPage.layout.rows[e],a=i.widgets.findIndex(e=>e.id===t);-1!==a&&(i.widgets.splice(a,1),this.initializeColumnArrays(),this.$emit("update",this.localPage))}},confirmDelete(){this.deleteCallback&&this.deleteCallback(),this.cancelDelete()},cancelDelete(){this.showDeleteDialog=!1,this.deleteDialogTitle="",this.deleteDialogMessage="",this.deleteCallback=null},initializeSideColumns(){this.localPage.layout.sideColumns||(this.localPage.layout.sideColumns={left:{enabled:!1,backgroundColor:"",widgets:[]},right:{enabled:!1,backgroundColor:"",widgets:[]}}),["left","right"].forEach(e=>{this.localPage.layout.sideColumns[e]||(this.localPage.layout.sideColumns[e]={enabled:!1,backgroundColor:"",widgets:[]}),this.sideColumnWidgets[e]=this.localPage.layout.sideColumns[e].widgets||[],this.sideColumnWidgets[e].forEach(e=>{e.id||(e.id="widget-"+this.nextWidgetId++)})})},hasSideColumn(e){return!0===this.localPage.layout.sideColumns?.[e]?.enabled},addSideColumn(e){this.localPage.layout.sideColumns||(this.localPage.layout.sideColumns={}),this.localPage.layout.sideColumns[e]={enabled:!0,backgroundColor:"",widgets:[]},this.sideColumnWidgets[e]=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)},removeSideColumn(e){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Remove column"),this.deleteDialogMessage=this.t("Are you sure you want to remove this column?"),this.deleteCallback=()=>{this.localPage.layout.sideColumns?.[e]&&(this.localPage.layout.sideColumns[e].enabled=!1,this.localPage.layout.sideColumns[e].widgets=[],this.sideColumnWidgets[e]=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))}},getSideColumnWidgets(e){return this.sideColumnWidgets[e]||[]},getSideColumnBgColor(e){return this.localPage.layout.sideColumns?.[e]?.backgroundColor||""},getSideColumnStyle(e){const t=this.localPage.layout.sideColumns?.[e];if(!t)return{};const i={};return t.backgroundColor&&(i.backgroundColor=t.backgroundColor,"var(--color-primary-element)"===t.backgroundColor?i.color="var(--color-primary-element-text)":i.color="var(--color-main-text)"),i},setSideColumnBackgroundColor(e,t){this.localPage.layout.sideColumns?.[e]&&(this.localPage.layout.sideColumns[e].backgroundColor=t,this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))},showSideColumnWidgetPicker(e){this.targetSideColumn=e,this.targetRowIndex=null,this.targetColumn=null,this.showWidgetPicker=!0},onSideColumnDragEnd(e){this.$nextTick(()=>{this.syncAllZones()})},editSideColumnWidget(e,t){this.editingWidget=structuredClone(e),this.editingSideColumn=t,this.editingRowIndex=null},updateSideColumnWidget(e,t){const i=this.sideColumnWidgets[t],a=i.findIndex(t=>t.id===e.id);-1!==a&&(i[a]=e,this.localPage.layout.sideColumns[t].widgets=[...i],this.$emit("update",this.localPage))},deleteSideColumnWidget(e,t){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete widget"),this.deleteDialogMessage=this.t("Are you sure you want to delete this widget?"),this.deleteCallback=()=>{const i=this.sideColumnWidgets[e].findIndex(e=>e.id===t);-1!==i&&(this.sideColumnWidgets[e].splice(i,1),this.localPage.layout.sideColumns[e].widgets=[...this.sideColumnWidgets[e]],this.$emit("update",this.localPage))}},initializeHeaderRow(){this.localPage.layout.headerRow||(this.localPage.layout.headerRow={enabled:!1,backgroundColor:"",widgets:[]}),this.headerRowWidgets=this.localPage.layout.headerRow.widgets||[],this.headerRowWidgets.forEach(e=>{e.id||(e.id="widget-"+this.nextWidgetId++)})},addHeaderRow(){this.localPage.layout.headerRow||(this.localPage.layout.headerRow={}),this.localPage.layout.headerRow={enabled:!0,backgroundColor:"",widgets:[]},this.headerRowWidgets=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage)},removeHeaderRow(){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Remove header row"),this.deleteDialogMessage=this.t("Are you sure you want to remove the header row?"),this.deleteCallback=()=>{this.localPage.layout.headerRow&&(this.localPage.layout.headerRow.enabled=!1,this.localPage.layout.headerRow.widgets=[],this.headerRowWidgets=[],this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))}},getHeaderRowBgColor(){return this.localPage.layout.headerRow?.backgroundColor||""},getHeaderRowStyle(){const e=this.localPage.layout.headerRow;if(!e)return{};const t={};return e.backgroundColor&&(t.backgroundColor=e.backgroundColor,"var(--color-primary-element)"===e.backgroundColor?t.color="var(--color-primary-element-text)":t.color="var(--color-main-text)"),t},setHeaderRowBackgroundColor(e){this.localPage.layout.headerRow&&(this.localPage.layout.headerRow.backgroundColor=e,this.localPage=structuredClone(this.localPage),this.$emit("update",this.localPage))},showHeaderRowWidgetPicker(){this.targetHeaderRow=!0,this.targetSideColumn=null,this.targetRowIndex=null,this.targetColumn=null,this.showWidgetPicker=!0},onHeaderRowDragEnd(){this.$nextTick(()=>{this.syncAllZones()})},editHeaderRowWidget(e){this.editingWidget=structuredClone(e),this.editingHeaderRow=!0,this.editingSideColumn=null,this.editingRowIndex=null},updateHeaderRowWidget(e){const t=this.headerRowWidgets.findIndex(t=>t.id===e.id);-1!==t&&(this.headerRowWidgets[t]=e,this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.$emit("update",this.localPage))},deleteHeaderRowWidget(e){this.showDeleteDialog=!0,this.deleteDialogTitle=this.t("Delete widget"),this.deleteDialogMessage=this.t("Are you sure you want to delete this widget?"),this.deleteCallback=()=>{const t=this.headerRowWidgets.findIndex(t=>t.id===e);-1!==t&&(this.headerRowWidgets.splice(t,1),this.localPage.layout.headerRow.widgets=[...this.headerRowWidgets],this.$emit("update",this.localPage))}}}};var qa=i(9362),Za={};Za.styleTagTransform=xe(),Za.setAttributes=ke(),Za.insert=be().bind(null,"head"),Za.domAPI=he(),Za.insertStyleElement=we(),ge()(qa.A,Za),qa.A&&qa.A.locals&&qa.A.locals;const Ya=(0,Le.A)(Ga,[["render",function(e,t,i,$,X,V){const B=(0,a.g2)("Palette"),H=(0,a.g2)("NcActionButton"),Q=(0,a.g2)("NcActions"),N=(0,a.g2)("Delete"),j=(0,a.g2)("NcButton"),O=(0,a.g2)("DragVertical"),J=(0,a.g2)("Pencil"),K=(0,a.g2)("ContentDuplicate"),G=(0,a.g2)("Widget"),q=(0,a.g2)("draggable"),Z=(0,a.g2)("Plus"),Y=(0,a.g2)("TableRowPlusBefore"),ee=(0,a.g2)("TableColumnPlusBefore"),te=(0,a.g2)("TableColumnPlusAfter"),ie=(0,a.g2)("TableRowPlusAfter"),ae=(0,a.g2)("WidgetPicker"),oe=(0,a.g2)("WidgetEditor"),ne=(0,a.g2)("LinksEditor"),le=(0,a.g2)("NcDialog");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Q3)(" Header Row (spans full width above everything) "),V.hasHeaderRow?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"header-row-editor",style:(0,o.Tr)(V.getHeaderRowStyle())},[(0,a.Lk)("div",l,[(0,a.Lk)("span",r,(0,o.v_)(V.t("Header row")),1),(0,a.Lk)("div",d,[(0,a.bF)(Q,null,{icon:(0,a.k6)(()=>[(0,a.bF)(B,{size:20})]),default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.backgroundColors,e=>((0,a.uX)(),(0,a.Wv)(H,{key:e.value,onClick:t=>V.setHeaderRowBackgroundColor(e.value)},{icon:(0,a.k6)(()=>[(0,a.Lk)("div",{class:"color-preview",style:(0,o.Tr)({background:e.cssVar})},null,4)]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:1}),(0,a.bF)(j,{type:"error",onClick:t[0]||(t[0]=e=>V.removeHeaderRow()),"aria-label":V.t("Remove header row")},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:20})]),_:1},8,["aria-label"])])]),(0,a.Lk)("div",s,[(0,a.bF)(q,{list:X.headerRowWidgets,group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:V.onHeaderRowDragEnd,class:"header-widget-drop-zone"},{item:(0,a.k6)(({element:e})=>[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("div",{class:"drag-handle","aria-label":V.t("Drag to reorder")},[(0,a.bF)(O,{size:16})],8,g),V.needsEditButton(e.type)?((0,a.uX)(),(0,a.Wv)(j,{key:0,onClick:t=>V.editHeaderRowWidget(e),type:"secondary","aria-label":V.t("Edit widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,a.Q3)("v-if",!0),(0,a.bF)(j,{onClick:t=>V.duplicateHeaderRowWidget(e),type:"secondary","aria-label":V.t("Duplicate widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,a.bF)(j,{onClick:t=>V.deleteHeaderRowWidget(e.id),type:"error","aria-label":V.t("Delete widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,a.bF)(G,{widget:e,"page-id":i.page.uniqueId,editable:!0,"row-background-color":V.getHeaderRowBgColor(),onUpdate:t[1]||(t[1]=e=>V.updateHeaderRowWidget(e))},null,8,["widget","page-id","row-background-color"])])]),_:1},8,["list","onEnd"]),(0,a.bF)(j,{onClick:t[2]||(t[2]=e=>V.showHeaderRowWidgetPicker()),type:"primary",class:"add-widget-btn"},{icon:(0,a.k6)(()=>[(0,a.bF)(Z,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Add Widget")),1)]),_:1})])],4)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Add Header Row Button (when no header row exists) "),V.hasHeaderRow?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("div",p,[(0,a.bF)(j,{onClick:t[3]||(t[3]=e=>V.addHeaderRow()),type:"secondary",class:"add-header-row-btn"},{icon:(0,a.k6)(()=>[(0,a.bF)(Y,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Header row")),1)]),_:1})])),(0,a.Lk)("div",h,[(0,a.Q3)(" Left Side Column "),V.hasSideColumn("left")?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"side-column-editor side-column-left",style:(0,o.Tr)(V.getSideColumnStyle("left"))},[(0,a.Lk)("div",m,[(0,a.Lk)("span",b,(0,o.v_)(V.t("Left column")),1),(0,a.Lk)("div",v,[(0,a.bF)(Q,null,{icon:(0,a.k6)(()=>[(0,a.bF)(B,{size:20})]),default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.backgroundColors,e=>((0,a.uX)(),(0,a.Wv)(H,{key:e.value,onClick:t=>V.setSideColumnBackgroundColor("left",e.value)},{icon:(0,a.k6)(()=>[(0,a.Lk)("div",{class:"color-preview",style:(0,o.Tr)({background:e.cssVar})},null,4)]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:1}),(0,a.bF)(j,{type:"error",onClick:t[4]||(t[4]=e=>V.removeSideColumn("left")),"aria-label":V.t("Remove column")},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:20})]),_:1},8,["aria-label"])])]),(0,a.Lk)("div",k,[(0,a.bF)(q,{list:V.getSideColumnWidgets("left"),group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:t[6]||(t[6]=e=>V.onSideColumnDragEnd("left")),class:"side-widget-drop-zone"},{item:(0,a.k6)(({element:e})=>[(0,a.Lk)("div",f,[(0,a.Lk)("div",w,[(0,a.Lk)("div",{class:"drag-handle","aria-label":V.t("Drag to reorder")},[(0,a.bF)(O,{size:16})],8,y),V.needsEditButton(e.type)?((0,a.uX)(),(0,a.Wv)(j,{key:0,onClick:t=>V.editSideColumnWidget(e,"left"),type:"secondary","aria-label":V.t("Edit widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,a.Q3)("v-if",!0),(0,a.bF)(j,{onClick:t=>V.duplicateSideColumnWidget(e,"left"),type:"secondary","aria-label":V.t("Duplicate widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,a.bF)(j,{onClick:t=>V.deleteSideColumnWidget("left",e.id),type:"error","aria-label":V.t("Delete widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,a.bF)(G,{widget:e,"page-id":i.page.uniqueId,editable:!0,"row-background-color":V.getSideColumnBgColor("left"),onUpdate:t[5]||(t[5]=e=>V.updateSideColumnWidget(e,"left"))},null,8,["widget","page-id","row-background-color"])])]),_:1},8,["list"]),(0,a.bF)(j,{onClick:t[7]||(t[7]=e=>V.showSideColumnWidgetPicker("left")),type:"primary",class:"add-widget-btn"},{icon:(0,a.k6)(()=>[(0,a.bF)(Z,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Add Widget")),1)]),_:1})])],4)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Main Content Area "),(0,a.Lk)("div",x,[(0,a.Q3)(" Add Side Column Buttons "),(0,a.Lk)("div",C,[V.hasSideColumn("left")?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.Wv)(j,{key:0,onClick:t[8]||(t[8]=e=>V.addSideColumn("left")),type:"secondary","aria-label":V.t("Add left column")},{icon:(0,a.k6)(()=>[(0,a.bF)(ee,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Left column")),1)]),_:1},8,["aria-label"])),V.hasSideColumn("right")?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.Wv)(j,{key:1,onClick:t[9]||(t[9]=e=>V.addSideColumn("right")),type:"secondary","aria-label":V.t("Add right column")},{icon:(0,a.k6)(()=>[(0,a.bF)(te,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Right column")),1)]),_:1},8,["aria-label"]))]),(0,a.Q3)(" Page Grid "),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.localPage.layout.rows,(e,n)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:n},[(0,a.Lk)("div",{class:"page-row editable",style:(0,o.Tr)(V.getRowStyle(e))},[(0,a.Lk)("div",W,[(0,a.Lk)("label",L,(0,o.v_)(V.t("Row columns:")),1),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,t=>(0,a.Lk)("button",{key:t,class:(0,o.C4)([{active:(e.columns||X.localPage.layout.columns)===t},"column-button small"]),onClick:e=>V.setRowColumns(n,t),style:{"margin-right":"4px"}},(0,o.v_)(t),11,P)),64)),(0,a.Q3)(" Background Color Picker "),(0,a.bF)(Q,{style:{"margin-left":"8px"}},{icon:(0,a.k6)(()=>[(0,a.bF)(B,{size:20})]),default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.backgroundColors,e=>((0,a.uX)(),(0,a.Wv)(H,{key:e.value,onClick:t=>V.setRowBackgroundColor(n,e.value)},{icon:(0,a.k6)(()=>[(0,a.Lk)("div",{class:"color-preview",style:(0,o.Tr)({background:e.cssVar})},null,4)]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024),(0,a.bF)(j,{onClick:e=>V.deleteRow(n),type:"error","aria-label":V.t("Delete row"),style:{"margin-left":"8px"}},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:20})]),_:1},8,["onClick","aria-label"])]),(0,a.Lk)("div",{class:"page-grid",style:(0,o.Tr)({gridTemplateColumns:`repeat(${(e.columns||X.localPage.layout.columns)??1}, 1fr)`})},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((e.columns||X.localPage.layout.columns)??1,l=>((0,a.uX)(),(0,a.CE)("div",{key:`${n}-${l}`,class:"page-column droppable"},[(0,a.Lk)("div",_,(0,o.v_)(V.t("Column {column}",{column:l})),1),(0,a.bF)(q,{list:V.getColumnWidgets(n,l),group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:e=>V.onDragEnd(n,l),class:"widget-drop-zone"},{item:(0,a.k6)(({element:l})=>[(0,a.Lk)("div",{class:(0,o.C4)(["widget-wrapper",{editing:X.focusedWidgetId===l.id}])},[(0,a.Q3)(" Floating toolbar - appears on hover "),(0,a.Lk)("div",A,[(0,a.Lk)("div",{class:"drag-handle","aria-label":V.t("Drag to reorder")},[(0,a.bF)(O,{size:16})],8,z),V.needsEditButton(l.type)?((0,a.uX)(),(0,a.Wv)(j,{key:0,onClick:e=>V.editWidget(l,n),type:"secondary","aria-label":V.t("Edit widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,a.Q3)("v-if",!0),(0,a.bF)(j,{onClick:e=>V.duplicateWidget(n,l),type:"secondary","aria-label":V.t("Duplicate widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,a.bF)(j,{onClick:e=>V.deleteWidget(n,l.id),type:"error","aria-label":V.t("Delete widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,a.bF)(G,{widget:l,"page-id":i.page.uniqueId,editable:!0,"row-background-color":e.backgroundColor||"",onUpdate:e=>V.updateWidget(e,n),onFocus:e=>X.focusedWidgetId=l.id,onBlur:t[10]||(t[10]=e=>X.focusedWidgetId=null)},null,8,["widget","page-id","row-background-color","onUpdate","onFocus"])],2)]),_:2},1032,["list","onEnd"]),(0,a.Lk)("div",F,[(0,a.bF)(j,{onClick:e=>V.showWidgetPickerForColumn(n,l),type:"primary",class:"add-widget-btn"},{icon:(0,a.k6)(()=>[(0,a.bF)(Z,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Add Widget")),1)]),_:1},8,["onClick"])])]))),128))],4)],4),(0,a.Q3)(" Insert Row Button "),(0,a.Lk)("div",T,[(0,a.bF)(j,{onClick:e=>V.insertRow(n+1),type:"secondary",class:"insert-row-btn"},{icon:(0,a.k6)(()=>[(0,a.bF)(ie,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Insert Row")),1)]),_:1},8,["onClick"])])],64))),128)),(0,a.Q3)(" Widget Picker Modal "),X.showWidgetPicker?((0,a.uX)(),(0,a.Wv)(ae,{key:0,onClose:t[11]||(t[11]=e=>X.showWidgetPicker=!1),onSelect:V.addWidget},null,8,["onSelect"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Widget Editor Modal "),X.editingWidget&&"links"!==X.editingWidget.type?((0,a.uX)(),(0,a.Wv)(oe,{key:1,widget:X.editingWidget,"page-id":i.page.uniqueId,onClose:t[12]||(t[12]=e=>X.editingWidget=null),onSave:V.saveWidget},null,8,["widget","page-id","onSave"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Links Editor Modal "),X.editingWidget&&"links"===X.editingWidget.type?((0,a.uX)(),(0,a.Wv)(ne,{key:2,widget:X.editingWidget,onClose:t[13]||(t[13]=e=>X.editingWidget=null),onSave:V.saveWidget},null,8,["widget","onSave"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Delete Confirmation Dialog "),X.showDeleteDialog?((0,a.uX)(),(0,a.Wv)(le,{key:3,name:X.deleteDialogTitle,onClosing:V.cancelDelete},{actions:(0,a.k6)(()=>[(0,a.bF)(j,{onClick:V.cancelDelete,type:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(V.t("Cancel")),1)]),_:1},8,["onClick"]),(0,a.bF)(j,{onClick:V.confirmDelete,type:"error"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(V.t("Delete")),1)]),_:1},8,["onClick"])]),default:(0,a.k6)(()=>[(0,a.Lk)("p",null,(0,o.v_)(X.deleteDialogMessage),1)]),_:1},8,["name","onClosing"])):(0,a.Q3)("v-if",!0)]),(0,a.Q3)(" Right Side Column "),V.hasSideColumn("right")?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"side-column-editor side-column-right",style:(0,o.Tr)(V.getSideColumnStyle("right"))},[(0,a.Lk)("div",R,[(0,a.Lk)("span",S,(0,o.v_)(V.t("Right column")),1),(0,a.Lk)("div",E,[(0,a.bF)(Q,null,{icon:(0,a.k6)(()=>[(0,a.bF)(B,{size:20})]),default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.backgroundColors,e=>((0,a.uX)(),(0,a.Wv)(H,{key:e.value,onClick:t=>V.setSideColumnBackgroundColor("right",e.value)},{icon:(0,a.k6)(()=>[(0,a.Lk)("div",{class:"color-preview",style:(0,o.Tr)({background:e.cssVar})},null,4)]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(e.label),1)]),_:2},1032,["onClick"]))),128))]),_:1}),(0,a.bF)(j,{type:"error",onClick:t[14]||(t[14]=e=>V.removeSideColumn("right")),"aria-label":V.t("Remove column")},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:20})]),_:1},8,["aria-label"])])]),(0,a.Lk)("div",I,[(0,a.bF)(q,{list:V.getSideColumnWidgets("right"),group:{name:"allWidgets",pull:!0,put:!0},animation:200,"item-key":"id",handle:".drag-handle",onEnd:t[16]||(t[16]=e=>V.onSideColumnDragEnd("right")),class:"side-widget-drop-zone"},{item:(0,a.k6)(({element:e})=>[(0,a.Lk)("div",U,[(0,a.Lk)("div",D,[(0,a.Lk)("div",{class:"drag-handle","aria-label":V.t("Drag to reorder")},[(0,a.bF)(O,{size:16})],8,M),V.needsEditButton(e.type)?((0,a.uX)(),(0,a.Wv)(j,{key:0,onClick:t=>V.editSideColumnWidget(e,"right"),type:"secondary","aria-label":V.t("Edit widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(J,{size:16})]),_:1},8,["onClick","aria-label"])):(0,a.Q3)("v-if",!0),(0,a.bF)(j,{onClick:t=>V.duplicateSideColumnWidget(e,"right"),type:"secondary","aria-label":V.t("Duplicate widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(K,{size:16})]),_:1},8,["onClick","aria-label"]),(0,a.bF)(j,{onClick:t=>V.deleteSideColumnWidget("right",e.id),type:"error","aria-label":V.t("Delete widget")},{icon:(0,a.k6)(()=>[(0,a.bF)(N,{size:16})]),_:1},8,["onClick","aria-label"])]),(0,a.bF)(G,{widget:e,"page-id":i.page.uniqueId,editable:!0,"row-background-color":V.getSideColumnBgColor("right"),onUpdate:t[15]||(t[15]=e=>V.updateSideColumnWidget(e,"right"))},null,8,["widget","page-id","row-background-color"])])]),_:1},8,["list"]),(0,a.bF)(j,{onClick:t[17]||(t[17]=e=>V.showSideColumnWidgetPicker("right")),type:"primary",class:"add-widget-btn"},{icon:(0,a.k6)(()=>[(0,a.bF)(Z,{size:20})]),default:(0,a.k6)(()=>[(0,a.eW)(" "+(0,o.v_)(V.t("Add Widget")),1)]),_:1})])],4)):(0,a.Q3)("v-if",!0)])])}],["__scopeId","data-v-43bb18b6"]])},9362:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(1601),o=i.n(a),n=i(6314),l=i.n(n)()(o());l.push([e.id,"\n.page-editor-wrapper[data-v-43bb18b6] {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n.page-editor-container[data-v-43bb18b6] {\n  display: flex;\n  gap: 16px;\n  width: 100%;\n}\n.page-editor[data-v-43bb18b6] {\n  flex: 1;\n  min-width: 0;\n  width: 100%;\n}\n\n/* Header Row Editor Styles */\n.header-row-editor[data-v-43bb18b6] {\n  width: 100%;\n  padding: 16px;\n  margin-bottom: 16px;\n  border: 2px dashed var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background-color: transparent;\n  box-sizing: border-box;\n}\n.header-row-header[data-v-43bb18b6] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--color-border);\n}\n.header-row-title[data-v-43bb18b6] {\n  font-weight: 600;\n  font-size: 14px;\n}\n.header-row-actions[data-v-43bb18b6] {\n  display: flex;\n  gap: 4px;\n}\n.header-row-widgets[data-v-43bb18b6] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.header-widget-drop-zone[data-v-43bb18b6] {\n  min-height: 80px;\n}\n.add-header-row-container[data-v-43bb18b6] {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius-large);\n}\n.add-header-row-btn[data-v-43bb18b6] {\n  width: auto;\n}\n\n/* Side Column Editor Styles */\n.side-column-editor[data-v-43bb18b6] {\n  flex-shrink: 0;\n  width: 280px;\n  min-width: 250px;\n  max-width: 320px;\n  padding: 16px;\n  border: 2px dashed var(--color-border-dark);\n  border-radius: var(--border-radius-large);\n  background-color: var(--color-background-dark);\n  box-sizing: border-box;\n  align-self: flex-start;\n}\n.side-column-header[data-v-43bb18b6] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid var(--color-border);\n}\n.side-column-title[data-v-43bb18b6] {\n  font-weight: 600;\n  font-size: 14px;\n}\n.side-column-actions[data-v-43bb18b6] {\n  display: flex;\n  gap: 4px;\n}\n.side-column-widgets[data-v-43bb18b6] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.side-widget-drop-zone[data-v-43bb18b6] {\n  min-height: 80px;\n}\n.side-column-buttons[data-v-43bb18b6] {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-background-hover);\n  border-radius: var(--border-radius-large);\n}\n\n/* Mobile responsive */\n@media (max-width: 768px) {\n.page-editor-container[data-v-43bb18b6] {\n    flex-direction: column;\n}\n.side-column-editor[data-v-43bb18b6] {\n    width: 100%;\n    min-width: 100%;\n    max-width: 100%;\n    order: 1;\n}\n.side-column-left[data-v-43bb18b6] {\n    order: -1;\n}\n.page-editor[data-v-43bb18b6] {\n    order: 0;\n}\n.side-column-buttons[data-v-43bb18b6] {\n    flex-direction: column;\n}\n}\n.editor-toolbar[data-v-43bb18b6] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  background: var(--color-background-dark);\n  border-radius: var(--border-radius-large);\n  margin-bottom: 20px;\n}\n.toolbar-group[data-v-43bb18b6] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.toolbar-group label[data-v-43bb18b6] {\n  font-weight: bold;\n  margin-right: 5px;\n}\n.column-button[data-v-43bb18b6] {\n  width: 35px;\n  height: 35px;\n  border: 2px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: var(--color-main-background);\n  cursor: pointer;\n  font-weight: bold;\n}\n.column-button[data-v-43bb18b6]:hover {\n  background: var(--color-background-hover);\n}\n.column-button.active[data-v-43bb18b6] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.column-button.small[data-v-43bb18b6] {\n  width: 28px;\n  height: 28px;\n  font-size: 12px;\n}\n.insert-row-container[data-v-43bb18b6] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 8px 0;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n.insert-row-container[data-v-43bb18b6]:hover {\n  opacity: 1;\n}\n.insert-row-btn[data-v-43bb18b6] {\n  font-size: 13px;\n}\n.page-row[data-v-43bb18b6] {\n  margin-bottom: 12px;\n  position: relative;\n  padding: 16px;\n  border: 2px dashed transparent;\n  border-radius: var(--border-radius-large);\n}\n.page-row.editable[data-v-43bb18b6] {\n  border-color: var(--color-border);\n}\n.row-controls[data-v-43bb18b6] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  padding: 8px;\n  background: transparent;\n  border-radius: var(--border-radius-large);\n  border: 1px solid var(--color-border);\n}\n.page-grid[data-v-43bb18b6] {\n  display: grid;\n  gap: 12px;\n  width: 100%;\n}\n.page-column[data-v-43bb18b6] {\n  min-height: 100px;\n  padding: 10px;\n  border: 2px dashed var(--color-border);\n  border-radius: var(--border-radius-large);\n  background: transparent;\n  position: relative;\n}\n.column-label[data-v-43bb18b6] {\n  position: absolute;\n  top: -10px;\n  left: 10px;\n  background: transparent;\n  padding: 2px 8px;\n  font-size: 12px;\n  color: var(--color-text-maxcontrast);\n  border-radius: var(--border-radius-large);\n}\n.widget-drop-zone[data-v-43bb18b6] {\n  min-height: 80px;\n  transition: background-color 0.2s;\n}\n.page-column.droppable[data-v-43bb18b6] {\n  transition: all 0.2s;\n}\n.page-column.droppable[data-v-43bb18b6]:hover {\n  border-color: var(--color-primary);\n  background: transparent;\n}\n.widget-wrapper[data-v-43bb18b6] {\n  position: relative;\n  margin-bottom: 15px;\n  padding: 10px;\n  border: 1px solid transparent;\n  border-radius: var(--border-radius-large);\n  background: transparent;\n  transition: border-color 0.2s ease;\n}\n.widget-wrapper[data-v-43bb18b6]:hover {\n  border-color: var(--color-border);\n}\n\n/* Divider widget in edit mode - no padding or border */\n.widget-wrapper[data-v-43bb18b6]:has(.widget-divider) {\n  padding: 0;\n  border: none;\n  background: transparent;\n  margin-bottom: 15px;\n}\n\n/* Floating toolbar - Medium/Notion style */\n.floating-toolbar[data-v-43bb18b6] {\n  position: absolute;\n  top: -36px; /* Float above widget */\n  right: 0;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px;\n  background: var(--color-main-background);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-large);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  z-index: 1001;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.2s ease;\n}\n.widget-wrapper:hover .floating-toolbar[data-v-43bb18b6] {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n/* Hide toolbar when editing */\n.widget-wrapper.editing .floating-toolbar[data-v-43bb18b6] {\n  opacity: 0 !important;\n  pointer-events: none !important;\n}\n\n/* Divider widgets - show toolbar below instead of above */\n.widget-wrapper:has(.widget-divider) .floating-toolbar[data-v-43bb18b6] {\n  top: auto;\n  bottom: -36px;\n}\n\n/* Drag handle in floating toolbar */\n.floating-toolbar .drag-handle[data-v-43bb18b6] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 6px 8px;\n  background: transparent;\n  border: none;\n  border-radius: var(--border-radius);\n  cursor: grab;\n  color: var(--color-text-maxcontrast);\n  transition: all 0.15s ease;\n}\n.floating-toolbar .drag-handle[data-v-43bb18b6]:hover {\n  background: var(--color-background-hover);\n  color: var(--color-main-text);\n}\n.floating-toolbar .drag-handle[data-v-43bb18b6]:active {\n  cursor: grabbing;\n  background: var(--color-primary-element-light);\n}\n\n/* Compact buttons in toolbar */\n.floating-toolbar[data-v-43bb18b6] .button-vue {\n  min-height: 28px !important;\n  min-width: 28px !important;\n}\n.floating-toolbar[data-v-43bb18b6] .button-vue__icon {\n  height: 16px !important;\n  width: 16px !important;\n}\n.column-add-widget[data-v-43bb18b6] {\n  margin-top: 10px;\n  text-align: center;\n  padding-top: 10px;\n  border-top: 1px dashed var(--color-border);\n}\n.column-add-widget .add-widget-btn[data-v-43bb18b6] {\n  width: 100%;\n}\n.color-preview[data-v-43bb18b6] {\n  width: 20px;\n  height: 20px;\n  border-radius: var(--border-radius-large);\n  border: 1px solid var(--color-border);\n}\n",""]);const r=l}}]);